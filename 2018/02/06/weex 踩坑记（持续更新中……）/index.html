
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>weex 踩坑记（持续更新中……） | Vue试验场</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="消失了一个月，努力为新项目倒腾 weex 中，记录一下遇到的问题。之后还会持续更新~  目前，我使用的 weex 都是在集成Weex到Android来做的，项目使用的是 weex-toolkit 生成的项目模板，代码发布使用webpack打包成js放到服务器上，Android端读取服务器上的js来实现weex项目的。 杂七杂八的一些知识点 屏幕宽度为 750，高度一直没查到，我用的是1300，刚">
<meta property="og:type" content="article">
<meta property="og:title" content="weex 踩坑记（持续更新中……）">
<meta property="og:url" content="https://violetjack.github.io/2018/02/06/weex 踩坑记（持续更新中……）/index.html">
<meta property="og:site_name" content="Vue试验场">
<meta property="og:description" content="消失了一个月，努力为新项目倒腾 weex 中，记录一下遇到的问题。之后还会持续更新~  目前，我使用的 weex 都是在集成Weex到Android来做的，项目使用的是 weex-toolkit 生成的项目模板，代码发布使用webpack打包成js放到服务器上，Android端读取服务器上的js来实现weex项目的。 杂七杂八的一些知识点 屏幕宽度为 750，高度一直没查到，我用的是1300，刚">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-02-07T02:11:59.303Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="weex 踩坑记（持续更新中……）">
<meta name="twitter:description" content="消失了一个月，努力为新项目倒腾 weex 中，记录一下遇到的问题。之后还会持续更新~  目前，我使用的 weex 都是在集成Weex到Android来做的，项目使用的是 weex-toolkit 生成的项目模板，代码发布使用webpack打包成js放到服务器上，Android端读取服务器上的js来实现weex项目的。 杂七杂八的一些知识点 屏幕宽度为 750，高度一直没查到，我用的是1300，刚">
  
    <link rel="alternative" href="/atom.xml" title="Vue试验场" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Vue试验场</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">专注于Vue相关知识的捣鼓</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">文章</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="violetjack.github.io">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-weex 踩坑记（持续更新中……）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/weex 踩坑记（持续更新中……）/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      weex 踩坑记（持续更新中……）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>消失了一个月，努力为新项目倒腾 weex 中，记录一下遇到的问题。之后还会持续更新~</p>
</blockquote>
<p>目前，我使用的 <code>weex</code> 都是在<a href="http://weex.apache.org/cn/guide/integrate-to-your-app.html" target="_blank" rel="noopener">集成Weex到Android</a>来做的，项目使用的是 <code>weex-toolkit</code> 生成的项目模板，代码发布使用webpack打包成js放到服务器上，Android端读取服务器上的js来实现weex项目的。</p>
<h1 id="杂七杂八的一些知识点"><a href="#杂七杂八的一些知识点" class="headerlink" title="杂七杂八的一些知识点"></a>杂七杂八的一些知识点</h1><ul>
<li><p>屏幕宽度为 750，高度一直没查到，我用的是1300，刚好显示下。长度单位要么不写，要么就是 px，效果都一样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  height: 1300;</span><br><span class="line">  width: 750px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>布局只支持 盒子模型、flex布局、relative定位，其他一些CSS不太支持。</p>
</li>
<li>CSS的 margin、padding、border 不支持缩写。像 <code>border:5px solid red;</code> 这样写是不行滴。</li>
<li>暂不支持像 <a href="http://mint-ui.github.io/#!/zh-cn" target="_blank" rel="noopener">mint-ui</a> 这类 Vue Web UI 组件库。</li>
<li>页面的跳转可以通过 <a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="noopener">vue-router</a> 或者 weex 的 <a href="http://weex.apache.org/cn/references/modules/navigator.html" target="_blank" rel="noopener">navigator</a> 组件来实现，可以参考我提问的<a href="https://segmentfault.com/q/1010000009999942" target="_blank" rel="noopener">Weex的页面跳转方案的选择</a>。</li>
<li>在 Android 中，<code>navigator</code> 的 <code>push</code> 方法跳转的 <code>Activity</code> 界面是需要处理的，需要创建一个带有特殊 <code>&lt;intent-filter&gt;</code> 标签的 Activity。假如手机中没有带有该 <code>&lt;intent-filter&gt;</code> 的 <code>Activity</code> 就不会发生跳转，报 <code>ActivityNotFoundException</code> 错误。而如果有多个带有该 <code>&lt;intent-filter&gt;</code> 的<code>Activity</code>，Android 系统会让我们去进行选择。注：这个带 <code>&lt;intent-filter&gt;</code> 的Activity 是跨 APP 的。可以参照<a href="http://blog.csdn.net/violetjack0808/article/details/74390249" target="_blank" rel="noopener">WEEX 使用navigator跳转Android系统出现ActivityNotFoundException报错</a></li>
<li><code>image</code> 必须设置宽高，否则不显示。也不能使用 <code>img</code> 来显示图片</li>
<li>Android 手机中显示图片需要在 <code>ImageAdapter</code> 中进行处理，官网只提供了处理的位置（有注释），但未对图片进行处理。我使用了 <a href="https://github.com/square/picasso" target="_blank" rel="noopener">picasso</a> 来对图片进行显示。</li>
<li>native 和 weex 的通信通过自定义module或者发送全局事件来完成。参考<a href="http://blog.csdn.net/violetjack0808/article/details/74002599" target="_blank" rel="noopener">Weex控制Android返回键解决方案</a>里面有 native 端和 weex 端交互的细节。</li>
<li>weex 在Android手机中的调试：<ul>
<li>在 weex 中使用 console.log 方法来打 log，打开Android Studio，在 logcat中可以过滤关键词 jslog 来获取log数据。</li>
<li>如果 weex 报错，可以在 logcat 中查找错误，一般错误都好几行，很好找。</li>
<li>建议使用ESLint先过滤一些简单的语法错误，减少手机端的调试成本。</li>
</ul>
</li>
<li>weex 其他调试方式<ul>
<li>手机安装 <a href="http://weex.apache.org/cn/playground.html" target="_blank" rel="noopener">Playground</a>，运行 weex 项目，网页打开 <code>http://localhost:8080/</code> 扫描二维码进行调试。</li>
<li>可以在<a href="http://dotwe.org/vue/025db54e37123ab5336a4b848397660f" target="_blank" rel="noopener">Playground网页端</a>进行代码调试，但感觉遇到有组件的项目不太好调试。</li>
<li>在项目运行(<code>npm run serve</code>)后，直接打开 <code>http://localhost:8080/</code> 也能看到网页版本的项目，可以直接调试，不过一些设计Native端的组件用不了。</li>
</ul>
</li>
<li>weex中的标签只支持官方提供的<a href="http://weex.apache.org/cn/references/components/index.html" target="_blank" rel="noopener">内部组件</a>，因为那些是会被渲染成native界面的。</li>
<li><code>v-bind:class</code>只能使用数组语法</li>
<li><code>stream</code> 的 <code>url</code> 选项好像默认不支持中文，需要将中文转为 <code>UTF-8</code> 来传输。</li>
<li>weex 的 css 只支持 class 选择器，并且只支持单个类的选择器，如<code>.item .item-content {}</code>是错误的~</li>
<li>weex有点击特效的，参照<a href="http://weex.apache.org/cn/references/common-style.html#伪类-v0-9-5" target="_blank" rel="noopener">伪类</a>。</li>
<li>不支持 <code>display:none</code> 即不支持 <code>v-show</code>，需要使用 <code>v-if</code> 来实现显示和隐藏。</li>
<li>默认flex布局，要设置 <code>flex-direction</code>。我怀疑我的web端显示错误可能就是没有设置 <code>flex-direction</code>，移动端没有错误是因为默认 <code>flex-direction:column</code></li>
<li>存储、网络等很多都是异步的，需要注意顺序</li>
<li><code>storage</code> 只能存储字符串，取值后再转为json</li>
</ul>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>暂时整理这么多，之后还会有其他的东西我会持续更新的~<br>Android 端的 <a href="https://github.com/violetjack/WeexComponents" target="_blank" rel="noopener">demo</a> 我会放到我的 Github 上去，之后我会让我的 IOS 小伙伴给一版 IOS 版本的壳子，到时候直接写weex项目，Android端和IOS端只需要更改一下渲染的js文件路径就可以显示了。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="https://github.com/dreamochi/DayDayUp/issues/77" target="_blank" rel="noopener">weex填坑注意事项</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/weex 踩坑记（持续更新中……）/" data-id="cjdcg3r8r000c1ebtcdi4ptlj" class="article-share-link" data-share="baidu" data-title="weex 踩坑记（持续更新中……）">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/weex 踩坑记（持续更新中……）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/02/06/Vue.js学习系列三 —— axios和网络传输相关知识的学习实践/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          Vue.js学习系列三 —— axios和网络传输相关知识的学习实践
        
      </div>
    </a>
  
  
    <a href="/2018/02/06/Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</div>
    </a>
  
</nav>

  
</article>


  <section id="comments">
    <div id="ds-thread" class="ds-thread" data-thread-key="2018/02/06/weex 踩坑记（持续更新中……）/" data-title="weex 踩坑记（持续更新中……）" data-url="https://violetjack.github.io/2018/02/06/weex 踩坑记（持续更新中……）/"></div>
  </section>
</section>
      
      <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">18</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/02/06/Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）/">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a>
          </li>
        
          <li>
            <a href="/2018/02/06/Vue.js学习系列八 —— Vue源码学习之State学习/">Vue.js学习系列八 —— Vue源码学习之State学习</a>
          </li>
        
          <li>
            <a href="/2018/02/06/将表单从jQuery转Vue框架实践总结/">将表单从jQuery转Vue框架实践总结</a>
          </li>
        
          <li>
            <a href="/2018/02/06/巧用jQuery选择器写表单办法总结（提高效率）/">巧用jQuery选择器写表单办法总结（提高效率）</a>
          </li>
        
          <li>
            <a href="/2018/02/06/ES6 学习笔记（上）/">ES6 学习笔记（上）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">个人网站</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/violetjack" target="_blank">Github</a>
          </li>
        
          <li>
            <a href="https://segmentfault.com/u/violetjack" target="_blank">SegmentFault</a>
          </li>
        
          <li>
            <a href="http://blog.csdn.net/violetjack0808" target="_blank">CSDN</a>
          </li>
        
          <li>
            <a href="https://www.jianshu.com/u/54ae4af3a98d" target="_blank">简书</a>
          </li>
        
          <li>
            <a href="https://juejin.im/user/571d953d39b0570068145cd1" target="_blank">掘金</a>
          </li>
        
          <li>
            <a href="https://www.zhihu.com/people/violetjack" target="_blank">知乎</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 VioletJack<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
