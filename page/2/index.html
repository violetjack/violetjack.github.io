
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Vue实验室</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="用一年的时间好好搞定Vue，已Vue为支点撬动前端知识体系。">
<meta property="og:type" content="website">
<meta property="og:title" content="Vue实验室">
<meta property="og:url" content="https://violetjack.github.io/page/2/index.html">
<meta property="og:site_name" content="Vue实验室">
<meta property="og:description" content="用一年的时间好好搞定Vue，已Vue为支点撬动前端知识体系。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vue实验室">
<meta name="twitter:description" content="用一年的时间好好搞定Vue，已Vue为支点撬动前端知识体系。">
  
    <link rel="alternative" href="/atom.xml" title="Vue实验室" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Vue实验室</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">专注于Vue相关知识的学习和分享</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">文章</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="violetjack.github.io">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-Vue源码学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/01/Vue源码学习笔记/" class="article-date">
  <time datetime="2017-11-30T16:00:00.000Z" itemprop="datePublished">2017-12-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/01/Vue源码学习笔记/">Vue源码学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>最近偷懒好久没有写博客了，一直想继续Vue学习系列，想深入Vue源码来写。结果发现自己层次不够，对js的理解差好多。所以一直想写一直搁置着。最近重新振作决心看完Vue源码，并且以我们这类前端小白的角度来一步步弄懂Vue源码。</p>
</blockquote>
<p><strong>PS：</strong>以下文章为笔记类，记录了本人在看源码过程中的一些问题和感悟。</p>
<h1 id="Vue源码的本质是什么"><a href="#Vue源码的本质是什么" class="headerlink" title="Vue源码的本质是什么"></a>Vue源码的本质是什么</h1><p>Vue.js 本质上就是一个包含各种逻辑的一个function。而我们通常初始化Vue的过程就是实例化的过程。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>话不多说，老规矩用代码说话！<br>让我们来对Vue进行打印：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(Vue)</span><br><span class="line">console.log(vm)</span><br></pre></td></tr></table></figure></p>
<p>打印结果如图：<br><img src="http://upload-images.jianshu.io/upload_images/1987062-51c2e9112e90eeef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="vue"></p>
<p>这里可以看到Vue$3这个方法，就是这个方法对Vue对象的构造函数了。其实这很简单，我们自己都可以造出一个Vue$4<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Vue$4(options) &#123;</span><br><span class="line">    this.options = options</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Vue$4.prototype.name = &quot;小东西&quot;</span><br><span class="line">Vue$4.prototype.age = 27</span><br><span class="line"></span><br><span class="line">console.log(new Vue$4(&quot;很好&quot;))</span><br></pre></td></tr></table></figure></p>
<p>显示结果如图<br><img src="http://upload-images.jianshu.io/upload_images/1987062-ff4ba64d71f9d5b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="vue$4"></p>
<p>综上所述，Vue对象的本质就是一个function，与我们的Vue$4的不同之处只在于逻辑的多与少。</p>
<h1 id="必须理解Object对象"><a href="#必须理解Object对象" class="headerlink" title="必须理解Object对象"></a>必须理解Object对象</h1><p>在Vue的源码中，出场率最多的应该就数<code>Object</code>对象的使用上了。可以这么说，不懂Object都没法往下看代码。以下是源码中用到的比较多的。</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener">Object.defineProperty</a> 直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener">Object.create</a> 使用指定的原型对象及其属性去创建一个新的对象。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener">Object.keys</a> 返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和使用 for…in 循环遍历该对象时返回的顺序一致 （两者的主要区别是 一个 for-in 循环还会枚举其原型链上的属性）。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/prototype" target="_blank" rel="noopener">Object.prototype</a> Object的原型对象。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze" target="_blank" rel="noopener">Object.freeze</a> 冻结一个对象，冻结指的是不能向这个对象添加新的属性，不能修改其已有属性的值，不能删除已有属性，以及不能修改该对象已有属性的可枚举性、可配置性、可写性。也就是说，这个对象永远是不可变的。该方法返回被冻结的对象。</li>
</ul>
<p>那么，Vue中哪个是Object呢？我们继续试验：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(typeof Vue)</span><br><span class="line">console.log(typeof new Vue())</span><br></pre></td></tr></table></figure></p>
<p>输出结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function</span><br><span class="line">object</span><br></pre></td></tr></table></figure></p>
<p>结果显示，使用new来创建的Vue实例就是个对象，所以一切对Object的操作行为都是针对Vue实例对象的。</p>
<h1 id="理解setter和getter"><a href="#理解setter和getter" class="headerlink" title="理解setter和getter"></a>理解setter和getter</h1><p>在网上看Vue的评论是经常会听到说</p>
<blockquote>
<p>Vue无非就是setter和getter方法的运用而已</p>
</blockquote>
<p>这让我等新手一脸懵逼，这里我们就来认识认识setter和getter。<br>当我们在获取一个Vue实例data中的某个对象，如果你用console打印出来会发现，对象属性中除了常规的对象属性和<strong>proto</strong>对象之外还会多一个set和一个get方法，所谓的setter和getter就是它们。Vue给每一个对象属性都添加了Observer观察数据的获取和修改。好吧，贴代码一睹真容。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">function defineReactive (</span><br><span class="line">  obj,</span><br><span class="line">  key,</span><br><span class="line">  val,</span><br><span class="line">  customSetter,</span><br><span class="line">  shallow</span><br><span class="line">) &#123;</span><br><span class="line">  var dep = new Dep();</span><br><span class="line"></span><br><span class="line">  // Object.getOwnPropertyDescriptor() 方法返回指定对象上一个自有属性对应的属性描述符。</span><br><span class="line">  //（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）</span><br><span class="line">  // 对象、属性名称、描述~</span><br><span class="line">  var property = Object.getOwnPropertyDescriptor(obj, key);</span><br><span class="line">  // 当且仅当该属性的 configurable 为 true 时，该属性描述符才能够被改变，同时该属性也能从对应的对象上被删除。默认为 false。</span><br><span class="line">  if (property &amp;&amp; property.configurable === false) &#123;</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // cater for pre-defined getter/setters</span><br><span class="line">  var getter = property &amp;&amp; property.get;</span><br><span class="line">  var setter = property &amp;&amp; property.set;</span><br><span class="line"></span><br><span class="line">  var childOb = !shallow &amp;&amp; observe(val);</span><br><span class="line">  Object.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: true,</span><br><span class="line">    configurable: true,</span><br><span class="line">    get: function reactiveGetter () &#123;</span><br><span class="line">      var value = getter ? getter.call(obj) : val;</span><br><span class="line">      if (Dep.target) &#123; // Watcher</span><br><span class="line">        dep.depend();</span><br><span class="line">        if (childOb) &#123;</span><br><span class="line">          childOb.dep.depend();</span><br><span class="line">          if (Array.isArray(value)) &#123;</span><br><span class="line">            dependArray(value);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return value</span><br><span class="line">    &#125;,</span><br><span class="line">    set: function reactiveSetter (newVal) &#123;</span><br><span class="line">      var value = getter ? getter.call(obj) : val;</span><br><span class="line">      /* eslint-disable no-self-compare */</span><br><span class="line">      if (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123;</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line">      /* eslint-enable no-self-compare */</span><br><span class="line">      if (&quot;development&quot; !== &apos;production&apos; &amp;&amp; customSetter) &#123;</span><br><span class="line">        customSetter(); // 自定义setter</span><br><span class="line">      &#125;</span><br><span class="line">      if (setter) &#123;</span><br><span class="line">        setter.call(obj, newVal);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        val = newVal;</span><br><span class="line">      &#125;</span><br><span class="line">      childOb = !shallow &amp;&amp; observe(newVal);</span><br><span class="line">      dep.notify();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>代码太长？懵逼了？没关系，我们自己来造一个简单的setter和getter来了解一下。<br>其实用的就是Object.defineProperty方法中就有set和get。</p>
<ul>
<li>get 一个给属性提供 getter 的方法，如果没有 getter 则为 undefined。该方法返回值被用作属性值。默认为 undefined。</li>
<li>set 一个给属性提供 setter 的方法，如果没有 setter 则为 undefined。该方法将接受唯一参数，并将该参数的新值分配给该属性。默认为 undefined。</li>
</ul>
<p>好了，写代码~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;</span><br><span class="line">var mValue = &quot;abc&quot;</span><br><span class="line">Object.defineProperty(obj, &quot;_name&quot;, &#123;</span><br><span class="line">    configurable: false, </span><br><span class="line">    enumerable: false, </span><br><span class="line">    get: function reactiveGetter () &#123;</span><br><span class="line">        return mValue</span><br><span class="line">    &#125;,</span><br><span class="line">    set: function reactiveSetter (val) &#123;</span><br><span class="line">        mValue = val</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj._name = &quot;rose&quot;</span><br><span class="line"></span><br><span class="line">console.log(obj)</span><br></pre></td></tr></table></figure></p>
<p>到这里我们打印log，对象属性的set和get方法就出现了。<br><img src="http://upload-images.jianshu.io/upload_images/1987062-c11e06d42cf94a2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="打印结果"></p>
<h1 id="逻辑运算符的使用"><a href="#逻辑运算符的使用" class="headerlink" title="逻辑运算符的使用"></a>逻辑运算符的使用</h1><p>在源码中有很多<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_Operators" target="_blank" rel="noopener">逻辑运算符</a>的使用，有些运用的很巧妙。这里也科普下吧~</p>
<p>首先知道下可以转换成false的值，如下：</p>
<ul>
<li>null</li>
<li>NaN</li>
<li>0</li>
<li>空字符串（””）</li>
<li>undefined</li>
</ul>
<h3 id="用法一：判断条件返回true或者false"><a href="#用法一：判断条件返回true或者false" class="headerlink" title="用法一：判断条件返回true或者false"></a>用法一：判断条件返回true或者false</h3><p>这是最基本的用法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (a &amp; a.master &amp; a.master.name) &#123;&#125; // 如果这三个属性都为true值，执行if逻辑</span><br><span class="line">if (a || b) &#123;&#125; // 如果a或者b为true值，执行if逻辑。</span><br></pre></td></tr></table></figure></p>
<h3 id="用法二：判断并返回条件对象"><a href="#用法二：判断并返回条件对象" class="headerlink" title="用法二：判断并返回条件对象"></a>用法二：判断并返回条件对象</h3><ul>
<li><code>&amp;&amp;</code> 如果几个条件都为true，则返回最后一个条件。</li>
<li><code>||</code> 几个条件从前往后逐一判断，如果那个条件为true，返回该条件，否则返回最后一个条件。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var getter = property &amp;&amp; property.get;  // 如果两个属性都存在，将property.get赋值给getter</span><br><span class="line">e &amp;&amp; e.__ob__ &amp;&amp; e.__ob__.dep.depend(); // 如果三个属性都存在，执行第三条语句的方法</span><br><span class="line">var res = assets[id] || assets[camelizedId] || assets[PascalCaseId]; </span><br><span class="line">// 给res赋值，如果assets[id]为true，则将其传res；</span><br><span class="line">// 如果assets[camelizedId]为true，将其传给res；</span><br><span class="line">// 如果前两者都为false，将assets[PascalCaseId]传给res。</span><br><span class="line">var strat = strats[key] || defaultStrat;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>然后，我对各种情况做了试验得出以下结论：</p>
<ul>
<li><code>&amp;&amp;</code> 判断中，判断值都为 <code>true</code>，返回最后一个判断值；判断值中有 <code>false</code><br>值，返回第一个 <code>false</code> 值。</li>
<li><code>||</code> 判断中，判断值都为 <code>true</code>，返回第一个判断值；判断值中有 <code>true</code> 值也有 <code>false</code> 值，返回第一个为 <code>true</code> 的判断值；如果判断值都为 <code>false</code>，返回最后面的 <code>false</code> 值。</li>
</ul>
<p><strong>注意：</strong>这里所说的返回 <code>false</code> 值不一定是 Boolean 类型的 <code>false</code>，也可能是 <code>0、null</code> 等非值，详见上文。</p>
<h3 id="用法三：使用两个非"><a href="#用法三：使用两个非" class="headerlink" title="用法三：使用两个非"></a>用法三：使用两个非</h3><p>两个感叹号会确保参数为非值时只能为false，不会是0、空字符串、undefined等非值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (options) &#123;</span><br><span class="line">    this.deep = !!options.deep;</span><br><span class="line">    this.user = !!options.user;</span><br><span class="line">    this.lazy = !!options.lazy;</span><br><span class="line">    this.sync = !!options.sync;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    this.deep = this.user = this.lazy = this.sync = false;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="数组操作"><a href="#数组操作" class="headerlink" title="数组操作"></a>数组操作</h1><h3 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h3><p>先看一段代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a = [ &apos;jack&apos;, &apos;rose&apos;, &apos;wade&apos; ]</span><br><span class="line">var b = a</span><br><span class="line">b[1] = &apos;marry&apos;</span><br><span class="line">console.log(a)</span><br><span class="line">console.log(b)</span><br></pre></td></tr></table></figure></p>
<p>最后的结果是a和b的数组第二个值都变成了marry，原因就是b并不是获得了数组内容，而只是指向了a，a和b其实是一回事。如果我们需要复制，可以这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var b = a.slice()</span><br></pre></td></tr></table></figure></p>
<p>查阅<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">MDN</a>可知：</p>
<blockquote>
<p>slice() 方法返回一个从开始到结束（不包括结束）选择的数组的一部分浅拷贝到一个新数组对象，原始数组不会被修改。</p>
<h3 id="清空"><a href="#清空" class="headerlink" title="清空"></a>清空</h3><p>想要将非空数组的内容清空，最快捷的方式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.length = 0</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h3><p>直接引用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" target="_blank" rel="noopener">MDN</a>的例子。</p>
<blockquote>
<p>concat() 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr1 = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];</span><br><span class="line">var arr2 = [&apos;d&apos;, &apos;e&apos;, &apos;f&apos;];</span><br><span class="line"></span><br><span class="line">var arr3 = arr1.concat(arr2);</span><br><span class="line"></span><br><span class="line">// arr3 is a new array [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot; ]</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><p>呃，使用forEach方式来遍历数组是我刚知道的事 - -（之前都是用的for方法……），顺便记录下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.forEach(function(obj)&#123;</span><br><span class="line">    // 数组循环</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h1 id="几种特殊的写法"><a href="#几种特殊的写法" class="headerlink" title="几种特殊的写法"></a>几种特殊的写法</h1><p>在代码中有些代码片段有些看不懂，于是在SF上进行了提问：<a href="https://segmentfault.com/q/1010000012573448" target="_blank" rel="noopener">看Vue源码，有两段代码写法不知是何意思，求指教~</a>。感谢大家的帮助，这里总结下。<br>第一段是一段在{}里的代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    dataDef.set = function (newData) &#123;</span><br><span class="line">      warn(</span><br><span class="line">        &apos;Avoid replacing instance root $data. &apos; +</span><br><span class="line">        &apos;Use nested data properties instead.&apos;,</span><br><span class="line">        this</span><br><span class="line">      );</span><br><span class="line">    &#125;;</span><br><span class="line">    propsDef.set = function () &#123;</span><br><span class="line">      warn(&quot;$props is readonly.&quot;, this);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这段代码，有的朋友说是块级作用域、隔离作用域。不过另一种说法更可信。那就是我所看到的vue是编译完的的代码。源代码其实在大括号前是有条件的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (process.env.NODE_ENV !== &apos;production&apos;) &#123;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure></p>
<p>再来看下面的代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(function (global, factory) &#123;</span><br><span class="line">    typeof exports === &apos;object&apos; &amp;&amp; typeof module !== &apos;undefined&apos; ? module.exports = factory() :</span><br><span class="line">    typeof define === &apos;function&apos; &amp;&amp; define.amd ? define(factory) :</span><br><span class="line">    (global.Vue = factory());</span><br><span class="line">&#125;(this, (function () &#123; &apos;use strict&apos;;</span><br><span class="line"></span><br><span class="line">&#125;)))</span><br></pre></td></tr></table></figure></p>
<p>这段代码是Vue开头的一段代码，它有两个知识点。</p>
<ul>
<li>立即执行函数 —— 定义函数并立即执行，写法有 <code>(function(){})()</code> 或者 <code>(function(){}())</code> 的形式。</li>
<li>由于过去前端没有模块系统，使用script标签引入的js脚本共享同一个作用域，如果不把代码包起来，很容易产生作用域污染、变量冲突的问题。</li>
</ul>
<p><strong>PS：</strong>这两个问题真是网友的结论，不一定完善。有空我会查资料证实~</p>
<h1 id="其他知识点"><a href="#其他知识点" class="headerlink" title="其他知识点"></a>其他知识点</h1><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/arguments" target="_blank" rel="noopener">Arguments</a> —— 传给函数的参数数组</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new" target="_blank" rel="noopener">new运算符</a> —— 通过构造函数创建对象</li>
<li><code>&quot;development&quot; !== &#39;production’</code>的作用 —— webpack打包判断执行环境是不是生产环境，如果是生产环境会压缩并且没有提示警告之类的东西</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener"> instanceof</a> —— 验证实例对象是否为该构造函数new出来的。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" target="_blank" rel="noopener">in关键字</a> —— 判断某个值是否在数组或对象中。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">Proxy对象</a> —— 创建某个对象，并定义一些行为给该对象。</li>
<li>字符串的 <code>charAt</code> 是获取第几个字符，而 <code>slice</code> 方法是截取某段字符。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" target="_blank" rel="noopener">delete关键字</a> —— 用于删除对象中的某个关键字。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener">call()方法</a> —— 函数的调用，第一个参数为this，之后为函数定义参数。试验了下 <code>fun(a, b)</code> 和 <code>fun.call(this, a, b)</code> 两种写法效果一致。另外还可以看下 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener">apply()方法</a></li>
</ul>
<p><strong>PS：</strong>都是从MDN中找到的资料，多查MDN让我受益良多。</p>
<h1 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h1><p>还在学习Vue源码中……看了很多文章、也看了一遍源码。内容太多，千头万绪，容我理清之后，用自己的文字把Vue的源码学习记录分享出来。一些值得记录下来的知识点和心得会继续在本文中更新。<br>最后，想学习Vue源码的同学可以去买<a href="https://item.jd.com/12028224.html?dist=jd" target="_blank" rel="noopener">《Vue.js权威指南》</a>这本书，虽然许多章节内容和<a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">官网</a>是重复的，不过源码解析部分值得一看。我也正配合着这本书和源码在学习Vue。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2017/12/01/Vue源码学习笔记/" data-id="cjdtq38ds000gwfbtqujvgusb" class="article-share-link" data-share="baidu" data-title="Vue源码学习笔记">分享到</a>
      

      
        <a href="https://violetjack.github.io/2017/12/01/Vue源码学习笔记/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/06/Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记/" class="article-date">
  <time datetime="2017-06-05T16:00:00.000Z" itemprop="datePublished">2017-06-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/06/Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记/">Vue.js学习系列六——Vue单元测试Karma+Mocha学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>在使用vue-cli创建项目的时候，会提示要不要安装单元测试和e2e测试。既然官方推荐我们使用这两个测试框架，那么我们就动手去学习实践一下他们吧。</p>
</blockquote>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h3 id="Karma"><a href="#Karma" class="headerlink" title="Karma"></a>Karma</h3><p><strong>Karma</strong>是一个基于Node.js的JavaScript测试执行过程管理工具（Test Runner）。该工具在Vue中的主要作用是将项目运行在各种主流Web浏览器进行测试。<br>换句话说，它是一个测试工具，能让你的代码在浏览器环境下测试。需要它的原因在于，你的代码可能是设计在浏览器端执行的，在node环境下测试可能有些bug暴露不出来；另外，浏览器有兼容问题，karma提供了手段让你的代码自动在多个浏览器（chrome，firefox，ie等）环境下运行。如果你的代码只会运行在node端，那么你不需要用karma。</p>
<h3 id="Mocha"><a href="#Mocha" class="headerlink" title="Mocha"></a>Mocha</h3><p><strong>Mocha</strong>是一个测试框架，在vue-cli中配合<strong>chai断言库</strong>实现单元测试。<br>Mocha的常用命令和用法不算太多，看阮一峰老师的<a href="http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html" target="_blank" rel="noopener">测试框架 Mocha 实例教程</a>就可以大致了解了。<br>而Chai断言库可以看<a href="http://www.jianshu.com/p/f200a75a15d2" target="_blank" rel="noopener">Chai.js断言库API中文文档</a>，很简单，多查多用就能很快掌握。</p>
<h1 id="我对测试框架的理解"><a href="#我对测试框架的理解" class="headerlink" title="我对测试框架的理解"></a>我对测试框架的理解</h1><h3 id="npm-run-unit-执行过程"><a href="#npm-run-unit-执行过程" class="headerlink" title="npm run unit 执行过程"></a>npm run unit 执行过程</h3><ol>
<li>执行 <code>npm run unit</code> 命令</li>
<li>开启Karma运行环境</li>
<li>使用Mocha去逐个测试用Chai断言写的测试用例</li>
<li>在终端显示测试结果</li>
<li>如果测试成功，karma-coverage 会在 <code>./test/unit/coverage</code> 文件夹中生成测试覆盖率结果的网页。</li>
</ol>
<h3 id="Karma-1"><a href="#Karma-1" class="headerlink" title="Karma"></a>Karma</h3><p>对于Karma，我只是了解了一下它的<a href="http://karma-runner.github.io/1.0/config/configuration-file.html" target="_blank" rel="noopener">配置选项</a>。<br>下面是Vue的karma配置，简单注释了下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">var webpackConfig = require(&apos;../../build/webpack.test.conf&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = function (config) &#123;</span><br><span class="line">  config.set(&#123;</span><br><span class="line">    // 浏览器</span><br><span class="line">    browsers: [&apos;PhantomJS&apos;],</span><br><span class="line">    // 测试框架</span><br><span class="line">    frameworks: [&apos;mocha&apos;, &apos;sinon-chai&apos;, &apos;phantomjs-shim&apos;],</span><br><span class="line">    // 测试报告</span><br><span class="line">    reporters: [&apos;spec&apos;, &apos;coverage&apos;],</span><br><span class="line">    // 测试入口文件</span><br><span class="line">    files: [&apos;./index.js&apos;],</span><br><span class="line">    // 预处理器 karma-webpack</span><br><span class="line">    preprocessors: &#123;</span><br><span class="line">      &apos;./index.js&apos;: [&apos;webpack&apos;, &apos;sourcemap&apos;]</span><br><span class="line">    &#125;,</span><br><span class="line">    // Webpack配置</span><br><span class="line">    webpack: webpackConfig,</span><br><span class="line">    // Webpack中间件</span><br><span class="line">    webpackMiddleware: &#123;</span><br><span class="line">      noInfo: true</span><br><span class="line">    &#125;,</span><br><span class="line">    // 测试覆盖率报告</span><br><span class="line">    // https://github.com/karma-runner/karma-coverage/blob/master/docs/configuration.md</span><br><span class="line">    coverageReporter: &#123;</span><br><span class="line">      dir: &apos;./coverage&apos;,</span><br><span class="line">      reporters: [</span><br><span class="line">        &#123; type: &apos;lcov&apos;, subdir: &apos;.&apos; &#125;,</span><br><span class="line">        &#123; type: &apos;text-summary&apos; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Mocha和chai"><a href="#Mocha和chai" class="headerlink" title="Mocha和chai"></a>Mocha和chai</h3><p>我们看下官方的例子（都用注释来解释代码意思了）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos; // 导入Vue用于生成Vue实例</span><br><span class="line">import Hello from &apos;@/components/Hello&apos; // 导入组件</span><br><span class="line">// 测试脚本里面应该包括一个或多个describe块，称为测试套件（test suite）</span><br><span class="line">describe(&apos;Hello.vue&apos;, () =&gt; &#123;</span><br><span class="line">  // 每个describe块应该包括一个或多个it块，称为测试用例（test case）</span><br><span class="line">  it(&apos;should render correct contents&apos;, () =&gt; &#123;</span><br><span class="line">    const Constructor = Vue.extend(Hello) // 获得Hello组件实例</span><br><span class="line">    const vm = new Constructor().$mount() // 将组件挂在到DOM上</span><br><span class="line">    //断言：DOM中class为hello的元素中的h1元素的文本内容为Welcome to Your Vue.js App</span><br><span class="line">    expect(vm.$el.querySelector(&apos;.hello h1&apos;).textContent)</span><br><span class="line">      .to.equal(&apos;Welcome to Your Vue.js App&apos;)  </span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>需要知道的知识点：</strong></p>
<ul>
<li>测试脚本都要放在 <code>test/unit/specs/</code> 目录下。</li>
<li>脚本命名方式为  <code>[组件名].spec.js</code>。</li>
<li>所谓断言，就是对组件做一些操作，并预言产生的结果。如果测试结果与断言相同则测试通过。</li>
<li>单元测试默认测试 <code>src</code> 目录下除了 <code>main.js</code> 之外的所有文件，可在 <code>test/unit/index.js</code> 文件中修改。</li>
<li>Chai断言库中，<code>to be been is that which and has have with at of same</code> 这些语言链是没有意义的，只是便于理解而已。</li>
<li>测试脚本由多个  <code>descibe</code> 组成，每个 <code>describe</code> 由多个 <code>it</code> 组成。</li>
<li><p>了解异步测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">it(&apos;异步请求应该返回一个对象&apos;, done =&gt; &#123;</span><br><span class="line">    request</span><br><span class="line">    .get(&apos;https://api.github.com&apos;)</span><br><span class="line">    .end(function(err, res)&#123;</span><br><span class="line">      expect(res).to.be.an(&apos;object&apos;);</span><br><span class="line">      done();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>了解一下 <code>describe</code> 的钩子（生命周期）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">describe(&apos;hooks&apos;, function() &#123;</span><br><span class="line"></span><br><span class="line">  before(function() &#123;</span><br><span class="line">    // 在本区块的所有测试用例之前执行</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  after(function() &#123;</span><br><span class="line">    // 在本区块的所有测试用例之后执行</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  beforeEach(function() &#123;</span><br><span class="line">    // 在本区块的每个测试用例之前执行</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  afterEach(function() &#123;</span><br><span class="line">    // 在本区块的每个测试用例之后执行</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  // test cases</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h1><p>上面简单介绍了单元测试的用法，下面来动手在Vue中进行单元测试！</p>
<h3 id="util-js"><a href="#util-js" class="headerlink" title="util.js"></a>util.js</h3><p>从Vue官方的demo可以看出，对于Vue的单元测试我们需要将组件实例化为一个Vue实例，有时还需要挂载到DOM上。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const Constructor = Vue.extend(Hello) // 获得Hello组件实例</span><br><span class="line">const vm = new Constructor().$mount() // 将组件挂载到DOM上</span><br></pre></td></tr></table></figure></p>
<p>以上写法只是简单的获取组件，有时候我们需要传递props属性、自定义方法等，还有可能我们需要用到第三方UI框架。所以以上写法非常麻烦。<br>这里推荐Element的<a href="https://github.com/ElemeFE/element/blob/dev/test/unit/util.js" target="_blank" rel="noopener">单元测试工具脚本Util.js</a>，它封装了Vue单元测试中常用的方法。下面demo也是根据该 <code>Util.js</code>来写的。<br>这里简单注释了下各方法的用途。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 回收 vm，一般在每个测试脚本测试完成后执行回收vm。</span><br><span class="line"> * @param  &#123;Object&#125; vm</span><br><span class="line"> */</span><br><span class="line">exports.destroyVM = function (vm) &#123;&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 创建一个 Vue 的实例对象</span><br><span class="line"> * @param  &#123;Object|String&#125;  Compo     - 组件配置，可直接传 template</span><br><span class="line"> * @param  &#123;Boolean=false&#125;  mounted   - 是否添加到 DOM 上</span><br><span class="line"> * @return &#123;Object&#125; vm</span><br><span class="line"> */</span><br><span class="line">exports.createVue = function (Compo, mounted = false) &#123;&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 创建一个测试组件实例</span><br><span class="line"> * @param  &#123;Object&#125;  Compo          - 组件对象</span><br><span class="line"> * @param  &#123;Object&#125;  propsData      - props 数据</span><br><span class="line"> * @param  &#123;Boolean=false&#125; mounted  - 是否添加到 DOM 上</span><br><span class="line"> * @return &#123;Object&#125; vm</span><br><span class="line"> */</span><br><span class="line">exports.createTest = function (Compo, propsData = &#123;&#125;, mounted = false) &#123;&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 触发一个事件</span><br><span class="line"> * 注： 一般在触发事件后使用 vm.$nextTick 方法确定事件触发完成。</span><br><span class="line"> * mouseenter, mouseleave, mouseover, keyup, change, click 等</span><br><span class="line"> * @param  &#123;Element&#125; elm      - 元素</span><br><span class="line"> * @param  &#123;String&#125; name      - 事件名称</span><br><span class="line"> * @param  &#123;*&#125; opts           - 配置项</span><br><span class="line"> */</span><br><span class="line">exports.triggerEvent = function (elm, name, ...opts) &#123;&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 触发 “mouseup” 和 “mousedown” 事件，既触发点击事件。</span><br><span class="line"> * @param &#123;Element&#125; elm     - 元素</span><br><span class="line"> * @param &#123;*&#125; opts          - 配置选项</span><br><span class="line"> */</span><br><span class="line">exports.triggerClick = function (elm, ...opts) &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="示例一"><a href="#示例一" class="headerlink" title="示例一"></a>示例一</h3><p>示例一中我们测试了 <code>Hello</code> 组件的各种元素的数据，学习  <code>util.js</code> 的 <code>destroyVM</code> 和 <code>createTest</code> 方法的用法以及如何获取目标元素进行测试。获取DOM元素的方式可查看<a href="http://www.runoob.com/jsref/dom-obj-document.html" target="_blank" rel="noopener">DOM 对象</a>教程。<br><strong>Hello.vue</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1 class=&quot;hello-title&quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;h2 class=&quot;hello-content&quot;&gt;&#123;&#123; content &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;hello&apos;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    content: String</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &apos;Welcome!&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>Hello.spec.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &#123; destroyVM, createTest &#125; from &apos;../util&apos;</span><br><span class="line">import Hello from &apos;@/components/Hello&apos;</span><br><span class="line"></span><br><span class="line">describe(&apos;Hello.vue&apos;, () =&gt; &#123;</span><br><span class="line">  let vm</span><br><span class="line"></span><br><span class="line">  afterEach(() =&gt; &#123;</span><br><span class="line">    destroyVM(vm)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(&apos;测试获取元素内容&apos;, () =&gt; &#123;</span><br><span class="line">    vm = createTest(Hello, &#123; content: &apos;Hello World&apos; &#125;, true)</span><br><span class="line">    expect(vm.$el.querySelector(&apos;.hello h1&apos;).textContent).to.equal(&apos;Welcome!&apos;)</span><br><span class="line">    expect(vm.$el.querySelector(&apos;.hello h2&apos;).textContent).to.have.be.equal(&apos;Hello World&apos;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(&apos;测试获取Vue对象中数据&apos;, () =&gt; &#123;</span><br><span class="line">    vm = createTest(Hello, &#123; content: &apos;Hello World&apos; &#125;, true)</span><br><span class="line">    expect(vm.msg).to.equal(&apos;Welcome!&apos;)</span><br><span class="line">    // Chai的语言链是无意义的，可以随便写。如下：</span><br><span class="line">    expect(vm.content).which.have.to.be.that.equal(&apos;Hello World&apos;) </span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(&apos;测试获取DOM中是否存在某个class&apos;, () =&gt; &#123;</span><br><span class="line">    vm = createTest(Hello, &#123; content: &apos;Hello World&apos; &#125;, true)</span><br><span class="line">    expect(vm.$el.classList.contains(&apos;hello&apos;)).to.be.true</span><br><span class="line">    const title = vm.$el.querySelector(&apos;.hello h1&apos;)</span><br><span class="line">    expect(title.classList.contains(&apos;hello-title&apos;)).to.be.true</span><br><span class="line">    const content = vm.$el.querySelector(&apos;.hello-content&apos;)</span><br><span class="line">    expect(content.classList.contains(&apos;hello-content&apos;)).to.be.true</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>输出结果</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hello.vue</span><br><span class="line">  √ 测试获取元素内容</span><br><span class="line">  √ 测试获取Vue对象中数据</span><br><span class="line">  √ 测试获取DOM中是否存在某个class</span><br></pre></td></tr></table></figure></p>
<h3 id="示例二"><a href="#示例二" class="headerlink" title="示例二"></a>示例二</h3><p>示例二中我们使用 <code>createTest</code> 创建测试组件测试点击事件，用 <code>createVue</code> 创建Vue示例对象测试组件 <code>Click</code> 的使用。这里主要可以看下到 <code>createVue</code> 方法的使用。<br><strong>Click.vue</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;span class=&quot;init-num&quot;&gt;初始值为&#123;&#123; InitNum &#125;&#125;&lt;/span&gt;&lt;br&gt;</span><br><span class="line">    &lt;span class=&quot;click-num&quot;&gt;点击了&#123;&#123; ClickNum &#125;&#125;次&lt;/span&gt;&lt;br&gt;</span><br><span class="line">    &lt;span class=&quot;result-num&quot;&gt;最终结果为&#123;&#123; ResultNum &#125;&#125;&lt;/span&gt;&lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;累加&#123;&#123; AddNum &#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;Click&apos;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    AddNum: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 1</span><br><span class="line">    &#125;,</span><br><span class="line">    InitNum: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ClickNum: 0,</span><br><span class="line">      ResultNum: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    this.ResultNum = this.InitNum</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    add () &#123;</span><br><span class="line">      this.ResultNum += this.AddNum</span><br><span class="line">      this.ClickNum++</span><br><span class="line">      this.$emit(&apos;result&apos;, &#123;</span><br><span class="line">        ClickNum: this.ClickNum,</span><br><span class="line">        ResultNum: this.ResultNum</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>Click.spec.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">import &#123; destroyVM, createTest, createVue &#125; from &apos;../util&apos;</span><br><span class="line">import Click from &apos;@/components/Click&apos;</span><br><span class="line"></span><br><span class="line">describe(&apos;click.vue&apos;, () =&gt; &#123;</span><br><span class="line">  let vm</span><br><span class="line"></span><br><span class="line">  afterEach(() =&gt; &#123;</span><br><span class="line">    destroyVM(vm)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(&apos;测试按钮点击事件&apos;, () =&gt; &#123;</span><br><span class="line">    vm = createTest(Click, &#123;</span><br><span class="line">      AddNum: 10,</span><br><span class="line">      InitNum: 11</span><br><span class="line">    &#125;, true)</span><br><span class="line">    let buttonElm = vm.$el.querySelector(&apos;button&apos;)</span><br><span class="line">    buttonElm.click()</span><br><span class="line">    buttonElm.click()</span><br><span class="line">    buttonElm.click()</span><br><span class="line">    // setTimeout 的原因</span><br><span class="line">    // 在数据改变之后，界面的变化会有一定延时。不用timeout有时候会发现界面没有变化</span><br><span class="line">    setTimeout(done =&gt; &#123;</span><br><span class="line">      expect(vm.ResultNum).to.equal(41)</span><br><span class="line">      expect(vm.$el.querySelector(&apos;.init-num&apos;).textContent).to.equal(&apos;初始值为11&apos;)</span><br><span class="line">      expect(vm.$el.querySelector(&apos;.click-num&apos;).textContent).to.equal(&apos;点击了3次&apos;)</span><br><span class="line">      expect(vm.$el.querySelector(&apos;.result-num&apos;).textContent).to.equal(&apos;最终结果为41&apos;)</span><br><span class="line">      done()</span><br><span class="line">    &#125;, 100)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  it(&apos;测试创建Vue对象&apos;, () =&gt; &#123;</span><br><span class="line">    let result</span><br><span class="line">    vm = createVue(&#123;</span><br><span class="line">      template: `</span><br><span class="line">        &lt;click @click=&quot;handleClick&quot;&gt;&lt;/click&gt;</span><br><span class="line">      `,</span><br><span class="line">      props: &#123;</span><br><span class="line">        AddNum: 10,</span><br><span class="line">        InitNum: 11</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        handleClick (obj) &#123;</span><br><span class="line">          result = obj</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      components: &#123;</span><br><span class="line">        Click</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, true)</span><br><span class="line">    vm.$el.click()</span><br><span class="line">    vm.$nextTick(done =&gt; &#123;</span><br><span class="line">      expect(result).to.be.exist</span><br><span class="line">      expect(result.ClickNum).to.equal(1)</span><br><span class="line">      expect(result.ResultNum).to.be.equal(21)</span><br><span class="line">      done()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>输出结果</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">click.vue</span><br><span class="line">  √ 测试按钮点击事件</span><br><span class="line">  √ 测试创建Vue对象</span><br></pre></td></tr></table></figure></p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>所有示例代码都放<a href="https://github.com/violetjack/VueStudyDemos/tree/master/VueTestDemo" target="_blank" rel="noopener">Github仓库</a>中便于查看。如果想查看更多好的测试用例，建议配合 <code>Util.js</code> 看一下 <a href="https://github.com/ElemeFE/element/tree/dev/test/unit" target="_blank" rel="noopener">Element 的单元测试脚本的写法</a>，里面有很多测试脚本可以供我们学习。作为被广大Vue用户使用的UI组件库，测试脚本肯定也写很很不错的~甚至可以将这些脚本照抄一遍，相信这会对学习Vue组件的单元测试有很大帮助。</p>
<p>下面是本人看Element单元测试的笔记，供参考。</p>
<ul>
<li>Util.js 方法包含了大多数Vue组件化的测试需求。</li>
<li><code>vm.$el</code> <code>vm.$nextTick</code> 和 <code>vm.$ref</code> 都是在测试过程中比较常用的一些Vue语法糖。</li>
<li>需要注意： vm.$nextTick 方法是异步的，所以需要在里面使用done方法。</li>
<li>异步断言，方法参数需要是 <code>_</code> 或者 <code>done</code></li>
<li>大多数时候查询元素通过 <code>querySelector</code> 方法查询class获得<ul>
<li>vm.$el.querySelector(‘.el-breadcrumb’).innerText</li>
</ul>
</li>
<li>大多数情况下查询是否存在某个Class通过 <code>classList.contains</code> 方法获得，查找的结果为 true 或 false<ul>
<li>vm.$el .classList.contains(‘el-button–primary’)</li>
</ul>
</li>
<li>异步测试必须以 <code>done()</code> 方法结尾。<code>setTimeout</code> 和 <code>vm.$nextTick</code> 是常用的异步测试。</li>
<li>实现按钮点击：通过获取按钮元素 <code>btn</code>，执行 <code>btn.click()</code> 方法实现。</li>
<li>由于 Vue 进行 <a href="http://cn.vuejs.org/v2/guide/reactivity.html#Async-Update-Queue" target="_blank" rel="noopener">异步更新DOM</a> 的情况，一些依赖DOM更新结果的断言必须在 <code>Vue.nextTick</code> 回调中进行。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">triggerEvent(vm.$refs.cascader.$el, &apos;mouseenter&apos;);</span><br><span class="line">vm.$nextTick(_ =&gt; &#123;</span><br><span class="line">     vm.$refs.cascader.$el.querySelector(&apos;.el-cascader__clearIcon&apos;).click();</span><br><span class="line">     vm.$nextTick(_ =&gt; &#123;</span><br><span class="line">        expect(vm.selectedOptions.length).to.be.equal(0);</span><br><span class="line">        done();</span><br><span class="line">     &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a href="http://cn.vuejs.org/v2/guide/unit-testing.html" target="_blank" rel="noopener">单元测试</a></li>
<li><a href="http://www.jianshu.com/p/f200a75a15d2" target="_blank" rel="noopener">Chai.js断言库API中文文档</a></li>
<li><a href="https://github.com/ElemeFE/element/tree/dev/test/unit" target="_blank" rel="noopener">Element</a></li>
<li><a href="https://segmentfault.com/a/1190000006895064" target="_blank" rel="noopener">前端单元测试之Karma环境搭建</a></li>
<li><a href="https://segmentfault.com/q/1010000009527765" target="_blank" rel="noopener">前端自动化测试是干嘛的？</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html" target="_blank" rel="noopener">测试框架 Mocha 实例教程</a></li>
<li><a href="http://karma-runner.github.io/1.0/index.html" target="_blank" rel="noopener">Karma官网</a></li>
</ul>
<h1 id="Vue-js学习系列"><a href="#Vue-js学习系列" class="headerlink" title="Vue.js学习系列"></a>Vue.js学习系列</h1><p>鉴于前端知识碎片化严重，我希望能够系统化的整理出一套关于Vue的学习系列博客。</p>
<p><a href="http://www.jianshu.com/p/8013d8d37bd0" target="_blank" rel="noopener">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/d6f7e11f18af" target="_blank" rel="noopener">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/8e5fb763c3d7" target="_blank" rel="noopener">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a><br><a href="http://www.jianshu.com/p/aef34acd111f" target="_blank" rel="noopener">Vue.js学习系列四 —— Webpack打包工具的使用</a><br><a href="http://www.jianshu.com/p/efb6fbed6fac" target="_blank" rel="noopener">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a><br><a href="http://www.jianshu.com/p/073d25a3bba0" target="_blank" rel="noopener">Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记</a><br><a href="https://www.jianshu.com/p/ba7466d7101a" target="_blank" rel="noopener">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a><br><a href="https://www.jianshu.com/p/15028f91226e" target="_blank" rel="noopener">Vue.js学习系列八 —— Vue源码学习之State学习</a></p>
<h1 id="Vue-js学习系列项目地址"><a href="#Vue-js学习系列项目地址" class="headerlink" title="Vue.js学习系列项目地址"></a>Vue.js学习系列项目地址</h1><p>本文源码已收入到GitHub中，以供参考，当然能留下一个star更好啦^-^。<br><a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">https://github.com/violetjack/VueStudyDemos</a></p>
<h1 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h1><p>VioletJack，高效学习前端工程师，喜欢研究提高效率的方法，也专注于Vue前端相关知识的学习、整理。<br>欢迎关注、点赞、评论留言~我将持续产出Vue相关优质内容。</p>
<p>新浪微博： <a href="http://weibo.com/u/2640909603" target="_blank" rel="noopener">http://weibo.com/u/2640909603</a><br>掘金：<a href="https://gold.xitu.io/user/571d953d39b0570068145cd1" target="_blank" rel="noopener">https://gold.xitu.io/user/571d953d39b0570068145cd1</a><br>CSDN: <a href="http://blog.csdn.net/violetjack0808" target="_blank" rel="noopener">http://blog.csdn.net/violetjack0808</a><br>简书： <a href="http://www.jianshu.com/users/54ae4af3a98d/latest_articles" target="_blank" rel="noopener">http://www.jianshu.com/users/54ae4af3a98d/latest_articles</a><br>Github： <a href="https://github.com/violetjack" target="_blank" rel="noopener">https://github.com/violetjack</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2017/06/06/Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记/" data-id="cjdtq38dp000dwfbtk8onpk40" class="article-share-link" data-share="baidu" data-title="Vue.js学习系列六——Vue单元测试Karma+Mocha学习笔记">分享到</a>
      

      
        <a href="https://violetjack.github.io/2017/06/06/Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/19/Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint/" class="article-date">
  <time datetime="2017-05-18T16:00:00.000Z" itemprop="datePublished">2017-05-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/19/Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint/">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>最近在用vue-cli写项目的时候，经常和ESLint打交道，也算是不打不相识啦。下面总结一下在学习Vue的时候遇到的一些问题。</p>
</blockquote>
<h1 id="ESLint简介"><a href="#ESLint简介" class="headerlink" title="ESLint简介"></a>ESLint简介</h1><p>关于ESLint的介绍网上很多，这里就简单说些有用的。<br>ESLint的作用是检查代码错误和统一代码风格的。由于每个人写代码的习惯都会有所不同，所以统一代码风格在团队协作中尤为重要。</p>
<h1 id="vue-cli的eslint相关"><a href="#vue-cli的eslint相关" class="headerlink" title="vue-cli的eslint相关"></a>vue-cli的eslint相关</h1><p>vue-cli在init初始化时会询问是否需要添加ESLint，确认之后在创建的项目中就会出现<code>.eslintignore</code>和<code>.eslintrc.js</code>两个文件。<br><code>.eslintignore</code>类似Git的<code>.gitignore</code>用来忽略一些文件不使用ESLint检查。<br><code>.eslintrc.js</code>是ESLint配置文件，用来设置插件、自定义规则、解析器等配置。</p>
<p><strong>.eslintrc.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// http://eslint.org/docs/user-guide/configuring</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  root: true,</span><br><span class="line">  parser: &apos;babel-eslint&apos;,</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    sourceType: &apos;module&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  env: &#123;</span><br><span class="line">    browser: true,</span><br><span class="line">  &#125;,</span><br><span class="line">  // https://github.com/feross/standard/blob/master/RULES.md#javascript-standard-style</span><br><span class="line">  extends: &apos;standard&apos;,</span><br><span class="line">  // required to lint *.vue files</span><br><span class="line">  plugins: [</span><br><span class="line">    &apos;html&apos;</span><br><span class="line">  ],</span><br><span class="line">  // add your custom rules here</span><br><span class="line">  &apos;rules&apos;: &#123;</span><br><span class="line">    // allow paren-less arrow functions</span><br><span class="line">    &apos;arrow-parens&apos;: 0,</span><br><span class="line">    // allow async-await</span><br><span class="line">    &apos;generator-star-spacing&apos;: 0,</span><br><span class="line">    // allow debugger during development</span><br><span class="line">    &apos;no-debugger&apos;: process.env.NODE_ENV === &apos;production&apos; ? 2 : 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>解析器(parser)：</strong>使用了babel-eslint，这个可以在package.json中找到，说明我们已经安装过该解析器了。<br><strong>环境配置(env)：</strong>在浏览器中使用eslint。<br><strong>继承(extends)：</strong>该配置文件继承了<a href="https://github.com/feross/standard/blob/master/RULES.md#javascript-standard-style" target="_blank" rel="noopener">standard</a>规则，具体规则自己看文档，看不懂有<a href="https://github.com/feross/standard/blob/master/docs/RULES-zhcn.md" target="_blank" rel="noopener">中文版</a>的。<br><strong>规则(rules)：</strong>对于三个自定义规则，我特地查了官方文档。</p>
<blockquote>
<ul>
<li>arrow-parems 允许箭头函数参数使用括号,具体操作请看<a href="http://eslint.org/docs/rules/arrow-parens" target="_blank" rel="noopener">文档</a></li>
<li>generator-star-spacing 允许方法之间加星号，如<code>function * generator() {}</code>。<a href="http://eslint.org/docs/rules/generator-star-spacing" target="_blank" rel="noopener">文档</a>在此。特地查了下，发现这是ES6提供的<a href="https://imququ.com/post/generator-function-in-es6.html" target="_blank" rel="noopener">生成器函数</a>，回头学习下。</li>
<li>no-debugger’ 允许在开发环境下使用debugger。这个比较简单，不过还是贴下<a href="http://eslint.org/docs/rules/no-debugger" target="_blank" rel="noopener">文档</a>便于查看。</li>
</ul>
</blockquote>
<p><strong>注意：</strong>在<code>rules</code>中每个配置项后面第一个值是eslint规则的<strong>错误等级</strong>。</p>
<ul>
<li>“off” 或 0 - 关闭这条规则</li>
<li>“warn” 或 1 - 违反规则会警告（不会影响项目运行）</li>
<li>“error” 或 2 - 违反规则会报错（屏幕上一堆错误代码~）</li>
</ul>
<h1 id="遇到过的问题"><a href="#遇到过的问题" class="headerlink" title="遇到过的问题"></a>遇到过的问题</h1><p>由于一开始我不了解ESLint就写项目，不知道要看Standard的<a href="https://github.com/feross/standard/blob/master/docs/RULES-zhcn.md" target="_blank" rel="noopener">文档</a>，所以遇到了很多ESLint的错误和警告，分享下希望能对朋友们有帮助。</p>
<h3 id="1-Do-not-use-‘new’-for-side-effects"><a href="#1-Do-not-use-‘new’-for-side-effects" class="headerlink" title="1. Do not use ‘new’ for side effects"></a>1. Do not use ‘new’ for side effects</h3><p>该错误是由于我删除了<code>/* eslint-disable no-new*/</code>这段注释引发的，<code>/* eslint-disable */</code>这段注释的作用就是不让eslint检查注释下面的代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  router,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;,</span><br><span class="line">  components: &#123; App &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>错误原因：</strong>不可以直接new一个新对象，需要将新对象赋值给一个变量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue()</span><br></pre></td></tr></table></figure></p>
<h3 id="2-Strings-must-use-singlequote"><a href="#2-Strings-must-use-singlequote" class="headerlink" title="2. Strings must use singlequote"></a>2. Strings must use singlequote</h3><p><strong>错误原因：</strong>字符串必须用单引号<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">return &#123;</span><br><span class="line">      msg: &quot;Welcome to Your Vue.js App&quot;, //双引号，报错！</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-Expected-space-s-after-“return”"><a href="#3-Expected-space-s-after-“return”" class="headerlink" title="3. Expected space(s) after “return”"></a>3. Expected space(s) after “return”</h3><p><strong>错误原因：</strong>括号两侧必须要有空格隔开<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">return&#123;// 没有空格报错</span><br><span class="line">  msg: &apos;Welcome to Your Vue.js App&apos;, </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">startClock ()&#123;&#125; //)&#123;中间没有空格，报错！</span><br></pre></td></tr></table></figure></p>
<h3 id="4-Expected-indentation-of-8-spaces-but-found-6"><a href="#4-Expected-indentation-of-8-spaces-but-found-6" class="headerlink" title="4. Expected indentation of 8 spaces but found 6"></a>4. Expected indentation of 8 spaces but found 6</h3><p><strong>错误原因：</strong>使用两个空格进行缩进。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (this.IntervalID === &apos;&apos;) &#123;</span><br><span class="line">this.IntervalID = setInterval(this.countDown, 1000)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其实ESLint的报错并不难懂，只要理解错误原因还是很好解决的。如果提前看看文档，更不会出现太多报错问题了。这个故事告诉我们<strong>看文档是很重要滴~%&gt;_&lt;%</strong></p>
<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><p><strong>发现ESLint的报错都会在报错语句前面显示一个URL</strong>，点击进去可以看到详细的错误信息哦。这是我刚在写博客的时候发现的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://eslint.org/docs/rules/no-new  Do not use &apos;new&apos; for side effects  </span><br><span class="line">E:\Github\EfficiencyTools\EfficiencyTool-VueMobile\src\main.js:15:1</span><br><span class="line">new Vue(&#123;</span><br></pre></td></tr></table></figure></p>
<p>这里的 <a href="http://eslint.org/docs/rules/no-new" target="_blank" rel="noopener">http://eslint.org/docs/rules/no-new</a> 就是ESLint规则报错的原因，还是很人性化的。</p>
<h1 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h1><p>推荐使用VSCode来编辑代码。按照着<a href="https://github.com/varHarrie/Dawn-Blossoms/issues/10" target="_blank" rel="noopener">VSCode拓展插件推荐——提高Node和Vue开发效率</a>来安装和配置插件后，写vue项目方便了很多。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>其实vue-cli的ESLint不需要我们配置太多，基本的都配置好了，如果你愿意完全可以照着vue-cli提供的规则去写代码。当我们需要修改一些规则的时候添加到rules中替换原有规则就可以了。一开始用ESLint写代码很烦，经常由于一些格式问题调试报错，让回去改格式。不过慢慢的就会发现使用ESLint之后代码的确可读性、美观性上都好了很多。<br>推荐使用ESLint来规范代码编辑~</p>
<h1 id="Vue-js学习系列"><a href="#Vue-js学习系列" class="headerlink" title="Vue.js学习系列"></a>Vue.js学习系列</h1><p>鉴于前端知识碎片化严重，我希望能够系统化的整理出一套关于Vue的学习系列博客。</p>
<p><a href="http://www.jianshu.com/p/8013d8d37bd0" target="_blank" rel="noopener">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/d6f7e11f18af" target="_blank" rel="noopener">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/8e5fb763c3d7" target="_blank" rel="noopener">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a><br><a href="http://www.jianshu.com/p/aef34acd111f" target="_blank" rel="noopener">Vue.js学习系列四 —— Webpack打包工具的使用</a><br><a href="http://www.jianshu.com/p/efb6fbed6fac" target="_blank" rel="noopener">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a><br><a href="http://www.jianshu.com/p/073d25a3bba0" target="_blank" rel="noopener">Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记</a><br><a href="https://www.jianshu.com/p/ba7466d7101a" target="_blank" rel="noopener">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a><br><a href="https://www.jianshu.com/p/15028f91226e" target="_blank" rel="noopener">Vue.js学习系列八 —— Vue源码学习之State学习</a></p>
<h1 id="Vue-js学习系列项目地址"><a href="#Vue-js学习系列项目地址" class="headerlink" title="Vue.js学习系列项目地址"></a>Vue.js学习系列项目地址</h1><p>本文源码已收入到GitHub中，以供参考，当然能留下一个star更好啦^-^。<br><a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">https://github.com/violetjack/VueStudyDemos</a></p>
<h1 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h1><p>VioletJack，高效学习前端工程师，喜欢研究提高效率的方法，也专注于Vue前端相关知识的学习、整理。<br>欢迎关注、点赞、评论留言~我将持续产出Vue相关优质内容。</p>
<p>新浪微博： <a href="http://weibo.com/u/2640909603" target="_blank" rel="noopener">http://weibo.com/u/2640909603</a><br>掘金：<a href="https://gold.xitu.io/user/571d953d39b0570068145cd1" target="_blank" rel="noopener">https://gold.xitu.io/user/571d953d39b0570068145cd1</a><br>CSDN: <a href="http://blog.csdn.net/violetjack0808" target="_blank" rel="noopener">http://blog.csdn.net/violetjack0808</a><br>简书： <a href="http://www.jianshu.com/users/54ae4af3a98d/latest_articles" target="_blank" rel="noopener">http://www.jianshu.com/users/54ae4af3a98d/latest_articles</a><br>Github： <a href="https://github.com/violetjack" target="_blank" rel="noopener">https://github.com/violetjack</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2017/05/19/Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint/" data-id="cjdtq38cy0006wfbt10fp2xux" class="article-share-link" data-share="baidu" data-title="Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint">分享到</a>
      

      
        <a href="https://violetjack.github.io/2017/05/19/Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue.js学习系列四 —— Webpack学习实践" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/07/Vue.js学习系列四 —— Webpack学习实践/" class="article-date">
  <time datetime="2017-02-06T16:00:00.000Z" itemprop="datePublished">2017-02-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/07/Vue.js学习系列四 —— Webpack学习实践/">Vue.js学习系列四 —— Webpack学习实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>这两周一直想写webpack的知识点，却发现webpack其实要将webpack说的具体内容还是挺多的。而且稀土掘金上一搜webpack有好多人都有去写webpack的知识点，所以本文中不再去重复别人的东西了，就简单记录一下我对webpack的理解。并按照老规矩附上demo以及我收藏的几篇不错的webpack入门文章以供学习参考~</p>
</blockquote>
<h1 id="一、什么是webpack"><a href="#一、什么是webpack" class="headerlink" title="一、什么是webpack"></a>一、什么是webpack</h1><h2 id="1-webpack是什么？"><a href="#1-webpack是什么？" class="headerlink" title="1. webpack是什么？"></a>1. webpack是什么？</h2><p>webpack是一个模块打包工具。<br><strong>用vue项目来举例：</strong>浏览器它是只认识js，不认识vue的。而我们写的代码后缀大多是.vue的，在每个.vue文件中都可能html、js、css甚至是图片资源；并且由于组件化，这些.vue文件之间还有错综复杂的关系。所以项目要被浏览器识别，我们就要使用webpack将它们打包成js文件以及相应的资源文件。<br>或者这么理解，我们以vue项目的形式编写项目逻辑，浏览器以他理解的方式来运行项目。webpack把我们的vue项目想表达的所有意图传递给浏览器让浏览器去运行。<br><em>PS：webpack功能不止于此，但这个功能是让我们项目能跑起来的必要条件！（个人理解，如有错误，还请批评指正）</em></p>
<h2 id="2-来个demo理解下"><a href="#2-来个demo理解下" class="headerlink" title="2. 来个demo理解下"></a>2. 来个demo理解下</h2><p>这里我们来理解下webpack是如何打包的~（转译会在loaders中提到）。首先我们写两个最简单的js<br><strong>hello.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;hello~~&quot;)</span><br></pre></td></tr></table></figure></p>
<p><strong>app.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;hello app&quot;);</span><br><span class="line">require(&quot;./hello.js&quot;)</span><br></pre></td></tr></table></figure></p>
<p><code>app.js</code>中导入了<code>hello.js</code>，它们之间有导入关系。我们假如直接将<code>app.js</code>放到html中是会报错的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello app</span><br><span class="line">Uncaught ReferenceError: require is not defined at app.js:2</span><br></pre></td></tr></table></figure></p>
<p>如果我们要维持这种关系我们就必须使用打包工具进行打包。在命令行中输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 安装webpack</span><br><span class="line">$ npm install webpack -g</span><br><span class="line">// 打包app.js</span><br><span class="line">$ webpack app.js bundle.js</span><br></pre></td></tr></table></figure></p>
<p>然后我们会发现项目中多了一个bundle.js文件，我们在html中导入这个js文件。<br><strong>index.html</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;demo01&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;demo01&lt;/h1&gt;</span><br><span class="line">    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>最后输出正确结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello app</span><br><span class="line">hello~~</span><br></pre></td></tr></table></figure></p>
<h1 id="二、webpack-config-js"><a href="#二、webpack-config-js" class="headerlink" title="二、webpack.config.js"></a>二、webpack.config.js</h1><h2 id="1-定义"><a href="#1-定义" class="headerlink" title="1. 定义"></a>1. 定义</h2><p>webpack.config.js文件是webpack的默认配置文件。之前我们使用命令行<code>$ webpack entry.js output.js</code>来实现打包，其实webpack可以有更多的打包配置，这些配置都是在webpack.config.js中完成的。下面是一个简单的webpack.config.js。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&quot;webpack&quot;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    entry: &quot;./app/entry.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  output:</span><br><span class="line">  &#123;</span><br><span class="line">    path: __dirname + &quot;/dist&quot;,</span><br><span class="line">    filename: &apos;bundle.js&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  module: &#123;</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        loader: &apos;babel&apos;,</span><br><span class="line">        exclude: /node_modules/</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>个人觉得这三个东西是最最重要的了，所以必须单独说说这三个配置。其他配置都可以去查阅资料慢慢来。</p>
<h2 id="2-entry-amp-output"><a href="#2-entry-amp-output" class="headerlink" title="2. entry&amp;output"></a>2. entry&amp;output</h2><p>entry是配置webpack的入口文件，上面的代码中我们将app目录下的entry.js作为入口文件。webpack会将与entry.js有关的资源都进行打包。<br>output是出口文件，即打包好的文件的存放地址和文件名。</p>
<p>这里有几种文件的输入输出情况。引用自<a href="https://llp0574.github.io/2016/11/29/getting-started-with-webpack2/" target="_blank" rel="noopener">Webpack 2 入门教程</a>。</p>
<h3 id="2-1-单文件，单输出"><a href="#2-1-单文件，单输出" class="headerlink" title="2.1 单文件，单输出"></a>2.1 单文件，单输出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&quot;webpack&quot;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  context: __dirname + &quot;/src&quot;,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: &quot;./app.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: __dirname + &quot;/dist&quot;,</span><br><span class="line">    filename: &quot;[name].bundle.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-多文件，单输出"><a href="#2-2-多文件，单输出" class="headerlink" title="2.2 多文件，单输出"></a>2.2 多文件，单输出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&quot;webpack&quot;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  context: __dirname + &quot;/src&quot;,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: [&quot;./home.js&quot;, &quot;./events.js&quot;, &quot;./vendor.js&quot;],</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: __dirname + &quot;/dist&quot;,</span><br><span class="line">    filename: &quot;[name].bundle.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-多文件，多输出"><a href="#2-3-多文件，多输出" class="headerlink" title="2.3 多文件，多输出"></a>2.3 多文件，多输出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&quot;webpack&quot;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  context: __dirname + &quot;/src&quot;,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    home: &quot;./home.js&quot;,</span><br><span class="line">    events: &quot;./events.js&quot;,</span><br><span class="line">    contact: &quot;./contact.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: __dirname + &quot;/dist&quot;,</span><br><span class="line">    filename: &quot;[name].bundle.js&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>大家可以动手实践一下，很好理解。打包出来的单个或者多个文件直接可以在html中使用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;./dist/entry.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-loaders"><a href="#3-loaders" class="headerlink" title="3. loaders"></a>3. loaders</h2><p>loader是webpack的加载器，可以帮我们处理各种非js文件。如css样式，vue、jsx、weex等后缀的代码，JPG、PNG图片等。所以我们一般会在package.json中看到各种<em>*</em>-loader。这些就是各类资源的loader加载器。<br>在module的loaders数组中可以有多个对象，每个对象就是一个加载器。下面是babel-loader的最简单配置方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  loaders: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: /\.js$/,</span><br><span class="line">      loader: &apos;babel&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>对象中的test是正则表达式，用于搜索后缀为.js的文件。loader是所用加载器名称。</p>
<h2 id="4-使用babel来转译ES6代码"><a href="#4-使用babel来转译ES6代码" class="headerlink" title="4. 使用babel来转译ES6代码"></a>4. 使用babel来转译ES6代码</h2><p>下面我们来一步步使用babel-loader将ES6语法用于项目中。<br>webpack打包的文件默认是不支持ES6的，我们需要用babel转译。</p>
<h3 id="4-1-安装babel"><a href="#4-1-安装babel" class="headerlink" title="4.1 安装babel"></a>4.1 安装babel</h3><p>这个配置其实我是抄的vue-cli，个人对babel用法还不是很熟。<br>在package.json中添加依赖。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;babel-core&quot;: &quot;^6.22.1&quot;,</span><br><span class="line">  &quot;babel-loader&quot;: &quot;^6.2.10&quot;,</span><br><span class="line">  &quot;babel-plugin-transform-runtime&quot;: &quot;^6.22.0&quot;,</span><br><span class="line">  &quot;babel-preset-es2015&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;babel-preset-stage-2&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;babel-register&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;webpack&quot;: &quot;^1.14.0&quot;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>npm安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-在webpack-config-js中添加babel-loader的配置"><a href="#4-2-在webpack-config-js中添加babel-loader的配置" class="headerlink" title="4.2 在webpack.config.js中添加babel-loader的配置"></a>4.2 在webpack.config.js中添加babel-loader的配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  loaders: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: /\.js$/,</span><br><span class="line">      loader: &apos;babel&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-添加-babelrc"><a href="#4-3-添加-babelrc" class="headerlink" title="4.3 添加.babelrc"></a>4.3 添加.babelrc</h3><p>在项目根目录下添加.babelrc文件，文件内容为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [&quot;es2015&quot;, &quot;stage-2&quot;],</span><br><span class="line">  &quot;plugins&quot;: [&quot;transform-runtime&quot;],</span><br><span class="line">  &quot;comments&quot;: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="4-4-使用ES6"><a href="#4-4-使用ES6" class="headerlink" title="4.4 使用ES6"></a>4.4 使用ES6</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import good from &apos;./good.js&apos;</span><br></pre></td></tr></table></figure>
<h1 id="三、分析vue-cli"><a href="#三、分析vue-cli" class="headerlink" title="三、分析vue-cli"></a>三、分析vue-cli</h1><p>说了这么多，我的最终目的还是为了学习Vue.js。所以在对webpack有了一定的理解之后，就发现其实vue-cli并不是那么深不可测。</p>
<h2 id="1-结构分析"><a href="#1-结构分析" class="headerlink" title="1. 结构分析"></a>1. 结构分析</h2><ul>
<li>build —— 项目构建文件夹<ul>
<li>build.js —— 打包构建脚本（npm run build）</li>
<li>check-versions.js —— npm和node版本的查询</li>
<li>dev-client.js —— </li>
<li>dev-server.js —— 开发调试脚本（npm run dev）</li>
<li>utils.js —— 工具类</li>
<li>webpack.base.config.js —— Webpack配置文件</li>
<li>webpack.dev.config.js —— 开发版本Webpack配置文件，与webpack.base.config.js合并成完整的配置文件。</li>
<li>webpack.prod.config.js —— 生产版本Webpack配置文件，与webpack.base.config.js合并成完整的配置文件。</li>
</ul>
</li>
<li>config —— 配置文件夹，保存有各种配置参数（文件路径、服务器端口、功能开关）</li>
<li>src —— 代码文件夹</li>
<li>static<ul>
<li>.gitkeep —— 作用是将文件所在文件夹保留在git版本控制中。文件类型和.gitignore差不多。</li>
</ul>
</li>
<li>.babelrc —— babel配置文件</li>
<li>.editorconfig —— 编辑配置，确保使用各种编辑器时能有相同的编辑格式。</li>
<li>.gitignore —— git忽略文件</li>
<li>index.html —— 页面，最终显示在这个html中</li>
<li>package.json —— npm配置文件，包含了项目的信息、脚本、依赖库等重要信息。</li>
</ul>
<h2 id="2-创建简易cli"><a href="#2-创建简易cli" class="headerlink" title="2. 创建简易cli"></a>2. 创建简易cli</h2><p>理解完vue-cli的某些功能后，不难发现我们自己也可以搭建简易的vue-cli了。<br>官方的脚手架中除了有webpack打包，还包含了node脚本、开发和生产模式的切换、ESLint配置等功能。我们暂时不需要，将项目简化来更好的理解webpack。</p>
<h3 id="2-1-package-json"><a href="#2-1-package-json" class="headerlink" title="2.1 package.json"></a>2.1 package.json</h3><p>让我们来自己建立一个cli，首先创建一个空文件夹。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir demo05</span><br><span class="line">$ cd demo05</span><br></pre></td></tr></table></figure></p>
<p>初始化npm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init</span><br></pre></td></tr></table></figure></p>
<p>然后复制vue-cli中的依赖库到package.json中（直接复制啦，具体依赖库的作用就不提啦~之后会写博客补上的）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">  &quot;vue&quot;: &quot;^2.1.0&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">  &quot;autoprefixer&quot;: &quot;^6.4.0&quot;,</span><br><span class="line">  &quot;babel-core&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;babel-loader&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;babel-plugin-transform-runtime&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;babel-preset-es2015&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;babel-preset-stage-2&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;babel-register&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">  &quot;chalk&quot;: &quot;^1.1.3&quot;,</span><br><span class="line">  &quot;connect-history-api-fallback&quot;: &quot;^1.1.0&quot;,</span><br><span class="line">  &quot;css-loader&quot;: &quot;^0.25.0&quot;,</span><br><span class="line">  &quot;eventsource-polyfill&quot;: &quot;^0.9.6&quot;,</span><br><span class="line">  &quot;express&quot;: &quot;^4.13.3&quot;,</span><br><span class="line">  &quot;extract-text-webpack-plugin&quot;: &quot;^1.0.1&quot;,</span><br><span class="line">  &quot;file-loader&quot;: &quot;^0.9.0&quot;,</span><br><span class="line">  &quot;friendly-errors-webpack-plugin&quot;: &quot;^1.1.2&quot;,</span><br><span class="line">  &quot;function-bind&quot;: &quot;^1.0.2&quot;,</span><br><span class="line">  &quot;html-webpack-plugin&quot;: &quot;^2.8.1&quot;,</span><br><span class="line">  &quot;http-proxy-middleware&quot;: &quot;^0.17.2&quot;,</span><br><span class="line">  &quot;json-loader&quot;: &quot;^0.5.4&quot;,</span><br><span class="line">  &quot;semver&quot;: &quot;^5.3.0&quot;,</span><br><span class="line">  &quot;opn&quot;: &quot;^4.0.2&quot;,</span><br><span class="line">  &quot;ora&quot;: &quot;^0.3.0&quot;,</span><br><span class="line">  &quot;shelljs&quot;: &quot;^0.7.4&quot;,</span><br><span class="line">  &quot;url-loader&quot;: &quot;^0.5.7&quot;,</span><br><span class="line">  &quot;vue-loader&quot;: &quot;^10.0.0&quot;,</span><br><span class="line">  &quot;vue-style-loader&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">  &quot;vue-template-compiler&quot;: &quot;^2.1.0&quot;,</span><br><span class="line">  &quot;webpack&quot;: &quot;^1.13.2&quot;,</span><br><span class="line">  &quot;webpack-dev-middleware&quot;: &quot;^1.8.3&quot;,</span><br><span class="line">  &quot;webpack-hot-middleware&quot;: &quot;^2.12.2&quot;,</span><br><span class="line">  &quot;webpack-merge&quot;: &quot;^0.14.1&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<h3 id="2-2-webpack-config-js"><a href="#2-2-webpack-config-js" class="headerlink" title="2.2 webpack.config.js"></a>2.2 webpack.config.js</h3><p>这里的webpack配置文件中的部分内容是从官方的 <code>webpack.base.config.js</code> 中复制出来的。正如我项目结构中所说的，vue-cli中的 <code>webpack.base.config.js</code> 是基础的配置文件。vue-cli中的 <code>webpack.dev.config.js</code> 和 <code>webpack.prod.config.js</code> 分别代表了开发和生产版本的webpack配置文件，他们与 <code>webpack.base.config.js</code> 合并成最后的webpack配置文件。这里我们只要找到 <code>webpack.base.config.js</code> 即可。<br>下面是完整配置代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">var path = require(&quot;path&quot;)</span><br><span class="line">var projectRoot = path.resolve(__dirname, &apos;../&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  // 入口文件</span><br><span class="line">  entry: &quot;./src/main.js&quot;,</span><br><span class="line">  // 输出文件</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &quot;./dist/bundle.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 别名</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [&apos;&apos;, &apos;.js&apos;, &apos;.vue&apos;, &apos;.json&apos;],</span><br><span class="line">    fallback: [path.join(__dirname, &apos;../node_modules&apos;)],</span><br><span class="line">    alias: &#123;</span><br><span class="line">      &apos;vue$&apos;: &apos;vue/dist/vue.common.js&apos;,</span><br><span class="line">      &apos;src&apos;: path.resolve(__dirname, &apos;../src&apos;),</span><br><span class="line">      &apos;assets&apos;: path.resolve(__dirname, &apos;../src/assets&apos;),</span><br><span class="line">      &apos;components&apos;: path.resolve(__dirname, &apos;../src/components&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  module: &#123;</span><br><span class="line">    // 加载器</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.vue$/,</span><br><span class="line">        loader: &apos;vue&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        loader: &apos;babel&apos;,</span><br><span class="line">        exclude: /node_modules/</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.json$/,</span><br><span class="line">        loader: &apos;json&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,</span><br><span class="line">        loader: &apos;url&apos;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,</span><br><span class="line">        loader: &apos;url&apos;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-3-添加必要文件"><a href="#2-3-添加必要文件" class="headerlink" title="2.3 添加必要文件"></a>2.3 添加必要文件</h3><p>由于使用git、babel，所以我将vue-cli中的 <code>.gitignore</code> 和 <code>.babelrc</code> 直接复制过来。<br>还有，由于懒得写逻辑代码，这里我将 <code>src</code> 文件夹中所有内容也直接复制过来。<br>复制按成后进行webpack打包。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ webpack</span><br></pre></td></tr></table></figure></p>
<p>打包完成就会出现一个在 <code>dist</code> 目录下有一个 <code>bundle.js</code> 文件。有了打包文件，我们还需要创建一个 <code>index.html</code> 来显示效果，这个之后再说。<br>所以，最后的项目结构如下图</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1987062-b65832334ec76374.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="项目结构"></p>
<h3 id="2-4-index-html"><a href="#2-4-index-html" class="headerlink" title="2.4 index.html"></a>2.4 index.html</h3><p>现在，到了呈现效果的时候了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Demo3&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;./dist/bundle.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>很简单，创建一个id为app的div元素用于显示Vue组件内容，然后将打包好的bundle.js引用进去。<br>现在，到项目目录中找到 <code>index.html</code> 页面，浏览器打开就可以看到效果啦~</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1987062-9e3fd5985b12e67a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="效果图"></p>
<p><strong>注：</strong>简易cli项目的源码在 VueStudyDemos\WebpackDemos\demo5中</p>
<h1 id="四、相关资料推荐"><a href="#四、相关资料推荐" class="headerlink" title="四、相关资料推荐"></a>四、相关资料推荐</h1><p>这里推荐一下我学习webpack中发现的一些好的网站，分享一下。<br><a href="https://github.com/webpack-china/awesome-webpack-cn" target="_blank" rel="noopener">https://github.com/webpack-china/awesome-webpack-cn</a><br><a href="http://blog.guowenfh.com/2016/03/24/vue-webpack-01-base/" target="_blank" rel="noopener">http://blog.guowenfh.com/2016/03/24/vue-webpack-01-base/</a></p>
<h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1><p>拖了一个春节，终于把webpack的博客给写出来了。感觉在写完博客之后对webpack的理解深刻了许多，再次证明了“教是最好的学”这个理论。<br>新的一年，我要坚持好好写博客，享受分享带来的快乐。<br>之后计划学习一下eslint以及一些测试工具。然后试着用element和mint做两个小demo分享出来。然后了解一下node的相关知识。</p>
<h1 id="Vue-js学习系列"><a href="#Vue-js学习系列" class="headerlink" title="Vue.js学习系列"></a>Vue.js学习系列</h1><p>鉴于前端知识碎片化严重，我希望能够系统化的整理出一套关于Vue的学习系列博客。</p>
<p><a href="http://www.jianshu.com/p/8013d8d37bd0" target="_blank" rel="noopener">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/d6f7e11f18af" target="_blank" rel="noopener">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/8e5fb763c3d7" target="_blank" rel="noopener">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a><br><a href="http://www.jianshu.com/p/aef34acd111f" target="_blank" rel="noopener">Vue.js学习系列四 —— Webpack打包工具的使用</a><br><a href="http://www.jianshu.com/p/efb6fbed6fac" target="_blank" rel="noopener">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a><br><a href="http://www.jianshu.com/p/073d25a3bba0" target="_blank" rel="noopener">Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记</a><br><a href="https://www.jianshu.com/p/ba7466d7101a" target="_blank" rel="noopener">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a><br><a href="https://www.jianshu.com/p/15028f91226e" target="_blank" rel="noopener">Vue.js学习系列八 —— Vue源码学习之State学习</a></p>
<h1 id="Vue-js学习系列项目地址"><a href="#Vue-js学习系列项目地址" class="headerlink" title="Vue.js学习系列项目地址"></a>Vue.js学习系列项目地址</h1><p>本文源码已收入到GitHub中，以供参考，当然能留下一个star更好啦^-^。<br><a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">https://github.com/violetjack/VueStudyDemos</a></p>
<h1 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h1><p>VioletJack，高效学习前端工程师，喜欢研究提高效率的方法，也专注于Vue前端相关知识的学习、整理。<br>欢迎关注、点赞、评论留言~我将持续产出Vue相关优质内容。</p>
<p>新浪微博： <a href="http://weibo.com/u/2640909603" target="_blank" rel="noopener">http://weibo.com/u/2640909603</a><br>掘金：<a href="https://gold.xitu.io/user/571d953d39b0570068145cd1" target="_blank" rel="noopener">https://gold.xitu.io/user/571d953d39b0570068145cd1</a><br>CSDN: <a href="http://blog.csdn.net/violetjack0808" target="_blank" rel="noopener">http://blog.csdn.net/violetjack0808</a><br>简书： <a href="http://www.jianshu.com/users/54ae4af3a98d/latest_articles" target="_blank" rel="noopener">http://www.jianshu.com/users/54ae4af3a98d/latest_articles</a><br>Github： <a href="https://github.com/violetjack" target="_blank" rel="noopener">https://github.com/violetjack</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2017/02/07/Vue.js学习系列四 —— Webpack学习实践/" data-id="cjdtq38dr000fwfbty3qt8t3y" class="article-share-link" data-share="baidu" data-title="Vue.js学习系列四 —— Webpack学习实践">分享到</a>
      

      
        <a href="https://violetjack.github.io/2017/02/07/Vue.js学习系列四 —— Webpack学习实践/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue.js学习系列三 —— axios和网络传输相关知识的学习实践" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/09/Vue.js学习系列三 —— axios和网络传输相关知识的学习实践/" class="article-date">
  <time datetime="2017-01-08T16:00:00.000Z" itemprop="datePublished">2017-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/09/Vue.js学习系列三 —— axios和网络传输相关知识的学习实践/">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>在学习了之前的路由vue-router和状态管理vuex之后，就应该是网络交互了。就学习尤大推荐的axios了。刚好本人对网络请求这块除了会get、put、post和delete这四个方法之外知之甚少，刚好补全上。</p>
</blockquote>
<p><strong>注意：</strong>Vue官方推荐的网络通信库不再是vue-resource了，推荐使用<a href="https://github.com/mzabriskie/axios" target="_blank" rel="noopener">axios</a>。<br><img src="http://upload-images.jianshu.io/upload_images/1987062-b3255d564903d3d7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="尤大的公告"></p>
<h1 id="axios安装"><a href="#axios安装" class="headerlink" title="axios安装"></a>axios安装</h1><p>npm:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install axios</span><br></pre></td></tr></table></figure></p>
<p>bower:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bower install axios</span><br></pre></td></tr></table></figure></p>
<p>Using cdn:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="基本使用方法"><a href="#基本使用方法" class="headerlink" title="基本使用方法"></a>基本使用方法</h1><p><code>GET</code>请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// Make a request for a user with a given ID</span><br><span class="line">axios.get(&apos;/user?ID=12345&apos;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">// Optionally the request above could also be done as</span><br><span class="line">axios.get(&apos;/user&apos;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p><code>POST</code>请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&apos;/user&apos;, &#123;</span><br><span class="line">   firstName: &apos;Fred&apos;,</span><br><span class="line">   lastName: &apos;Flintstone&apos;</span><br><span class="line"> &#125;)</span><br><span class="line"> .then(function (response) &#123;</span><br><span class="line">   console.log(response);</span><br><span class="line"> &#125;)</span><br><span class="line"> .catch(function (error) &#123;</span><br><span class="line">   console.log(error);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure></p>
<p>同时执行多个请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get(&apos;/user/12345&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get(&apos;/user/12345/permissions&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    // Both requests are now complete</span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure></p>
<p>其实和其他的ajax库一样，基本用法都是差不多的。大家一看就知道怎么用。</p>
<h1 id="axios-API"><a href="#axios-API" class="headerlink" title="axios API"></a>axios API</h1><p>可以直接通过<code>config</code>来完成请求<br>axios(config)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">  method: &apos;post&apos;,</span><br><span class="line">  url: &apos;/user/12345&apos;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &apos;Fred&apos;,</span><br><span class="line">    lastName: &apos;Flintstone&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>axios(url, [config])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Send a GET request (default method)</span><br><span class="line">axios(&apos;/user/12345&apos;);</span><br></pre></td></tr></table></figure></p>
<h2 id="请求方法别名"><a href="#请求方法别名" class="headerlink" title="请求方法别名"></a>请求方法别名</h2><p>下面是axios支持的所有请求方法别名，便于各种请求。<br>注：<code>[...]</code>中的数据表示可以为空。<code>url</code>是ajax请求地址；<code>data</code>是提交的数据对象；<code>config</code>是配置对象，所有ajax配置都可以在<code>config</code>中实现。</p>
<ul>
<li>axios.request(config)</li>
<li>axios.get(url[, config])</li>
<li>axios.delete(url[, config])</li>
<li>axios.head(url[, config])</li>
<li>axios.post(url[, data[, config]])</li>
<li>axios.put(url[, data[, config]])</li>
<li>axios.patch(url[, data[, config]])</li>
</ul>
<h2 id="并发性"><a href="#并发性" class="headerlink" title="并发性"></a>并发性</h2><p>下列接口用于处理并发请求(同时处理多个多个request)</p>
<ul>
<li>axios.all(iterable)</li>
<li>axios.spread(callback)</li>
</ul>
<h2 id="axios实例"><a href="#axios实例" class="headerlink" title="axios实例"></a>axios实例</h2><p>可以用自定义的config创建一个axios实例<br>axios.create([config])<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var instance = axios.create(&#123;</span><br><span class="line">  baseURL: &apos;https://some-domain.com/api/&apos;,</span><br><span class="line">  timeout: 1000,</span><br><span class="line">  headers: &#123;&apos;X-Custom-Header&apos;: &apos;foobar&apos;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><p>下面是实例的所有可用方法，方法中的<code>config</code>会与axios实例中的config合并。（实例可以将一些通用的config先配置好）</p>
<ul>
<li>axios#request(config)</li>
<li>axios#get(url, [config])</li>
<li>axios#delete(url, [config])</li>
<li>axios#head(url, [config])</li>
<li>axios#post(url[, data[, config]])</li>
<li>axios#put(url[, data[, config]])</li>
<li>axios#patch(url[, data[, config]])</li>
</ul>
<h2 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h2><p>重点来了，来看看Config。<br>下面列出了config的所有配置项，其中之后<code>url</code>是必填的。当<code>method</code>没有指定方法，默认为<code>GET</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // `url` is the server URL that will be used for the request</span><br><span class="line">  // 用来向服务器发送请求的url</span><br><span class="line">  url: &apos;/user&apos;,</span><br><span class="line"></span><br><span class="line">  // `method` is the request method to be used when making the request</span><br><span class="line"> // 请求方法</span><br><span class="line">  method: &apos;get&apos;, // default</span><br><span class="line"></span><br><span class="line">  // `baseURL` will be prepended to `url` unless `url` is absolute.</span><br><span class="line">  // It can be convenient to set `baseURL` for an instance of axios to pass relative URLs</span><br><span class="line">  // to methods of that instance.</span><br><span class="line">  // 假如`url`不是绝对路径，那么向服务器发送请求的URL将是`baseURL + url`</span><br><span class="line">  baseURL: &apos;https://some-domain.com/api/&apos;,</span><br><span class="line"></span><br><span class="line">  // `transformRequest` allows changes to the request data before it is sent to the server</span><br><span class="line">  // This is only applicable for request methods &apos;PUT&apos;, &apos;POST&apos;, and &apos;PATCH&apos;</span><br><span class="line">  // The last function in the array must return a string, an ArrayBuffer, or a Stream</span><br><span class="line">  transformRequest: [function (data) &#123;</span><br><span class="line">    // Do whatever you want to transform the data</span><br><span class="line"></span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  // `transformResponse` allows changes to the response data to be made before</span><br><span class="line">  // it is passed to then/catch</span><br><span class="line">  transformResponse: [function (data) &#123;</span><br><span class="line">    // Do whatever you want to transform the data</span><br><span class="line"></span><br><span class="line">    return data;</span><br><span class="line">  &#125;],</span><br><span class="line"></span><br><span class="line">  // `headers` are custom headers to be sent</span><br><span class="line">  headers: &#123;&apos;X-Requested-With&apos;: &apos;XMLHttpRequest&apos;&#125;,</span><br><span class="line"></span><br><span class="line">  // `params` are the URL parameters to be sent with the request</span><br><span class="line">  // Must be a plain object or a URLSearchParams object</span><br><span class="line">  params: &#123;</span><br><span class="line">    ID: 12345</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `paramsSerializer` is an optional function in charge of serializing `params`</span><br><span class="line">  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span><br><span class="line">  paramsSerializer: function(params) &#123;</span><br><span class="line">    return Qs.stringify(params, &#123;arrayFormat: &apos;brackets&apos;&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `data` is the data to be sent as the request body</span><br><span class="line">  // Only applicable for request methods &apos;PUT&apos;, &apos;POST&apos;, and &apos;PATCH&apos;</span><br><span class="line">  // When no `transformRequest` is set, must be of one of the following types:</span><br><span class="line">  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span><br><span class="line">  // - Browser only: FormData, File, Blob</span><br><span class="line">  // - Node only: Stream</span><br><span class="line">  data: &#123;</span><br><span class="line">    firstName: &apos;Fred&apos;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `timeout` specifies the number of milliseconds before the request times out.</span><br><span class="line">  // If the request takes longer than `timeout`, the request will be aborted.</span><br><span class="line">  timeout: 1000,</span><br><span class="line"></span><br><span class="line">  // `withCredentials` indicates whether or not cross-site Access-Control requests</span><br><span class="line">  // should be made using credentials</span><br><span class="line">  withCredentials: false, // default</span><br><span class="line"></span><br><span class="line">  // `adapter` allows custom handling of requests which makes testing easier.</span><br><span class="line">  // Return a promise and supply a valid response (see [response docs](#response-api)).</span><br><span class="line">  adapter: function (config) &#123;</span><br><span class="line">    /* ... */</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `auth` indicates that HTTP Basic auth should be used, and supplies credentials.</span><br><span class="line">  // This will set an `Authorization` header, overwriting any existing</span><br><span class="line">  // `Authorization` custom headers you have set using `headers`.</span><br><span class="line">  auth: &#123;</span><br><span class="line">    username: &apos;janedoe&apos;,</span><br><span class="line">    password: &apos;s00pers3cret&apos;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `responseType` indicates the type of data that the server will respond with</span><br><span class="line">  // options are &apos;arraybuffer&apos;, &apos;blob&apos;, &apos;document&apos;, &apos;json&apos;, &apos;text&apos;, &apos;stream&apos;</span><br><span class="line">  responseType: &apos;json&apos;, // default</span><br><span class="line"></span><br><span class="line">  // `xsrfCookieName` is the name of the cookie to use as a value for xsrf token</span><br><span class="line">  xsrfCookieName: &apos;XSRF-TOKEN&apos;, // default</span><br><span class="line"></span><br><span class="line">  // `xsrfHeaderName` is the name of the http header that carries the xsrf token value</span><br><span class="line">  xsrfHeaderName: &apos;X-XSRF-TOKEN&apos;, // default</span><br><span class="line"></span><br><span class="line">  // `onUploadProgress` allows handling of progress events for uploads</span><br><span class="line">  onUploadProgress: function (progressEvent) &#123;</span><br><span class="line">    // Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `onDownloadProgress` allows handling of progress events for downloads</span><br><span class="line">  onDownloadProgress: function (progressEvent) &#123;</span><br><span class="line">    // Do whatever you want with the native progress event</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `maxContentLength` defines the max size of the http response content allowed</span><br><span class="line">  maxContentLength: 2000,</span><br><span class="line"></span><br><span class="line">  // `validateStatus` defines whether to resolve or reject the promise for a given</span><br><span class="line">  // HTTP response status code. If `validateStatus` returns `true` (or is set to `null`</span><br><span class="line">  // or `undefined`), the promise will be resolved; otherwise, the promise will be</span><br><span class="line">  // rejected.</span><br><span class="line">  validateStatus: function (status) &#123;</span><br><span class="line">    return status &gt;= 200 &amp;&amp; status &lt; 300; // default</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `maxRedirects` defines the maximum number of redirects to follow in node.js.</span><br><span class="line">  // If set to 0, no redirects will be followed.</span><br><span class="line">  maxRedirects: 5, // default</span><br><span class="line"></span><br><span class="line">  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http</span><br><span class="line">  // and https requests, respectively, in node.js. This allows to configure options like</span><br><span class="line">  // `keepAlive` that are not enabled by default.</span><br><span class="line">  httpAgent: new http.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line">  httpsAgent: new https.Agent(&#123; keepAlive: true &#125;),</span><br><span class="line"></span><br><span class="line">  // &apos;proxy&apos; defines the hostname and port of the proxy server</span><br><span class="line">  // `auth` indicates that HTTP Basic auth should be used to connect to the proxy, and supplies credentials.</span><br><span class="line">  // This will set an `Proxy-Authorization` header, overwriting any existing `Proxy-Authorization` custom headers you have set using `headers`.</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    host: &apos;127.0.0.1&apos;,</span><br><span class="line">    port: 9000,</span><br><span class="line">    auth: : &#123;</span><br><span class="line">      username: &apos;mikeymike&apos;,</span><br><span class="line">      password: &apos;rapunz3l&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // `cancelToken` specifies a cancel token that can be used to cancel the request</span><br><span class="line">  // (see Cancellation section below for details)</span><br><span class="line">  cancelToken: new CancelToken(function (cancel) &#123;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="分析Config"><a href="#分析Config" class="headerlink" title="分析Config"></a>分析Config</h2><p>配置参数很多，我们一个一个来了解它们</p>
<ul>
<li><strong>url</strong> —— 用来向服务器发送请求的url</li>
<li><strong>method</strong> —— 请求方法，默认是<code>GET</code>方法</li>
<li><strong>baseURL</strong> —— 基础URL路径，假如<code>url</code>不是绝对路径，如<code>https://some-domain.com/api/v1/login?name=jack</code>,那么向服务器发送请求的URL将会是<code>baseURL + url</code>。</li>
<li><strong>transformRequest</strong> —— <code>transformRequest</code>方法允许在请求发送到服务器之前修改该请求，此方法只适用于<code>PUT</code>、<code>POST</code>和<code>PATCH</code>方法中。而且，此方法最后必须返回一个string、ArrayBuffer或者Stream。</li>
<li><strong>transformResponse</strong> —— <code>transformResponse</code>方法允许在数据传递到then/catch之前修改<code>response</code>数据。此方法最后也要返回数据。</li>
<li><strong>headers</strong> —— 发送自定义Headers头文件，头文件中包含了http请求的各种信息。</li>
<li><strong>params</strong> —— <code>params</code>是发送请求的查询参数对象，对象中的数据会被拼接成<code>url?param1=value1&amp;param2=value2</code>。</li>
<li><strong>paramsSerializer</strong> —— <code>params</code>参数序列化器。</li>
<li><strong>data</strong> —— <code>data</code>是在发送<code>POST</code>、<code>PUT</code>或者<code>PATCH</code>请求的数据对象。</li>
<li><strong>timeout</strong> —— 请求超时设置，单位为毫秒</li>
<li><strong>withCredentials</strong> —— 表明是否有跨域请求需要用到证书</li>
<li><strong>adapter</strong> —— <code>adapter</code>允许用户处理更易于测试的请求。返回一个Promise和一个有效的response</li>
<li><strong>auth</strong> —— <code>auth</code>表明提供凭证用于完成http的身份验证。这将会在headers中设置一个<code>Authorization</code>授权信息。自定义<code>Authorization</code>授权要设置在<code>headers</code>中。</li>
<li><strong>responseType</strong> —— 表示服务器将返回响应的数据类型，有<code>arraybuffer</code>、<code>blob</code>、<code>document</code>、<code>json</code>、<code>text</code>、<code>stream</code>这6个类型，默认是<code>json</code>类似数据。</li>
<li><strong>xsrfCookieName</strong> —— 用作 xsrf token 值的 cookie 名称</li>
<li><strong>xsrfHeaderName</strong> —— 带有 xsrf token 值 http head 名称</li>
<li><strong>onUploadProgress</strong> ——  允许在上传过程中的做一些操作</li>
<li><strong>onDownloadProgress</strong> —— 允许在下载过程中的做一些操作</li>
<li><strong>maxContentLength</strong> —— 定义了接收到的response响应数据的最大长度。</li>
<li><strong>validateStatus</strong> —— <code>validateStatus</code>定义了根据HTTP响应状态码决定是否接收或拒绝获取到的promise。如果 <code>validateStatus</code> 返回 <code>true</code> (或设置为 <code>null</code> 或 <code>undefined</code> ),promise将被接收;否则,promise将被拒绝。</li>
<li><strong>maxRedirects</strong> —— <code>maxRedirects</code>定义了在node.js中redirect的最大值，如果设置为0，则没有redirect。</li>
<li><strong>httpAgent</strong> —— 定义在使用http请求时的代理</li>
<li><strong>httpsAgent</strong> —— 定义在使用https请求时的代理</li>
<li><strong>proxy</strong> —— <code>proxy</code>定义代理服务器的主机名和端口，<code>auth</code></li>
<li><strong>cancelToken</strong> —— <code>cancelToken</code>定义一个 <code>cancel token</code> 用于取消请求</li>
</ul>
<h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><p>当我们ajax获取数据成功后会返回一个response对象，它包含了以下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // `data` is the response that was provided by the server</span><br><span class="line">  data: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  // `status` is the HTTP status code from the server response</span><br><span class="line">  status: 200,</span><br><span class="line"></span><br><span class="line">  // `statusText` is the HTTP status message from the server response</span><br><span class="line">  statusText: &apos;OK&apos;,</span><br><span class="line"></span><br><span class="line">  // `headers` the headers that the server responded with</span><br><span class="line">  headers: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  // `config` is the config that was provided to `axios` for the request</span><br><span class="line">  config: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>response是通过promise的<code>then</code>方法来获取,具体使用方法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&apos;/user/12345&apos;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    console.log(response.data);</span><br><span class="line">    console.log(response.status);</span><br><span class="line">    console.log(response.statusText);</span><br><span class="line">    console.log(response.headers);</span><br><span class="line">    console.log(response.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>相对的，我们有时也会出现ajax报错，此时就会到我们的<code>catch</code>中去捕获异常<code>error</code>对象。</p>
<h1 id="为何放弃vue-resource"><a href="#为何放弃vue-resource" class="headerlink" title="为何放弃vue-resource"></a>为何放弃vue-resource</h1><p>尤大的原话：</p>
<blockquote>
<p>最近团队讨论了一下，Ajax 本身跟 Vue 并没有什么需要特别整合的地方，使用 fetch polyfill 或是 axios、superagent 等等都可以起到同等的效果，vue-resource 提供的价值和其维护成本相比并不划算，所以决定在不久以后取消对 vue-resource 的官方推荐。已有的用户可以继续使用，但以后不再把 vue-resource 作为官方的 ajax 方案。<br>知乎链接：<a href="https://www.zhihu.com/question/52418455/answer/130535375" target="_blank" rel="noopener">https://www.zhihu.com/question/52418455/answer/130535375</a></p>
</blockquote>
<h1 id="Vue-js学习系列"><a href="#Vue-js学习系列" class="headerlink" title="Vue.js学习系列"></a>Vue.js学习系列</h1><p>鉴于前端知识碎片化严重，我希望能够系统化的整理出一套关于Vue的学习系列博客。</p>
<p><a href="http://www.jianshu.com/p/8013d8d37bd0" target="_blank" rel="noopener">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/d6f7e11f18af" target="_blank" rel="noopener">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/8e5fb763c3d7" target="_blank" rel="noopener">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a><br><a href="http://www.jianshu.com/p/aef34acd111f" target="_blank" rel="noopener">Vue.js学习系列四 —— Webpack打包工具的使用</a><br><a href="http://www.jianshu.com/p/efb6fbed6fac" target="_blank" rel="noopener">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a><br><a href="http://www.jianshu.com/p/073d25a3bba0" target="_blank" rel="noopener">Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记</a><br><a href="https://www.jianshu.com/p/ba7466d7101a" target="_blank" rel="noopener">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a><br><a href="https://www.jianshu.com/p/15028f91226e" target="_blank" rel="noopener">Vue.js学习系列八 —— Vue源码学习之State学习</a></p>
<h1 id="Vue-js学习系列项目地址"><a href="#Vue-js学习系列项目地址" class="headerlink" title="Vue.js学习系列项目地址"></a>Vue.js学习系列项目地址</h1><p>本文源码已收入到GitHub中，以供参考，当然能留下一个star更好啦^-^。<br><a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">https://github.com/violetjack/VueStudyDemos</a></p>
<h1 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h1><p>VioletJack，高效学习前端工程师，喜欢研究提高效率的方法，也专注于Vue前端相关知识的学习、整理。<br>欢迎关注、点赞、评论留言~我将持续产出Vue相关优质内容。</p>
<p>新浪微博： <a href="http://weibo.com/u/2640909603" target="_blank" rel="noopener">http://weibo.com/u/2640909603</a><br>掘金：<a href="https://gold.xitu.io/user/571d953d39b0570068145cd1" target="_blank" rel="noopener">https://gold.xitu.io/user/571d953d39b0570068145cd1</a><br>CSDN: <a href="http://blog.csdn.net/violetjack0808" target="_blank" rel="noopener">http://blog.csdn.net/violetjack0808</a><br>简书： <a href="http://www.jianshu.com/users/54ae4af3a98d/latest_articles" target="_blank" rel="noopener">http://www.jianshu.com/users/54ae4af3a98d/latest_articles</a><br>Github： <a href="https://github.com/violetjack" target="_blank" rel="noopener">https://github.com/violetjack</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2017/01/09/Vue.js学习系列三 —— axios和网络传输相关知识的学习实践/" data-id="cjdtq38cw0004wfbtcpzz70dh" class="article-share-link" data-share="baidu" data-title="Vue.js学习系列三 —— axios和网络传输相关知识的学习实践">分享到</a>
      

      
        <a href="https://violetjack.github.io/2017/01/09/Vue.js学习系列三 —— axios和网络传输相关知识的学习实践/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/31/Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）/" class="article-date">
  <time datetime="2016-12-30T16:00:00.000Z" itemprop="datePublished">2016-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/31/Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）/">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>上次学习了vue-router的使用，让我能够在各个页面间切换，将页面搭建了起来。这次则要学习vue的状态管理模式——vuex。</p>
</blockquote>
<p><strong>注</strong>：本文只是个人对vuex学习的一些理解，要深刻掌握还需要认真查阅<a href="http://vuex.vuejs.org/zh-cn/" target="_blank" rel="noopener">官方文档</a>。</p>
<h1 id="一、基本介绍"><a href="#一、基本介绍" class="headerlink" title="一、基本介绍"></a>一、基本介绍</h1><p>Vuex 是一个专为 Vue.js 的SPA单页组件化应用程序开发的<strong>状态管理模式</strong>插件。<br>由于Vue SPA应用的模块化，每个组件都有它各自的数据(state)、界面(view)、和方法(actions)。这些数据、界面和方法分布在各个组件中，当项目内容变得越来越多时，每个组件中的状态会变得很难管理。这是vuex就派上用场啦~下面我们看一个简单的vuex例子。</p>
<h2 id="1-单个组件中的状态"><a href="#1-单个组件中的状态" class="headerlink" title="1. 单个组件中的状态"></a>1. 单个组件中的状态</h2><p>假如只是在单个组件中要改变界面view很简单，只需要改变state数据源即可。如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      view: &#123;&#123; count &#125;&#125;</span><br><span class="line">      &lt;button @click=&quot;increment&quot;&gt;increment&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  // state</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // actions</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment () &#123;</span><br><span class="line">      this.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>所以，单个组件中的原理图是这样的：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1987062-29836e1cb7325526.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="单个组件中的原理图"></p>
<h2 id="2-多个组件中的状态"><a href="#2-多个组件中的状态" class="headerlink" title="2. 多个组件中的状态"></a>2. 多个组件中的状态</h2><p>然而，我们作为组件化的SPA应用，必定会牵扯到多个组件间的通信。<br>比如有两个相同的组件A和B，它们共享一个数据count，并且都有一个方法可以操作这个count，我们使用vuex来写。<br><strong>A组件和B组件的代码（代码相同）</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; $store.state.count &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;increment&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">      increment () &#123;</span><br><span class="line">        this.$store.commit(&apos;increment&apos;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1987062-5971ec429e2ac23b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="结果1"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1987062-22872b0aa75b7f42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="结果2"></p>
<p>可以看到，这里的两个increment按钮点击都会同时改变两个count的数据，<strong>因为数据源count和方法increment都是全局的。</strong><br>正如下面官方原理图所画的，我们把<strong>全局数据源state、改变数据源的方法mutations、异步操作方法actions</strong>都放提取出来放到store中，实现全局数据状态单独管理的功能。<br><img src="http://upload-images.jianshu.io/upload_images/1987062-9867083201b0c86e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="vuex官方原理图"></p>
<h1 id="二、安装-amp-配置"><a href="#二、安装-amp-配置" class="headerlink" title="二、安装&amp;配置"></a>二、安装&amp;配置</h1><h2 id="1-安装vuex"><a href="#1-安装vuex" class="headerlink" title="1. 安装vuex"></a>1. 安装vuex</h2><p>使用npm安装并保存到package.json中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure></p>
<p><strong>package.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;vuex&quot;: &quot;^2.1.1&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<h2 id="2-配置"><a href="#2-配置" class="headerlink" title="2. 配置"></a>2. 配置</h2><p>配置方式和路由的配置方式差不多<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Vuex from &apos;vuex&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line">//创建Store实例</span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  // 存储状态值</span><br><span class="line">  state: &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  // 状态值的改变方法,操作状态值</span><br><span class="line">  // 提交mutations是更改Vuex状态的唯一方法</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  // 在store中定义getters（可以认为是store的计算属性）。Getters接收state作为其第一个函数</span><br><span class="line">  getters: &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123; </span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">// 要改变状态值只能通过提交mutations来完成</span><br><span class="line"></span><br><span class="line">/* eslint-disable no-new */</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  // 将store实例注入到根组件下的所有子组件中</span><br><span class="line">  store</span><br><span class="line">  // 子组件通过this.$store来方位store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h1 id="三、核心概念"><a href="#三、核心概念" class="headerlink" title="三、核心概念"></a>三、核心概念</h1><h2 id="1-state"><a href="#1-state" class="headerlink" title="1. state"></a>1. state</h2><p>state就是全局的状态（数据源），我们可以用以下方式在Vue 组件中获得Vuex的state状态<br><strong>template</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;&#123; $store.state.count &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>script</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(this.$store.state.count)</span><br></pre></td></tr></table></figure></p>
<h2 id="2-getters"><a href="#2-getters" class="headerlink" title="2. getters"></a>2. getters</h2><p>getters其实可以认为是 store 的计算属性，用法和计算属性差不多。<br>定义getter：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  done(state) &#123;</span><br><span class="line">    return state.count + 5;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用getter<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(this.$store.getters.done)</span><br></pre></td></tr></table></figure></p>
<h2 id="3-mutations"><a href="#3-mutations" class="headerlink" title="3. mutations"></a>3. mutations</h2><p>mutations是操作state的唯一方法，即只有mutations方法能够改变state状态值。</p>
<h3 id="3-1-基本操作"><a href="#3-1-基本操作" class="headerlink" title="3.1 基本操作"></a>3.1 基本操作</h3><p><strong>mutations对state的操作</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    count: 1</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      // 变更状态</span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>组件通过commit提交mutations的方式来请求改变state</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$store.commit(&apos;increment&apos;)</span><br></pre></td></tr></table></figure></p>
<p>这样的好处是我们可以跟踪到每一次state的变化，以便及时分析和解决问题。</p>
<h3 id="3-2-提交载荷（Payload）"><a href="#3-2-提交载荷（Payload）" class="headerlink" title="3.2 提交载荷（Payload）"></a>3.2 提交载荷（Payload）</h3><p>mutations方法中是可以传参的，具体用法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  // 提交载荷 Payload</span><br><span class="line">  add(state, n) &#123;</span><br><span class="line">    state.count += n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$store.commit(&apos;add&apos;, 10)</span><br></pre></td></tr></table></figure>
<p>这里只是传了一个数字，在大多数情况下，载荷应该是一个对象，这样可以包含多个字段并且记录的 mutation 会更易读。</p>
<h3 id="3-3-注意"><a href="#3-3-注意" class="headerlink" title="3.3 注意"></a>3.3 注意</h3><p><strong>mutations方法必须是同步方法！</strong></p>
<h2 id="4-actions"><a href="#4-actions" class="headerlink" title="4. actions"></a>4. actions</h2><h3 id="4-1-基本操作"><a href="#4-1-基本操作" class="headerlink" title="4.1 基本操作"></a>4.1 基本操作</h3><p>之前说mutations方法必须只能是同步方法，为了处理异步方法，actions出现了。关于action和mutations的区别有以下几点：</p>
<ul>
<li>Action 提交的是 mutation，而不是直接变更状态。</li>
<li>Action 可以包含任意异步操作。</li>
<li>Action 还是得通过 mutation 方法来修改state<br>同样是之前的increment方法,我们分别用同步和异步的action来验证上面所说的与mutations的不同之处：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  increment (context) &#123;</span><br><span class="line">    context.commit(&apos;increment&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  incrementAsync (context) &#123;</span><br><span class="line">    // 延时1秒  </span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      context.commit(&apos;increment&apos;)</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>不同于mutations使用commit方法，actions使用dispatch方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$store.dispatch(&apos;incrementAsync&apos;)</span><br></pre></td></tr></table></figure></p>
<h3 id="4-2-context"><a href="#4-2-context" class="headerlink" title="4.2 context"></a>4.2 context</h3><p><strong>context是与 store 实例具有相同方法和属性的对象。</strong>可以通过<code>context.state</code>和<code>context.getters</code>来获取 state 和 getters。</p>
<h3 id="4-3-以载荷形式分发"><a href="#4-3-以载荷形式分发" class="headerlink" title="4.3 以载荷形式分发"></a>4.3 以载荷形式分发</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">incrementAsyncWithValue (context, value) &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    context.commit(&apos;add&apos;, value)</span><br><span class="line">  &#125;, 1000)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$store.dispatch(&apos;incrementAsyncWithValue&apos;, 5)</span><br></pre></td></tr></table></figure>
<h2 id="5-module"><a href="#5-module" class="headerlink" title="5. module"></a>5. module</h2><p>使用单一状态树，导致应用的所有状态集中到一个很大的对象。但是，当应用变得很大时，store 对象会变得臃肿不堪。<br>为了解决以上问题，Vuex 允许我们将 store 分割到<strong>模块（module）</strong>。每个模块拥有自己的 state、mutation、action、getters、甚至是嵌套子模块——从上至下进行类似的分割：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const moduleA = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const moduleB = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a // -&gt; moduleA 的状态</span><br><span class="line">store.state.b // -&gt; moduleB 的状态</span><br></pre></td></tr></table></figure></p>
<p>module其实还是对于大型的SPA应用来说的，暂时对module的应用和理解并没有太多，之后会补上这一块儿的内容。<br>想要了解更多module知识，请查阅<a href="http://vuex.vuejs.org/zh-cn/modules.html" target="_blank" rel="noopener">官方module文档</a></p>
<h1 id="Vue-js学习系列"><a href="#Vue-js学习系列" class="headerlink" title="Vue.js学习系列"></a>Vue.js学习系列</h1><p>鉴于前端知识碎片化严重，我希望能够系统化的整理出一套关于Vue的学习系列博客。</p>
<p><a href="http://www.jianshu.com/p/8013d8d37bd0" target="_blank" rel="noopener">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/d6f7e11f18af" target="_blank" rel="noopener">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/8e5fb763c3d7" target="_blank" rel="noopener">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a><br><a href="http://www.jianshu.com/p/aef34acd111f" target="_blank" rel="noopener">Vue.js学习系列四 —— Webpack打包工具的使用</a><br><a href="http://www.jianshu.com/p/efb6fbed6fac" target="_blank" rel="noopener">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a><br><a href="http://www.jianshu.com/p/073d25a3bba0" target="_blank" rel="noopener">Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记</a><br><a href="https://www.jianshu.com/p/ba7466d7101a" target="_blank" rel="noopener">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a><br><a href="https://www.jianshu.com/p/15028f91226e" target="_blank" rel="noopener">Vue.js学习系列八 —— Vue源码学习之State学习</a></p>
<h1 id="Vue-js学习系列项目地址"><a href="#Vue-js学习系列项目地址" class="headerlink" title="Vue.js学习系列项目地址"></a>Vue.js学习系列项目地址</h1><p>本文源码已收入到GitHub中，以供参考，当然能留下一个star更好啦^-^。<br><a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">https://github.com/violetjack/VueStudyDemos</a></p>
<h1 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h1><p>VioletJack，高效学习前端工程师，喜欢研究提高效率的方法，也专注于Vue前端相关知识的学习、整理。<br>欢迎关注、点赞、评论留言~我将持续产出Vue相关优质内容。</p>
<p>新浪微博： <a href="http://weibo.com/u/2640909603" target="_blank" rel="noopener">http://weibo.com/u/2640909603</a><br>掘金：<a href="https://gold.xitu.io/user/571d953d39b0570068145cd1" target="_blank" rel="noopener">https://gold.xitu.io/user/571d953d39b0570068145cd1</a><br>CSDN: <a href="http://blog.csdn.net/violetjack0808" target="_blank" rel="noopener">http://blog.csdn.net/violetjack0808</a><br>简书： <a href="http://www.jianshu.com/users/54ae4af3a98d/latest_articles" target="_blank" rel="noopener">http://www.jianshu.com/users/54ae4af3a98d/latest_articles</a><br>Github： <a href="https://github.com/violetjack" target="_blank" rel="noopener">https://github.com/violetjack</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2016/12/31/Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）/" data-id="cjdtq38cx0005wfbtlyz0730l" class="article-share-link" data-share="baidu" data-title="Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）">分享到</a>
      

      
        <a href="https://violetjack.github.io/2016/12/31/Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-巧用jQuery选择器写表单办法总结（提高效率）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/31/巧用jQuery选择器写表单办法总结（提高效率）/" class="article-date">
  <time datetime="2016-12-30T16:00:00.000Z" itemprop="datePublished">2016-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/31/巧用jQuery选择器写表单办法总结（提高效率）/">巧用jQuery选择器写表单办法总结（提高效率）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>相信很多小伙伴都会遇到需要做表单的需求，就像我现在做的医院项目，茫茫多的表单无穷无尽。一开始做表单使用最笨的方法：一个个span去定义ID，每个数据都用ajax获取后赋值显示，然后在表单提交前一个个用jQuery根据ID获取元素的value，组成一个model来提交给服务器。<br>后来发现使用jQuery可以大大简化这个过程。于是我修改了工作方法，总结了我的一些提高写表单效率的方法。</p>
</blockquote>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>表单中存在最多的无非就是文本、文本框、单选框、多选框。而一些表单中会有几十个甚至几百个选项。我们的目标就是以最高的效率来完成这些表单的数据获取和数据提交。<br><strong>注意：如果元素ID和服务器上获取的json字段的名字是一样的，那么这篇文章或许能对你提高工作效率有所帮助。</strong></p>
<h2 id="文本和文本框"><a href="#文本和文本框" class="headerlink" title="文本和文本框"></a>文本和文本框</h2><p>对于文本和文本框，我们通常需要为元素添加ID来绑定和获取数据。</p>
<h3 id="将数据显示到界面中"><a href="#将数据显示到界面中" class="headerlink" title="将数据显示到界面中"></a>将数据显示到界面中</h3><ul>
<li>用for循环遍历解析成功的JSON数据</li>
<li>通过if判断过滤数据是span的还是input的。</li>
<li>将数据传给和数据名同名的ID元素。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for (var key in json) &#123;</span><br><span class="line">   //过滤type为text的文本框</span><br><span class="line">   if ($(&apos;#&apos; + key).attr(&apos;type&apos;) == &apos;text&apos;) &#123;</span><br><span class="line">       $(&apos;#&apos; + key).val(json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">   if($(&apos;#&apos; + key).prop(&apos;tagName&apos;) == &apos;SPAN&apos;)&#123;</span><br><span class="line">       $(&apos;#&apos; + key).text(json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="快速获取数据对象用于提交服务器"><a href="#快速获取数据对象用于提交服务器" class="headerlink" title="快速获取数据对象用于提交服务器"></a>快速获取数据对象用于提交服务器</h3><ul>
<li>定义空model对象。</li>
<li>通过jQuery选择器获取目标元素的value。</li>
<li>将数据传入model中，对象元素的字段就是HTML元素的ID。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var model = &#123;&#125;;</span><br><span class="line">$(&apos;input[type=&quot;text&quot;]&apos;).each(function () &#123;</span><br><span class="line">   model[$(this).attr(&apos;id&apos;)]=$(this).val();</span><br><span class="line">&#125;);</span><br><span class="line">$(&apos;span&apos;).each(function () &#123;</span><br><span class="line">   model[$(this).attr(&apos;id&apos;)]=$(this).text();</span><br><span class="line">&#125;);</span><br><span class="line">console.log(model);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>按照如下方法，我们只需要照着后端提供的数据字段给HTML定义id，而JS就不需要写太多代码就可以完成表单了。再也不怕表单字段太多了。</p>
<h3 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码"></a>全部代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;jquery-2.2.3.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;姓名：&lt;input type=&quot;text&quot; id=&quot;name&quot;&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;性别：&lt;input type=&quot;text&quot; id=&quot;sex&quot;&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;年龄：&lt;input type=&quot;text&quot; id=&quot;age&quot;&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;时间：&lt;input type=&quot;text&quot; id=&quot;time&quot;&gt;&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;a：&lt;span id=&quot;param01&quot;&gt;1&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;b：&lt;span id=&quot;param02&quot;&gt;2&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;c：&lt;span id=&quot;param03&quot;&gt;3&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;d：&lt;span id=&quot;param04&quot;&gt;4&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button onclick=&quot;showResult()&quot;&gt;显示结果&lt;/button&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //多条input或者span的快速赋值</span><br><span class="line">        //data是模拟服务器返回的JSON数据</span><br><span class="line">        var data = &apos;&#123;&quot;name&quot;:&quot;张三&quot;,&quot;sex&quot;:&quot;女&quot;,&quot;age&quot;:22,&quot;time&quot;:&quot;2016-5-10&quot;,&quot;param01&quot;:111,&quot;param02&quot;:222,&quot;param03&quot;:333,&quot;param04&quot;:444&#125;&apos;;</span><br><span class="line">        //将数据显示到页面中</span><br><span class="line">        var json = eval(&apos;(&apos; + data + &apos;)&apos;);</span><br><span class="line">        for (var key in json) &#123;</span><br><span class="line">            if ($(&apos;#&apos; + key).attr(&apos;type&apos;) == &apos;text&apos;) &#123;</span><br><span class="line">                $(&apos;#&apos; + key).val(json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">            if($(&apos;#&apos; + key).prop(&apos;tagName&apos;) == &apos;SPAN&apos;)&#123;</span><br><span class="line">                $(&apos;#&apos; + key).text(json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//获取文本和文本框的内容转为JSON对象</span><br><span class="line">        function showResult() &#123;</span><br><span class="line">            var model = &#123;&#125;;</span><br><span class="line">            $(&apos;input[type=&quot;text&quot;]&apos;).each(function () &#123;</span><br><span class="line">                model[$(this).attr(&apos;id&apos;)]=$(this).val();</span><br><span class="line">            &#125;);</span><br><span class="line">            $(&apos;span&apos;).each(function () &#123;</span><br><span class="line">                model[$(this).attr(&apos;id&apos;)]=$(this).text();</span><br><span class="line">            &#125;);</span><br><span class="line">            console.log(model);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Radio和Checkbox"><a href="#Radio和Checkbox" class="headerlink" title="Radio和Checkbox"></a>Radio和Checkbox</h2><p>另外一种经常出现于表单中的就是radio、checkbox这些单选多选的元素了。这些元素通常用name命名一组选项。下面我同样用jQuery简化数据的显示和提交。</p>
<h3 id="显示数据"><a href="#显示数据" class="headerlink" title="显示数据"></a>显示数据</h3><p>和之前的文本一样，用for循环遍历json数据，然后通过if过滤后显示到界面。不同之处是这边是通过name来显示和绑定数据的。<br><strong>注：对radio和checkbox处理的方法写在了后面，所以复制粘贴的同学们请注意别漏了~</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(var key in json)&#123;</span><br><span class="line">   if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;radio&apos;) &#123;</span><br><span class="line">      showRadioValue(key, json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">   if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;checkbox&apos;) &#123;</span><br><span class="line">     showCheckBoxValue(key, json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="获取数据model的方法"><a href="#获取数据model的方法" class="headerlink" title="获取数据model的方法"></a>获取数据model的方法</h3><ul>
<li>定义空model对象。</li>
<li>定义name避免重复添加。</li>
<li>遍历所有radio获取结果传给model</li>
<li>遍历所有checkbox获取结果传给model</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function showResult() &#123;</span><br><span class="line">    var model = &#123;&#125;;</span><br><span class="line">    var radioName = &apos;&apos;;</span><br><span class="line">    var checkboxName = &apos;&apos;;</span><br><span class="line">    $(&quot;input[type=&apos;radio&apos;]&quot;).each(function () &#123;</span><br><span class="line">        if($(this).attr(&apos;name&apos;) != radioName)&#123;</span><br><span class="line">            radioName = $(this).attr(&apos;name&apos;);</span><br><span class="line">            model[radioName] = getRadioValue(radioName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(&quot;input[type=&apos;checkbox&apos;]&quot;).each(function () &#123;</span><br><span class="line">        if($(this).attr(&apos;name&apos;) != checkboxName)&#123;</span><br><span class="line">            checkboxName = $(this).attr(&apos;name&apos;);</span><br><span class="line">            model[checkboxName] = getCheckboxValue(checkboxName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    console.log(model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="处理radio和checkbox的一些方法"><a href="#处理radio和checkbox的一些方法" class="headerlink" title="处理radio和checkbox的一些方法"></a>处理radio和checkbox的一些方法</h3><p>这里我对radio和checkbox的显示和获取结果写了几个方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">function showRadioValue(name, value) &#123;</span><br><span class="line">    $(&apos;input[name=&apos; + name +  &apos;]&apos;).each(function () &#123;</span><br><span class="line">        if(value == $(this).val())&#123;</span><br><span class="line">            $(this).attr(&apos;checked&apos;, &apos;true&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getRadioValue(name) &#123;</span><br><span class="line">    var value = 0;</span><br><span class="line">    var i = 0;</span><br><span class="line">    $(&apos;input[name=&apos; + name + &apos;]&apos; ).each(function () &#123;</span><br><span class="line">        if ($(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).is( &apos;:checked&apos;)) &#123;</span><br><span class="line">            value = $(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).val();</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;);</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function showCheckBoxValue (name, value) &#123;</span><br><span class="line">    var values = value.split(&apos;,&apos; );</span><br><span class="line">    var row = 1;</span><br><span class="line">    $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">        if (values[row] == 1) &#123;</span><br><span class="line">            $(this).attr(&quot;checked&quot; , &apos;true&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">        row++;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getCheckboxValue (name) &#123;</span><br><span class="line">    var text = &quot;&quot; ;</span><br><span class="line">    $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">        var t = &apos;&apos; ;</span><br><span class="line">        if ($(this ).is(&apos;:checked&apos;)) &#123;</span><br><span class="line">            t = &quot;1&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            t = &quot;0&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        text += &quot;,&quot; + t;</span><br><span class="line">    &#125;);</span><br><span class="line">    return text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;jquery-2.2.3.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param01&quot; value=&quot;1&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param01&quot; value=&quot;2&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param01&quot; value=&quot;3&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param02&quot; value=&quot;1&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param02&quot; value=&quot;2&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param02&quot; value=&quot;3&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param03&quot; value=&quot;1&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param03&quot; value=&quot;2&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param03&quot; value=&quot;3&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;3&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;3&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;button onclick=&quot;showResult()&quot;&gt;显示结果&lt;/button&gt;</span><br><span class="line">        &lt;label id=&quot;result&quot;&gt;result&lt;/label&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //多条radio或者checkbox的快速赋值</span><br><span class="line">        var data = &apos;&#123;&quot;param01&quot;:&quot;1&quot;,&quot;param02&quot;:&quot;3&quot;,&quot;param03&quot;:&quot;2&quot;,&quot;param04&quot;:&quot;,1,0,0,0&quot;,&quot;param05&quot;:&quot;,0,0,1,1&quot;&#125;&apos;;</span><br><span class="line">        var json =eval( &apos;(&apos; + data + &apos;)&apos;);</span><br><span class="line">        for(var key in json)&#123;</span><br><span class="line">            if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;radio&apos;) &#123;</span><br><span class="line">                showRadioValue(key, json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">            if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;checkbox&apos;) &#123;</span><br><span class="line">                showCheckBoxValue(key, json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function showRadioValue(name, value) &#123;</span><br><span class="line">            $(&apos;input[name=&apos; + name +  &apos;]&apos;).each(function () &#123;</span><br><span class="line">                if(value == $(this).val())&#123;</span><br><span class="line">                    $(this).attr(&apos;checked&apos;, &apos;true&apos;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function getRadioValue(name) &#123;</span><br><span class="line">            var value = 0;</span><br><span class="line">            var i = 0;</span><br><span class="line">            $(&apos;input[name=&apos; + name + &apos;]&apos; ).each(function () &#123;</span><br><span class="line">                if ($(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).is( &apos;:checked&apos;)) &#123;</span><br><span class="line">                    value = $(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).val();</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;);</span><br><span class="line">            return value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function showCheckBoxValue (name, value) &#123;</span><br><span class="line">            var values = value.split(&apos;,&apos; );</span><br><span class="line">            var row = 1;</span><br><span class="line">            $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">                if (values[row] == 1) &#123;</span><br><span class="line">                    $(this).attr(&quot;checked&quot; , &apos;true&apos;);</span><br><span class="line">                &#125;</span><br><span class="line">                row++;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function getCheckboxValue (name) &#123;</span><br><span class="line">            var text = &quot;&quot; ;</span><br><span class="line">            $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">                var t = &apos;&apos; ;</span><br><span class="line">                if ($(this ).is(&apos;:checked&apos;)) &#123;</span><br><span class="line">                    t = &quot;1&quot;;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    t = &quot;0&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">                text += &quot;,&quot; + t;</span><br><span class="line">            &#125;);</span><br><span class="line">            return text;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function showResult() &#123;</span><br><span class="line">            var model = &#123;&#125;;</span><br><span class="line">            var radioName = &apos;&apos;;</span><br><span class="line">            var checkboxName = &apos;&apos;;</span><br><span class="line">            $(&quot;input[type=&apos;radio&apos;]&quot;).each(function () &#123;</span><br><span class="line">                if($(this).attr(&apos;name&apos;) != radioName)&#123;</span><br><span class="line">                    radioName = $(this).attr(&apos;name&apos;);</span><br><span class="line">                    model[radioName] = getRadioValue(radioName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            $(&quot;input[type=&apos;checkbox&apos;]&quot;).each(function () &#123;</span><br><span class="line">                if($(this).attr(&apos;name&apos;) != checkboxName)&#123;</span><br><span class="line">                    checkboxName = $(this).attr(&apos;name&apos;);</span><br><span class="line">                    model[checkboxName] = getCheckboxValue(checkboxName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            console.log(model);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>如果有一些特殊处理的内容（如时间格式文本），可以先遍历后在遍历之后单独进行赋值。</li>
<li>以上方法可以用于所有以ID定义的用于显示和获取数据的HTML元素。</li>
<li>用好jQuery的选择器可以获取到任何所需的元素、元素集合。</li>
<li>在each()方法中<code>$(this)</code>表示当前元素。</li>
<li>获取所选ID的元素标签：<code>$(&#39;#&#39; + key).prop(&#39;tagName&#39;) == &#39;SPAN&#39;</code>，注意：标签结果<code>&#39;SPAN&#39;</code>都是大写的,可以打log验证。</li>
<li>不断找规律、总结提炼，找出最好的偷懒方法，尽量避免体力劳动。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2016/12/31/巧用jQuery选择器写表单办法总结（提高效率）/" data-id="cjdtq38dy000lwfbtg7jx54qu" class="article-share-link" data-share="baidu" data-title="巧用jQuery选择器写表单办法总结（提高效率）">分享到</a>
      

      
        <a href="https://violetjack.github.io/2016/12/31/巧用jQuery选择器写表单办法总结（提高效率）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/26/Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）/" class="article-date">
  <time datetime="2016-12-25T16:00:00.000Z" itemprop="datePublished">2016-12-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/26/Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）/">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>想学习Vue的SPA应用，路由这一块是必不可少的。相信很多和我一样刚接触前端的朋友对于路由这玩意是很困惑的。所以在我学习并成功使用了 <code>vue-router</code> 后，将我的个人经验分享出来，希望可以让同样对路由不知所措的同学有所帮助。</p>
</blockquote>
<h1 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h1><ul>
<li><strong>本文demo的项目结构用的是最新的<a href="https://github.com/vuejs/vue-cli" target="_blank" rel="noopener">命令行工具</a>创建的webpack项目模板</strong>；</li>
<li>本文知识点是基于Vue2.0和vue-route 2的，更多内容请参考<a href="http://cn.vuejs.org/" target="_blank" rel="noopener">Vue.js官网</a>和<a href="http://router.vuejs.org/zh-cn/" target="_blank" rel="noopener">vue-router 2官方文档</a>：</li>
</ul>
<h1 id="一、路由的安装："><a href="#一、路由的安装：" class="headerlink" title="一、路由的安装："></a>一、路由的安装：</h1><h2 id="npm安装"><a href="#npm安装" class="headerlink" title="npm安装"></a>npm安装</h2><p>可以使用npm直接安装插件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router --save</span><br></pre></td></tr></table></figure></p>
<p>执行命令完成vue-router的安装，并在package.json中添加了vue-router的依赖。当我们在其他电脑上安装项目时只需要执行 <code>npm install</code> 即可完成安装。</p>
<p><strong>package.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;vue-router&quot;: &quot;^2.1.1&quot;</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>如果是要安装在开发环境下，则使用以下命令行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router --save-dev</span><br></pre></td></tr></table></figure></p>
<p><strong>package.json</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;vue-router&quot;: &quot;^2.1.1&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<h1 id="二、SPA中路由的简单实现（附demo）"><a href="#二、SPA中路由的简单实现（附demo）" class="headerlink" title="二、SPA中路由的简单实现（附demo）"></a>二、SPA中路由的简单实现（附demo）</h1><p>下面让我们来配置路由并实现我们的第一次页面跳转。<br><a href="http://router.vuejs.org/zh-cn/essentials/getting-started.html" target="_blank" rel="noopener">官方提供的demo</a>很简单，复制到HTML中也的确能跑，但是问题是不知道如何在SPA应用中使用，这坑了我不少时间。在看了不少他人的项目后，完成了SPA路由的简单实现demo（基于vue-cli的webpack模板）。<br><strong>main.js</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import VueRouter from &apos;vue-router&apos;</span><br><span class="line">import Page01 from &apos;./components/page01&apos;</span><br><span class="line">import Page02 from &apos;./components/page02&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)//全局安装路由功能</span><br><span class="line">//定义路径</span><br><span class="line">const routes = [</span><br><span class="line">  &#123; path: &apos;/&apos;, component: Page01 &#125;,</span><br><span class="line">  &#123; path: &apos;/02&apos;, component: Page02 &#125;,</span><br><span class="line">]</span><br><span class="line">//创建路由对象</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>App.vue</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-link to=&quot;/&quot;&gt;01&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/02&quot;&gt;02&lt;/router-link&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>page01.vue</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;page02&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>page02.vue</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;page02&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></p>
<p>实现步骤：</p>
<ol>
<li><code>npm</code>安装<code>vue-router</code></li>
<li><code>Vue.use(VueRouter)</code>全局安装路由功能</li>
<li>定义路径数组<code>routes</code>并创建路由对象<code>router</code></li>
<li>将<code>router</code>对象传到Vue对象中</li>
<li>在根组件中使用<code>&lt;router-link&gt;</code>定义跳转路径</li>
<li>在根组件中使用<code>&lt;router-view&gt;</code>来渲染组件</li>
<li>创建子组件</li>
</ol>
<h1 id="三、路由的跳转"><a href="#三、路由的跳转" class="headerlink" title="三、路由的跳转"></a>三、路由的跳转</h1><h2 id="router-link"><a href="#router-link" class="headerlink" title="router-link"></a>router-link</h2><p><code>router-link</code>标签用于页面的跳转，简单用法我们刚才提到过了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/page01&quot;&gt;page01&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></p>
<p>点击这个<code>router-link</code>标签<code>router-view</code>就会渲染路径为<code>/page01</code>的页面。<br><strong>注意：</strong><code>router-link</code>默认是一个<code>&lt;a&gt;</code>标签的形式，如果需要显示不同的样子，可以在<code>router-link</code>标签中写入不同标签元素，如下显示为<code>button</code>按钮。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/04&quot;&gt;</span><br><span class="line">    &lt;button&gt;to04&lt;/button&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="router-push"><a href="#router-push" class="headerlink" title="router.push"></a>router.push</h2><p>下面我们通过JS代码控制路由的界面渲染，官方文档写法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 字符串</span><br><span class="line">router.push(&apos;home&apos;)</span><br><span class="line">// 对象</span><br><span class="line">router.push(&#123; path: &apos;home&apos; &#125;)</span><br><span class="line">// 命名的路由</span><br><span class="line">router.push(&#123; name: &apos;user&apos;, params: &#123; userId: 123 &#125;&#125;)</span><br><span class="line">// 带查询参数，变成 /register?plan=private</span><br><span class="line">router.push(&#123; path: &apos;register&apos;, query: &#123; plan: &apos;private&apos; &#125;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>那么问题来了，如果是全局注册的路由<code>Vue.use(VueRouter)</code>，应该怎么写呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 字符串</span><br><span class="line">this.$router.push(&apos;home&apos;)</span><br><span class="line">// 对象</span><br><span class="line">this.$router.push(&#123; path: &apos;home&apos; &#125;)</span><br><span class="line">// 命名的路由</span><br><span class="line">this.$router.push(&#123; name: &apos;user&apos;, params: &#123; userId: 123 &#125;&#125;)</span><br><span class="line">// 带查询参数，变成 /register?plan=private</span><br><span class="line">this.$router.push(&#123; path: &apos;register&apos;, query: &#123; plan: &apos;private&apos; &#125;&#125;)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>为什么能这么写呢，猜测是将router对象传递给Vue对象后，复制router对象为Vue.$router上了。还未在源码中求证，如有错误请指出，谢谢~</p>
</blockquote>
<p>push方法其实和<code>&lt;router-link :to=&quot;...&quot;&gt;</code>的写法是等同的。<br><strong>注意：</strong>push方法的跳转会向 history 栈添加一个新的记录，当我们点击浏览器的返回按钮时可以看到之前的页面。</p>
<h2 id="router-replace"><a href="#router-replace" class="headerlink" title="router.replace"></a>router.replace</h2><p>push方法会向 history 栈添加一个新的记录，而replace方法是替换当前的页面，不会向 history 栈添加一个新的记录。用法如下<br><strong>template</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/05&quot; replace&gt;05&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>script</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.replace(&#123; path: &apos;/05&apos; &#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="router-go"><a href="#router-go" class="headerlink" title="router.go"></a>router.go</h2><p>go方法用于控制history记录的前进和后退<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 在浏览器记录中前进一步，等同于 history.forward()</span><br><span class="line">this.$router.go(1)</span><br><span class="line">// 后退一步记录，等同于 history.back()</span><br><span class="line">this.$router.go(-1)</span><br><span class="line">// 前进 3 步记录router.go(3)</span><br><span class="line">// 如果 history 记录不够用，那就默默地失败呗</span><br><span class="line">this.$router.go(-100)</span><br><span class="line">this.$router.go(100)</span><br></pre></td></tr></table></figure></p>
<p>其实很好理解：<strong>go方法就是浏览器上的前进后退按钮，方法中传递的数字参数就是前进和后退的次数</strong></p>
<h1 id="四、路由的传参方式"><a href="#四、路由的传参方式" class="headerlink" title="四、路由的传参方式"></a>四、路由的传参方式</h1><p>在路由跳转的过程中会传递一个object，我们可以通过<code>watch</code>方法查看路由信息对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  &apos;$route&apos; (to, from) &#123;</span><br><span class="line">      console.log(to);</span><br><span class="line">      console.log(from);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p><strong>console中看到的路由信息对象</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    params: &#123; id: &apos;123&apos; &#125;,</span><br><span class="line">    query: &#123; name: &apos;jack&apos; &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这两个参数会在页面跳转后写在路径中，路径相当于<code>/page/123?name=jack</code></p>
<h2 id="1-params"><a href="#1-params" class="headerlink" title="1. params"></a>1. params</h2><p>params传递的数据可用于匹配动态路由字段。如params的数据为 <code>params: { abc: &#39;hello&#39;, txt: &#39;world&#39; }</code> 而动态路由路径为 <code>path: &#39;/05/:txt</code> 那么最终的路径就会是 <code>/05/world</code>。<strong>所以，动态路由其实就是一种params的传递方式。</strong></p>
<p><strong>注意：由于动态路由也是传递params的，所以在 <code>this.$router.push()</code> 方法中 path不能和params一起使用，否则params将无效！需要用name来指定页面。之后动态路由会从params中找到动态路由同名的数据。</strong></p>
<h3 id="传递数据"><a href="#传递数据" class="headerlink" title="传递数据"></a>传递数据</h3><p>在路由配置文件中定义参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> export default [</span><br><span class="line">    ...</span><br><span class="line">    &#123; name: &apos;Page05&apos;, path: &apos;/05/:txt&apos;, component: Page05 &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>下面有两种传递params的方式</p>
<h4 id="1-通过path传递"><a href="#1-通过path传递" class="headerlink" title="1. 通过path传递"></a>1. 通过path传递</h4><p>路径后面的<code>/:txt</code>就是我们要传递的参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123; path: &apos;/05/441&apos;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>此时路由跳转的路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/#/05/441</span><br></pre></td></tr></table></figure></p>
<p>此时我们看到查看路由信息对象：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    params: &#123;</span><br><span class="line">        txt: &apos;441&apos;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="2-通过params传递"><a href="#2-通过params传递" class="headerlink" title="2. 通过params传递"></a>2. 通过params传递</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this.$router.replace(&#123; </span><br><span class="line">    name: &apos;Page05&apos;, </span><br><span class="line">    params: &#123; abc: &apos;hello&apos;, txt: &apos;world&apos; &#125;, </span><br><span class="line">    query: &#123; name: &apos;query&apos;, type: &apos;object&apos; &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>通过name获取页面，传递params和query。<br>得到的URL为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/#/05/world?name=query&amp;type=object</span><br></pre></td></tr></table></figure></p>
<p>而获取到的参数为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    params: &#123;</span><br><span class="line">        abc: &quot;hello&quot;,</span><br><span class="line">        txt: &quot;world&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h3><p><strong>template</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt; &#123;&#123; $route.params.txt &#125;&#125; &lt;/h2&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>script</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(this.$route.params.txt)</span><br></pre></td></tr></table></figure></p>
<h2 id="2-query"><a href="#2-query" class="headerlink" title="2. query"></a>2. query</h2><p>query传递数据的方式就是URL常见的查询参数，如<code>/foo?user=1&amp;name=2&amp;age=3</code>。很好理解，下面就简单写一下用法以及结果</p>
<h3 id="传递数据-1"><a href="#传递数据-1" class="headerlink" title="传递数据"></a>传递数据</h3><p><strong>template</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123; path: &apos;/05&apos;, query: &#123; name: &apos;query&apos;, type: &apos;object&apos; &#125;&#125;&quot; replace&gt;05&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>script</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.replace(&#123; path: &apos;/05&apos;, query: &#123; name: &apos;query&apos;, type: &apos;object&apos; &#125;&#125;)</span><br></pre></td></tr></table></figure></p>
<p><strong>路径结果</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/#/05?name=query&amp;type=object</span><br></pre></td></tr></table></figure></p>
<p><strong>路由信息对象</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    query: &#123;</span><br><span class="line">        name: &quot;query&quot;,</span><br><span class="line">        type: &quot;object&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="获取数据-1"><a href="#获取数据-1" class="headerlink" title="获取数据"></a>获取数据</h3><p>获取数据和params是一样的。<br><strong>template</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt; &#123;&#123; $route.query.name &#125;&#125; &lt;/h2&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>script</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(this.$route.query.type)</span><br></pre></td></tr></table></figure></p>
<h1 id="Vue-js学习系列"><a href="#Vue-js学习系列" class="headerlink" title="Vue.js学习系列"></a>Vue.js学习系列</h1><p>鉴于前端知识碎片化严重，我希望能够系统化的整理出一套关于Vue的学习系列博客。</p>
<p><a href="http://www.jianshu.com/p/8013d8d37bd0" target="_blank" rel="noopener">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/d6f7e11f18af" target="_blank" rel="noopener">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/8e5fb763c3d7" target="_blank" rel="noopener">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a><br><a href="http://www.jianshu.com/p/aef34acd111f" target="_blank" rel="noopener">Vue.js学习系列四 —— Webpack打包工具的使用</a><br><a href="http://www.jianshu.com/p/efb6fbed6fac" target="_blank" rel="noopener">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a><br><a href="http://www.jianshu.com/p/073d25a3bba0" target="_blank" rel="noopener">Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记</a><br><a href="https://www.jianshu.com/p/ba7466d7101a" target="_blank" rel="noopener">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a><br><a href="https://www.jianshu.com/p/15028f91226e" target="_blank" rel="noopener">Vue.js学习系列八 —— Vue源码学习之State学习</a></p>
<h1 id="Vue-js学习系列项目地址"><a href="#Vue-js学习系列项目地址" class="headerlink" title="Vue.js学习系列项目地址"></a>Vue.js学习系列项目地址</h1><p>本文源码已收入到GitHub中，以供参考，当然能留下一个star更好啦^-^。<br><a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">https://github.com/violetjack/VueStudyDemos</a></p>
<h1 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h1><p>VioletJack，高效学习前端工程师，喜欢研究提高效率的方法，也专注于Vue前端相关知识的学习、整理。<br>欢迎关注、点赞、评论留言~我将持续产出Vue相关优质内容。</p>
<p>新浪微博： <a href="http://weibo.com/u/2640909603" target="_blank" rel="noopener">http://weibo.com/u/2640909603</a><br>掘金：<a href="https://gold.xitu.io/user/571d953d39b0570068145cd1" target="_blank" rel="noopener">https://gold.xitu.io/user/571d953d39b0570068145cd1</a><br>CSDN: <a href="http://blog.csdn.net/violetjack0808" target="_blank" rel="noopener">http://blog.csdn.net/violetjack0808</a><br>简书： <a href="http://www.jianshu.com/users/54ae4af3a98d/latest_articles" target="_blank" rel="noopener">http://www.jianshu.com/users/54ae4af3a98d/latest_articles</a><br>Github： <a href="https://github.com/violetjack" target="_blank" rel="noopener">https://github.com/violetjack</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2016/12/26/Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）/" data-id="cjdtq38cu0003wfbtopz02cmx" class="article-share-link" data-share="baidu" data-title="Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）">分享到</a>
      

      
        <a href="https://violetjack.github.io/2016/12/26/Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-weex 踩坑记（持续更新中……）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/03/weex 踩坑记（持续更新中……）/" class="article-date">
  <time datetime="2016-08-02T16:00:00.000Z" itemprop="datePublished">2016-08-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/03/weex 踩坑记（持续更新中……）/">weex 踩坑记（持续更新中……）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>消失了一个月，努力为新项目倒腾 weex 中，记录一下遇到的问题。之后还会持续更新~</p>
</blockquote>
<p>目前，我使用的 <code>weex</code> 都是在<a href="http://weex.apache.org/cn/guide/integrate-to-your-app.html" target="_blank" rel="noopener">集成Weex到Android</a>来做的，项目使用的是 <code>weex-toolkit</code> 生成的项目模板，代码发布使用webpack打包成js放到服务器上，Android端读取服务器上的js来实现weex项目的。</p>
<h1 id="杂七杂八的一些知识点"><a href="#杂七杂八的一些知识点" class="headerlink" title="杂七杂八的一些知识点"></a>杂七杂八的一些知识点</h1><ul>
<li><p>屏幕宽度为 750，高度一直没查到，我用的是1300，刚好显示下。长度单位要么不写，要么就是 px，效果都一样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  height: 1300;</span><br><span class="line">  width: 750px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>布局只支持 盒子模型、flex布局、relative定位，其他一些CSS不太支持。</p>
</li>
<li>CSS的 margin、padding、border 不支持缩写。像 <code>border:5px solid red;</code> 这样写是不行滴。</li>
<li>暂不支持像 <a href="http://mint-ui.github.io/#!/zh-cn" target="_blank" rel="noopener">mint-ui</a> 这类 Vue Web UI 组件库。</li>
<li>页面的跳转可以通过 <a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="noopener">vue-router</a> 或者 weex 的 <a href="http://weex.apache.org/cn/references/modules/navigator.html" target="_blank" rel="noopener">navigator</a> 组件来实现，可以参考我提问的<a href="https://segmentfault.com/q/1010000009999942" target="_blank" rel="noopener">Weex的页面跳转方案的选择</a>。</li>
<li>在 Android 中，<code>navigator</code> 的 <code>push</code> 方法跳转的 <code>Activity</code> 界面是需要处理的，需要创建一个带有特殊 <code>&lt;intent-filter&gt;</code> 标签的 Activity。假如手机中没有带有该 <code>&lt;intent-filter&gt;</code> 的 <code>Activity</code> 就不会发生跳转，报 <code>ActivityNotFoundException</code> 错误。而如果有多个带有该 <code>&lt;intent-filter&gt;</code> 的<code>Activity</code>，Android 系统会让我们去进行选择。注：这个带 <code>&lt;intent-filter&gt;</code> 的Activity 是跨 APP 的。可以参照<a href="http://blog.csdn.net/violetjack0808/article/details/74390249" target="_blank" rel="noopener">WEEX 使用navigator跳转Android系统出现ActivityNotFoundException报错</a></li>
<li><code>image</code> 必须设置宽高，否则不显示。也不能使用 <code>img</code> 来显示图片</li>
<li>Android 手机中显示图片需要在 <code>ImageAdapter</code> 中进行处理，官网只提供了处理的位置（有注释），但未对图片进行处理。我使用了 <a href="https://github.com/square/picasso" target="_blank" rel="noopener">picasso</a> 来对图片进行显示。</li>
<li>native 和 weex 的通信通过自定义module或者发送全局事件来完成。参考<a href="http://blog.csdn.net/violetjack0808/article/details/74002599" target="_blank" rel="noopener">Weex控制Android返回键解决方案</a>里面有 native 端和 weex 端交互的细节。</li>
<li>weex 在Android手机中的调试：<ul>
<li>在 weex 中使用 console.log 方法来打 log，打开Android Studio，在 logcat中可以过滤关键词 jslog 来获取log数据。</li>
<li>如果 weex 报错，可以在 logcat 中查找错误，一般错误都好几行，很好找。</li>
<li>建议使用ESLint先过滤一些简单的语法错误，减少手机端的调试成本。</li>
</ul>
</li>
<li>weex 其他调试方式<ul>
<li>手机安装 <a href="http://weex.apache.org/cn/playground.html" target="_blank" rel="noopener">Playground</a>，运行 weex 项目，网页打开 <code>http://localhost:8080/</code> 扫描二维码进行调试。</li>
<li>可以在<a href="http://dotwe.org/vue/025db54e37123ab5336a4b848397660f" target="_blank" rel="noopener">Playground网页端</a>进行代码调试，但感觉遇到有组件的项目不太好调试。</li>
<li>在项目运行(<code>npm run serve</code>)后，直接打开 <code>http://localhost:8080/</code> 也能看到网页版本的项目，可以直接调试，不过一些设计Native端的组件用不了。</li>
</ul>
</li>
<li>weex中的标签只支持官方提供的<a href="http://weex.apache.org/cn/references/components/index.html" target="_blank" rel="noopener">内部组件</a>，因为那些是会被渲染成native界面的。</li>
<li><code>v-bind:class</code>只能使用数组语法</li>
<li><code>stream</code> 的 <code>url</code> 选项好像默认不支持中文，需要将中文转为 <code>UTF-8</code> 来传输。</li>
<li>weex 的 css 只支持 class 选择器，并且只支持单个类的选择器，如<code>.item .item-content {}</code>是错误的~</li>
<li>weex有点击特效的，参照<a href="http://weex.apache.org/cn/references/common-style.html#伪类-v0-9-5" target="_blank" rel="noopener">伪类</a>。</li>
<li>不支持 <code>display:none</code> 即不支持 <code>v-show</code>，需要使用 <code>v-if</code> 来实现显示和隐藏。</li>
<li>默认flex布局，要设置 <code>flex-direction</code>。我怀疑我的web端显示错误可能就是没有设置 <code>flex-direction</code>，移动端没有错误是因为默认 <code>flex-direction:column</code></li>
<li>存储、网络等很多都是异步的，需要注意顺序</li>
<li><code>storage</code> 只能存储字符串，取值后再转为json</li>
</ul>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>暂时整理这么多，之后还会有其他的东西我会持续更新的~<br>Android 端的 <a href="https://github.com/violetjack/WeexComponents" target="_blank" rel="noopener">demo</a> 我会放到我的 Github 上去，之后我会让我的 IOS 小伙伴给一版 IOS 版本的壳子，到时候直接写weex项目，Android端和IOS端只需要更改一下渲染的js文件路径就可以显示了。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="https://github.com/dreamochi/DayDayUp/issues/77" target="_blank" rel="noopener">weex填坑注意事项</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2016/08/03/weex 踩坑记（持续更新中……）/" data-id="cjdtq38dt000hwfbthxe2k6es" class="article-share-link" data-share="baidu" data-title="weex 踩坑记（持续更新中……）">分享到</a>
      

      
        <a href="https://violetjack.github.io/2016/08/03/weex 踩坑记（持续更新中……）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Weex控制Android返回键解决方案" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/30/Weex控制Android返回键解决方案/" class="article-date">
  <time datetime="2016-06-29T16:00:00.000Z" itemprop="datePublished">2016-06-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/30/Weex控制Android返回键解决方案/">Weex控制Android返回键解决方案</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>正在深入倒腾weex，希望可以将weex用在项目中。这里找出了weex控制Android返回键的方法。</p>
</blockquote>
<h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>项目使用的是Vue+VueRouter的单页应用来写Weex的，现有以下需求。</p>
<ul>
<li>当页面不在首页上时，返回上一页面。 <code>this.$router.go(-1)</code></li>
<li>当页面在首页是，关闭当前Android应用</li>
</ul>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="Android和Weex的通信"><a href="#Android和Weex的通信" class="headerlink" title="Android和Weex的通信"></a>Android和Weex的通信</h2><h3 id="Android-to-Weex"><a href="#Android-to-Weex" class="headerlink" title="Android to Weex"></a>Android to Weex</h3><p>使用的是<a href="http://weex.apache.org/cn/references/modules/globalevent.html" target="_blank" rel="noopener">globalEvent</a>来实现的。我们在 Android 的返回按钮事件中触发 <code>globalEvent</code>，在 Weex 中监听该 <code>globalEvent</code>。</p>
<p><strong>Android</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public void onBackPressed()&#123;</span><br><span class="line">  Map&lt;String,Object&gt; params=new HashMap&lt;&gt;();</span><br><span class="line">  params.put(&quot;name&quot;,&quot;returnmsg&quot;);</span><br><span class="line">  mWXSDKInstance.fireGlobalEventCallback(&quot;androidback&quot;,params);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Weex</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">globalEvent.addEventListener(&apos;androidback&apos;, function (e) &#123;</span><br><span class="line">  // 这里就可以做返回事件操作了，如返回上一页或退出应用</span><br><span class="line">  // that.$router.go(-1)</span><br><span class="line">  // weex.requireModule(&apos;close&apos;).closeApp()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="Weex-to-Android"><a href="#Weex-to-Android" class="headerlink" title="Weex to Android"></a>Weex to Android</h3><p>而Weex对Android的通信使用<a href="http://weex.apache.org/cn/references/advanced/extend-to-android.html#Module-扩展" target="_blank" rel="noopener">Module扩展</a>来实现。通过在Android中创建WXModule并在Application中注册后，Weex调用该Module触发Android事件。下面我们来一步步实现。</p>
<p><strong>1. Android中创建CloseModule</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class CloseModule extends WXModule &#123;</span><br><span class="line"></span><br><span class="line">    @JSMethod(uiThread = false)</span><br><span class="line">    public void closeApp() &#123;</span><br><span class="line">        LogUtil.e(&quot;触发关闭效果&quot;);</span><br><span class="line">        CacheActivity.finishActivity();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>2. 在Application中注册Module</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class WXApplication extends Application &#123;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void onCreate() &#123;</span><br><span class="line">    super.onCreate();</span><br><span class="line">    InitConfig config = new InitConfig.Builder().setImgAdapter(new ImageAdapter()).build();</span><br><span class="line">    WXSDKEngine.initialize(this, config);</span><br><span class="line">    try &#123;</span><br><span class="line">      ...</span><br><span class="line">      WXSDKEngine.registerModule(&quot;close&quot;, CloseModule.class);</span><br><span class="line">      ...</span><br><span class="line">    &#125; catch (WXException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>3. 在Weex中使用</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weex.requireModule(&apos;close&apos;).closeApp()</span><br></pre></td></tr></table></figure></p>
<p>这样调用Module之后就可以对Android做许多事情了。</p>
<h2 id="退出Activity"><a href="#退出Activity" class="headerlink" title="退出Activity"></a>退出Activity</h2><p>这里我还遇到了一个问题，就是在Weex提供的WXModule中如何退出Activity，解决方案为<a href="http://www.cnblogs.com/jenson138/p/4516568.html" target="_blank" rel="noopener">android 关闭多个或指定activity</a>,这篇文章让我可以非常优雅的管理我的Activity。简单写下用法.<br><strong>1. 在每个Activity的onCreate方法中将Activity对象添加到List中</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">  ...</span><br><span class="line">  CacheActivity.addActivity(NetworkActivity.this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>2. 在Module中去关闭Activity</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CacheActivity.finishActivity();</span><br></pre></td></tr></table></figure></p>
<p><strong>3. 当然，别忘了把CacheActivity的代码贴到项目中去</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">package com.weex.sample.utlis;</span><br><span class="line"></span><br><span class="line">import android.app.Activity;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class CacheActivity &#123;</span><br><span class="line">    public static List&lt;Activity&gt; activityList = new LinkedList&lt;Activity&gt;();</span><br><span class="line"></span><br><span class="line">    public CacheActivity() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加到Activity容器中</span><br><span class="line">     */</span><br><span class="line">    public static void addActivity(Activity activity) &#123;</span><br><span class="line">        if (!activityList.contains(activity)) &#123;</span><br><span class="line">            activityList.add(activity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 便利所有Activigty并finish</span><br><span class="line">     */</span><br><span class="line">    public static void finishActivity() &#123;</span><br><span class="line">        for (Activity activity : activityList) &#123;</span><br><span class="line">            activity.finish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 结束指定的Activity</span><br><span class="line">     */</span><br><span class="line">    public static void finishSingleActivity(Activity activity) &#123;</span><br><span class="line">        if (activity != null) &#123;</span><br><span class="line">            if (activityList.contains(activity)) &#123;</span><br><span class="line">                activityList.remove(activity);</span><br><span class="line">            &#125;</span><br><span class="line">            activity.finish();</span><br><span class="line">            activity = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 结束指定类名的Activity 在遍历一个列表的时候不能执行删除操作，所有我们先记住要删除的对象，遍历之后才去删除。</span><br><span class="line">     */</span><br><span class="line">    public static void finishSingleActivityByClass(Class&lt;?&gt; cls) &#123;</span><br><span class="line">        Activity tempActivity = null;</span><br><span class="line">        for (Activity activity : activityList) &#123;</span><br><span class="line">            if (activity.getClass().equals(cls)) &#123;</span><br><span class="line">                tempActivity = activity;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        finishSingleActivity(tempActivity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Over！继续倒腾Weex中……遇到问题继续总结。欢迎留言交流~</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2016/06/30/Weex控制Android返回键解决方案/" data-id="cjdtq38dv000iwfbt0dyfviso" class="article-share-link" data-share="baidu" data-title="Weex控制Android返回键解决方案">分享到</a>
      

      
        <a href="https://violetjack.github.io/2016/06/30/Weex控制Android返回键解决方案/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
  </nav>
</section>
      
      <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/02/19/Vue.js源码学习四 —— 渲染 Render 初始化过程学习/">Vue.js源码学习四 —— 渲染 Render 初始化过程学习</a>
          </li>
        
          <li>
            <a href="/2018/02/17/Vue.js源码学习三 —— 事件 Event 学习/">Vue.js源码学习三 —— 事件 Event 学习</a>
          </li>
        
          <li>
            <a href="/2018/02/16/Vue.js源码学习二 —— 生命周期 LifeCycle 学习/">Vue.js源码学习二 —— 生命周期 LifeCycle 学习</a>
          </li>
        
          <li>
            <a href="/2018/02/08/用hexo搭建博客笔记/">用hexo搭建博客笔记</a>
          </li>
        
          <li>
            <a href="/2018/02/03/Vue.js源码学习一 —— 数据选项 State 学习/">Vue.js学习系列八 —— Vue源码学习之State学习</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">个人网站</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/violetjack" target="_blank">Github</a>
          </li>
        
          <li>
            <a href="https://segmentfault.com/u/violetjack" target="_blank">SegmentFault</a>
          </li>
        
          <li>
            <a href="http://blog.csdn.net/violetjack0808" target="_blank">CSDN</a>
          </li>
        
          <li>
            <a href="https://www.jianshu.com/u/54ae4af3a98d" target="_blank">简书</a>
          </li>
        
          <li>
            <a href="https://juejin.im/user/571d953d39b0570068145cd1" target="_blank">掘金</a>
          </li>
        
          <li>
            <a href="https://www.zhihu.com/people/violetjack" target="_blank">知乎</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 VioletJack<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
