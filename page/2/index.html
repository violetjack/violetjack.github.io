
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Vue试验场</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="用一年的时间好好捣鼓Vue">
<meta property="og:type" content="website">
<meta property="og:title" content="Vue试验场">
<meta property="og:url" content="https://violetjack.github.io/page/2/index.html">
<meta property="og:site_name" content="Vue试验场">
<meta property="og:description" content="用一年的时间好好捣鼓Vue">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vue试验场">
<meta name="twitter:description" content="用一年的时间好好捣鼓Vue">
  
    <link rel="alternative" href="/atom.xml" title="Vue试验场" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Vue试验场</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">专注于Vue相关知识的捣鼓</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">文章</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="violetjack.github.io">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-Vue学习系列倡议书" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/Vue学习系列倡议书/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/Vue学习系列倡议书/">Vue学习系列倡议书</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>我想通过社区的力量把《Vue学习系列》做到最优质的Vue系列博客</p>
</blockquote>
<h1 id="解决学习痛点"><a href="#解决学习痛点" class="headerlink" title="解决学习痛点"></a>解决学习痛点</h1><p>学习前端的同学都知道，前端有一大痛点就是知识点分散，学习的东西多。<br>就像我学习Vue，一拿到手就告诉我有个全家桶要学习。虽然一个一个学习下来了，但是过程是比较漫长的。而且如果是刚入门前端世界，会发现还没开始写代码各种配置都能玩好几天。Webpack打包、ESLint代码检查、Babel语法转译等等……<br>写本系列博客的本意是想将学习Vue的内容用博客的形式写出来，加深对知识点的理解。同时也希望能够帮助到和我有同样需求的朋友。<br>不过，就在昨天晚上我突然多了一个想法。<strong>我想把《Vue学习系列》做到最优质的Vue系列博客。</strong>通过我惯用的 <strong>资料索引+个人理解+Demo</strong> 的方式将Vue前端世界的所有都讲清楚、讲明白。让想学习前端的同学能够快速度过学习的迷茫期。通过本系列博客，快速入门Vue前端世界。<br><strong>打一个比方就是：官方文档是满汉全席，那么本系列博客就是肯德基、麦当劳，提高效率，拿来就用！</strong></p>
<h1 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h1><p><strong>通过一篇博客和一个演示项目快速学会Vue某个功能的常规使用方法。</strong><br>本系列博客定位是刚入门学习Vue的同学~相比于看官方文档，通过本系列博客有几个优点：</p>
<ul>
<li><strong>常用功能</strong> —— 正如二八原则一样，100%的学习内容中只有20%是常用而又必要的，我们先把20%掌握开始上手，其他80%按需学习。</li>
<li><strong>个人理解</strong> —— 尽量用容易理解的语言对技术点进行描述，最好能让没有学过前端的人都能理解是怎么回事。</li>
<li><strong>实例项目</strong> —— 每篇博客一个简单的小项目，包含了博客中提到的所有功能的实现（其实作者是边撸博客边写demo的，确保博客内容是可执行的）。博客和demo配合味道更佳哦~</li>
<li><strong>踩坑提醒</strong> —— 前端项目中总是会有一些奇奇怪怪的坑，如果作者踩过了，我会尽量提出。避免其他同学浪费时间精力去过这些无谓的坑。</li>
</ul>
<p>在入门系列发布后，会继续发布高级系列、源码解析系列。让我们一起学习共同进步。</p>
<h1 id="倡议"><a href="#倡议" class="headerlink" title="倡议"></a>倡议</h1><blockquote>
<p><a href="https://github.com/violetjack/VueStudyDemos/tree/master/Blogs" target="_blank" rel="noopener">《Vue学习系列》博客</a>的文本和Demo都将发布在Github上，并且博客内容将在<a href="https://www.jianshu.com/c/edec9ac6d9a7" target="_blank" rel="noopener">简书</a>上首发和更新。<br>如果对本系列课程有任何建议、想法、评论。可以在简书下留言，或者在VueStudyDemos项目中提交 issue 和 PR，希望通过大家的力量将本系列课程做好，帮助到更多人。</p>
</blockquote>
<p>到我写本文的时候，Vue学习系列的demo项目<a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">VueStudyDemos</a>已有173颗star了。感谢大家的支持，希望本系列博客真的可以帮助到大家。之后还会继续产出Vue相关的博客。</p>
<h1 id="Vue-js学习系列"><a href="#Vue-js学习系列" class="headerlink" title="Vue.js学习系列"></a>Vue.js学习系列</h1><p>鉴于前端知识碎片化严重，我希望能够系统化的整理出一套关于Vue的学习系列博客。</p>
<p><a href="http://www.jianshu.com/p/8013d8d37bd0" target="_blank" rel="noopener">Vue.js学习系列一 —— vue-router2学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/d6f7e11f18af" target="_blank" rel="noopener">Vue.js学习系列二 —— vuex学习实践笔记（附DEMO）</a><br><a href="http://www.jianshu.com/p/8e5fb763c3d7" target="_blank" rel="noopener">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a><br><a href="http://www.jianshu.com/p/aef34acd111f" target="_blank" rel="noopener">Vue.js学习系列四 —— Webpack打包工具的使用</a><br><a href="http://www.jianshu.com/p/efb6fbed6fac" target="_blank" rel="noopener">Vue.js学习系列五 —— 从VUE-CLI来聊聊ESLint</a><br><a href="http://www.jianshu.com/p/073d25a3bba0" target="_blank" rel="noopener">Vue.js学习系列六 —— Vue单元测试Karma+Mocha学习笔记</a><br><a href="https://www.jianshu.com/p/ba7466d7101a" target="_blank" rel="noopener">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a><br><a href="https://www.jianshu.com/p/15028f91226e" target="_blank" rel="noopener">Vue.js学习系列八 —— Vue源码学习之State学习</a></p>
<h1 id="Vue-js学习系列项目地址"><a href="#Vue-js学习系列项目地址" class="headerlink" title="Vue.js学习系列项目地址"></a>Vue.js学习系列项目地址</h1><p>本文源码已收入到GitHub中，以供参考，当然能留下一个star更好啦^-^。<br><a href="https://github.com/violetjack/VueStudyDemos" target="_blank" rel="noopener">https://github.com/violetjack/VueStudyDemos</a></p>
<h1 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h1><p>VioletJack，高效学习前端工程师，喜欢研究提高效率的方法，也专注于Vue前端相关知识的学习、整理。<br>欢迎关注、点赞、评论留言~我将持续产出Vue相关优质内容。</p>
<p>新浪微博： <a href="http://weibo.com/u/2640909603" target="_blank" rel="noopener">http://weibo.com/u/2640909603</a><br>掘金：<a href="https://gold.xitu.io/user/571d953d39b0570068145cd1" target="_blank" rel="noopener">https://gold.xitu.io/user/571d953d39b0570068145cd1</a><br>CSDN: <a href="http://blog.csdn.net/violetjack0808" target="_blank" rel="noopener">http://blog.csdn.net/violetjack0808</a><br>简书： <a href="http://www.jianshu.com/users/54ae4af3a98d/latest_articles" target="_blank" rel="noopener">http://www.jianshu.com/users/54ae4af3a98d/latest_articles</a><br>Github： <a href="https://github.com/violetjack" target="_blank" rel="noopener">https://github.com/violetjack</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/Vue学习系列倡议书/" data-id="cjdcg4q86000a1wbt801kgw50" class="article-share-link" data-share="baidu" data-title="Vue学习系列倡议书">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/Vue学习系列倡议书/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Vue源码学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/Vue源码学习笔记/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/Vue源码学习笔记/">Vue源码学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>最近偷懒好久没有写博客了，一直想继续Vue学习系列，想深入Vue源码来写。结果发现自己层次不够，对js的理解差好多。所以一直想写一直搁置着。最近重新振作决心看完Vue源码，并且以我们这类前端小白的角度来一步步弄懂Vue源码。</p>
</blockquote>
<p><strong>PS：</strong>以下文章为笔记类，记录了本人在看源码过程中的一些问题和感悟。</p>
<h1 id="Vue源码的本质是什么"><a href="#Vue源码的本质是什么" class="headerlink" title="Vue源码的本质是什么"></a>Vue源码的本质是什么</h1><p>Vue.js 本质上就是一个包含各种逻辑的一个function。而我们通常初始化Vue的过程就是实例化的过程。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>话不多说，老规矩用代码说话！<br>让我们来对Vue进行打印：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(Vue)</span><br><span class="line">console.log(vm)</span><br></pre></td></tr></table></figure></p>
<p>打印结果如图：<br><img src="http://upload-images.jianshu.io/upload_images/1987062-51c2e9112e90eeef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="vue"></p>
<p>这里可以看到Vue$3这个方法，就是这个方法对Vue对象的构造函数了。其实这很简单，我们自己都可以造出一个Vue$4<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Vue$4(options) &#123;</span><br><span class="line">    this.options = options</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Vue$4.prototype.name = &quot;小东西&quot;</span><br><span class="line">Vue$4.prototype.age = 27</span><br><span class="line"></span><br><span class="line">console.log(new Vue$4(&quot;很好&quot;))</span><br></pre></td></tr></table></figure></p>
<p>显示结果如图<br><img src="http://upload-images.jianshu.io/upload_images/1987062-ff4ba64d71f9d5b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="vue$4"></p>
<p>综上所述，Vue对象的本质就是一个function，与我们的Vue$4的不同之处只在于逻辑的多与少。</p>
<h1 id="必须理解Object对象"><a href="#必须理解Object对象" class="headerlink" title="必须理解Object对象"></a>必须理解Object对象</h1><p>在Vue的源码中，出场率最多的应该就数<code>Object</code>对象的使用上了。可以这么说，不懂Object都没法往下看代码。以下是源码中用到的比较多的。</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener">Object.defineProperty</a> 直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="noopener">Object.create</a> 使用指定的原型对象及其属性去创建一个新的对象。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener">Object.keys</a> 返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和使用 for…in 循环遍历该对象时返回的顺序一致 （两者的主要区别是 一个 for-in 循环还会枚举其原型链上的属性）。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/prototype" target="_blank" rel="noopener">Object.prototype</a> Object的原型对象。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze" target="_blank" rel="noopener">Object.freeze</a> 冻结一个对象，冻结指的是不能向这个对象添加新的属性，不能修改其已有属性的值，不能删除已有属性，以及不能修改该对象已有属性的可枚举性、可配置性、可写性。也就是说，这个对象永远是不可变的。该方法返回被冻结的对象。</li>
</ul>
<p>那么，Vue中哪个是Object呢？我们继续试验：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(typeof Vue)</span><br><span class="line">console.log(typeof new Vue())</span><br></pre></td></tr></table></figure></p>
<p>输出结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function</span><br><span class="line">object</span><br></pre></td></tr></table></figure></p>
<p>结果显示，使用new来创建的Vue实例就是个对象，所以一切对Object的操作行为都是针对Vue实例对象的。</p>
<h1 id="理解setter和getter"><a href="#理解setter和getter" class="headerlink" title="理解setter和getter"></a>理解setter和getter</h1><p>在网上看Vue的评论是经常会听到说</p>
<blockquote>
<p>Vue无非就是setter和getter方法的运用而已</p>
</blockquote>
<p>这让我等新手一脸懵逼，这里我们就来认识认识setter和getter。<br>当我们在获取一个Vue实例data中的某个对象，如果你用console打印出来会发现，对象属性中除了常规的对象属性和<strong>proto</strong>对象之外还会多一个set和一个get方法，所谓的setter和getter就是它们。Vue给每一个对象属性都添加了Observer观察数据的获取和修改。好吧，贴代码一睹真容。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">function defineReactive (</span><br><span class="line">  obj,</span><br><span class="line">  key,</span><br><span class="line">  val,</span><br><span class="line">  customSetter,</span><br><span class="line">  shallow</span><br><span class="line">) &#123;</span><br><span class="line">  var dep = new Dep();</span><br><span class="line"></span><br><span class="line">  // Object.getOwnPropertyDescriptor() 方法返回指定对象上一个自有属性对应的属性描述符。</span><br><span class="line">  //（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）</span><br><span class="line">  // 对象、属性名称、描述~</span><br><span class="line">  var property = Object.getOwnPropertyDescriptor(obj, key);</span><br><span class="line">  // 当且仅当该属性的 configurable 为 true 时，该属性描述符才能够被改变，同时该属性也能从对应的对象上被删除。默认为 false。</span><br><span class="line">  if (property &amp;&amp; property.configurable === false) &#123;</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // cater for pre-defined getter/setters</span><br><span class="line">  var getter = property &amp;&amp; property.get;</span><br><span class="line">  var setter = property &amp;&amp; property.set;</span><br><span class="line"></span><br><span class="line">  var childOb = !shallow &amp;&amp; observe(val);</span><br><span class="line">  Object.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: true,</span><br><span class="line">    configurable: true,</span><br><span class="line">    get: function reactiveGetter () &#123;</span><br><span class="line">      var value = getter ? getter.call(obj) : val;</span><br><span class="line">      if (Dep.target) &#123; // Watcher</span><br><span class="line">        dep.depend();</span><br><span class="line">        if (childOb) &#123;</span><br><span class="line">          childOb.dep.depend();</span><br><span class="line">          if (Array.isArray(value)) &#123;</span><br><span class="line">            dependArray(value);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return value</span><br><span class="line">    &#125;,</span><br><span class="line">    set: function reactiveSetter (newVal) &#123;</span><br><span class="line">      var value = getter ? getter.call(obj) : val;</span><br><span class="line">      /* eslint-disable no-self-compare */</span><br><span class="line">      if (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123;</span><br><span class="line">        return</span><br><span class="line">      &#125;</span><br><span class="line">      /* eslint-enable no-self-compare */</span><br><span class="line">      if (&quot;development&quot; !== &apos;production&apos; &amp;&amp; customSetter) &#123;</span><br><span class="line">        customSetter(); // 自定义setter</span><br><span class="line">      &#125;</span><br><span class="line">      if (setter) &#123;</span><br><span class="line">        setter.call(obj, newVal);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        val = newVal;</span><br><span class="line">      &#125;</span><br><span class="line">      childOb = !shallow &amp;&amp; observe(newVal);</span><br><span class="line">      dep.notify();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>代码太长？懵逼了？没关系，我们自己来造一个简单的setter和getter来了解一下。<br>其实用的就是Object.defineProperty方法中就有set和get。</p>
<ul>
<li>get 一个给属性提供 getter 的方法，如果没有 getter 则为 undefined。该方法返回值被用作属性值。默认为 undefined。</li>
<li>set 一个给属性提供 setter 的方法，如果没有 setter 则为 undefined。该方法将接受唯一参数，并将该参数的新值分配给该属性。默认为 undefined。</li>
</ul>
<p>好了，写代码~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;</span><br><span class="line">var mValue = &quot;abc&quot;</span><br><span class="line">Object.defineProperty(obj, &quot;_name&quot;, &#123;</span><br><span class="line">    configurable: false, </span><br><span class="line">    enumerable: false, </span><br><span class="line">    get: function reactiveGetter () &#123;</span><br><span class="line">        return mValue</span><br><span class="line">    &#125;,</span><br><span class="line">    set: function reactiveSetter (val) &#123;</span><br><span class="line">        mValue = val</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">obj._name = &quot;rose&quot;</span><br><span class="line"></span><br><span class="line">console.log(obj)</span><br></pre></td></tr></table></figure></p>
<p>到这里我们打印log，对象属性的set和get方法就出现了。<br><img src="http://upload-images.jianshu.io/upload_images/1987062-c11e06d42cf94a2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="打印结果"></p>
<h1 id="逻辑运算符的使用"><a href="#逻辑运算符的使用" class="headerlink" title="逻辑运算符的使用"></a>逻辑运算符的使用</h1><p>在源码中有很多<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_Operators" target="_blank" rel="noopener">逻辑运算符</a>的使用，有些运用的很巧妙。这里也科普下吧~</p>
<p>首先知道下可以转换成false的值，如下：</p>
<ul>
<li>null</li>
<li>NaN</li>
<li>0</li>
<li>空字符串（””）</li>
<li>undefined</li>
</ul>
<h3 id="用法一：判断条件返回true或者false"><a href="#用法一：判断条件返回true或者false" class="headerlink" title="用法一：判断条件返回true或者false"></a>用法一：判断条件返回true或者false</h3><p>这是最基本的用法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (a &amp; a.master &amp; a.master.name) &#123;&#125; // 如果这三个属性都为true值，执行if逻辑</span><br><span class="line">if (a || b) &#123;&#125; // 如果a或者b为true值，执行if逻辑。</span><br></pre></td></tr></table></figure></p>
<h3 id="用法二：判断并返回条件对象"><a href="#用法二：判断并返回条件对象" class="headerlink" title="用法二：判断并返回条件对象"></a>用法二：判断并返回条件对象</h3><ul>
<li><code>&amp;&amp;</code> 如果几个条件都为true，则返回最后一个条件。</li>
<li><code>||</code> 几个条件从前往后逐一判断，如果那个条件为true，返回该条件，否则返回最后一个条件。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var getter = property &amp;&amp; property.get;  // 如果两个属性都存在，将property.get赋值给getter</span><br><span class="line">e &amp;&amp; e.__ob__ &amp;&amp; e.__ob__.dep.depend(); // 如果三个属性都存在，执行第三条语句的方法</span><br><span class="line">var res = assets[id] || assets[camelizedId] || assets[PascalCaseId]; </span><br><span class="line">// 给res赋值，如果assets[id]为true，则将其传res；</span><br><span class="line">// 如果assets[camelizedId]为true，将其传给res；</span><br><span class="line">// 如果前两者都为false，将assets[PascalCaseId]传给res。</span><br><span class="line">var strat = strats[key] || defaultStrat;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>然后，我对各种情况做了试验得出以下结论：</p>
<ul>
<li><code>&amp;&amp;</code> 判断中，判断值都为 <code>true</code>，返回最后一个判断值；判断值中有 <code>false</code><br>值，返回第一个 <code>false</code> 值。</li>
<li><code>||</code> 判断中，判断值都为 <code>true</code>，返回第一个判断值；判断值中有 <code>true</code> 值也有 <code>false</code> 值，返回第一个为 <code>true</code> 的判断值；如果判断值都为 <code>false</code>，返回最后面的 <code>false</code> 值。</li>
</ul>
<p><strong>注意：</strong>这里所说的返回 <code>false</code> 值不一定是 Boolean 类型的 <code>false</code>，也可能是 <code>0、null</code> 等非值，详见上文。</p>
<h3 id="用法三：使用两个非"><a href="#用法三：使用两个非" class="headerlink" title="用法三：使用两个非"></a>用法三：使用两个非</h3><p>两个感叹号会确保参数为非值时只能为false，不会是0、空字符串、undefined等非值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (options) &#123;</span><br><span class="line">    this.deep = !!options.deep;</span><br><span class="line">    this.user = !!options.user;</span><br><span class="line">    this.lazy = !!options.lazy;</span><br><span class="line">    this.sync = !!options.sync;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    this.deep = this.user = this.lazy = this.sync = false;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="数组操作"><a href="#数组操作" class="headerlink" title="数组操作"></a>数组操作</h1><h3 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h3><p>先看一段代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a = [ &apos;jack&apos;, &apos;rose&apos;, &apos;wade&apos; ]</span><br><span class="line">var b = a</span><br><span class="line">b[1] = &apos;marry&apos;</span><br><span class="line">console.log(a)</span><br><span class="line">console.log(b)</span><br></pre></td></tr></table></figure></p>
<p>最后的结果是a和b的数组第二个值都变成了marry，原因就是b并不是获得了数组内容，而只是指向了a，a和b其实是一回事。如果我们需要复制，可以这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var b = a.slice()</span><br></pre></td></tr></table></figure></p>
<p>查阅<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">MDN</a>可知：</p>
<blockquote>
<p>slice() 方法返回一个从开始到结束（不包括结束）选择的数组的一部分浅拷贝到一个新数组对象，原始数组不会被修改。</p>
<h3 id="清空"><a href="#清空" class="headerlink" title="清空"></a>清空</h3><p>想要将非空数组的内容清空，最快捷的方式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.length = 0</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h3><p>直接引用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" target="_blank" rel="noopener">MDN</a>的例子。</p>
<blockquote>
<p>concat() 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr1 = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];</span><br><span class="line">var arr2 = [&apos;d&apos;, &apos;e&apos;, &apos;f&apos;];</span><br><span class="line"></span><br><span class="line">var arr3 = arr1.concat(arr2);</span><br><span class="line"></span><br><span class="line">// arr3 is a new array [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot; ]</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><p>呃，使用forEach方式来遍历数组是我刚知道的事 - -（之前都是用的for方法……），顺便记录下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.forEach(function(obj)&#123;</span><br><span class="line">    // 数组循环</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h1 id="几种特殊的写法"><a href="#几种特殊的写法" class="headerlink" title="几种特殊的写法"></a>几种特殊的写法</h1><p>在代码中有些代码片段有些看不懂，于是在SF上进行了提问：<a href="https://segmentfault.com/q/1010000012573448" target="_blank" rel="noopener">看Vue源码，有两段代码写法不知是何意思，求指教~</a>。感谢大家的帮助，这里总结下。<br>第一段是一段在{}里的代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    dataDef.set = function (newData) &#123;</span><br><span class="line">      warn(</span><br><span class="line">        &apos;Avoid replacing instance root $data. &apos; +</span><br><span class="line">        &apos;Use nested data properties instead.&apos;,</span><br><span class="line">        this</span><br><span class="line">      );</span><br><span class="line">    &#125;;</span><br><span class="line">    propsDef.set = function () &#123;</span><br><span class="line">      warn(&quot;$props is readonly.&quot;, this);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这段代码，有的朋友说是块级作用域、隔离作用域。不过另一种说法更可信。那就是我所看到的vue是编译完的的代码。源代码其实在大括号前是有条件的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (process.env.NODE_ENV !== &apos;production&apos;) &#123;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure></p>
<p>再来看下面的代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(function (global, factory) &#123;</span><br><span class="line">    typeof exports === &apos;object&apos; &amp;&amp; typeof module !== &apos;undefined&apos; ? module.exports = factory() :</span><br><span class="line">    typeof define === &apos;function&apos; &amp;&amp; define.amd ? define(factory) :</span><br><span class="line">    (global.Vue = factory());</span><br><span class="line">&#125;(this, (function () &#123; &apos;use strict&apos;;</span><br><span class="line"></span><br><span class="line">&#125;)))</span><br></pre></td></tr></table></figure></p>
<p>这段代码是Vue开头的一段代码，它有两个知识点。</p>
<ul>
<li>立即执行函数 —— 定义函数并立即执行，写法有 <code>(function(){})()</code> 或者 <code>(function(){}())</code> 的形式。</li>
<li>由于过去前端没有模块系统，使用script标签引入的js脚本共享同一个作用域，如果不把代码包起来，很容易产生作用域污染、变量冲突的问题。</li>
</ul>
<p><strong>PS：</strong>这两个问题真是网友的结论，不一定完善。有空我会查资料证实~</p>
<h1 id="其他知识点"><a href="#其他知识点" class="headerlink" title="其他知识点"></a>其他知识点</h1><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/arguments" target="_blank" rel="noopener">Arguments</a> —— 传给函数的参数数组</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new" target="_blank" rel="noopener">new运算符</a> —— 通过构造函数创建对象</li>
<li><code>&quot;development&quot; !== &#39;production’</code>的作用 —— webpack打包判断执行环境是不是生产环境，如果是生产环境会压缩并且没有提示警告之类的东西</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener"> instanceof</a> —— 验证实例对象是否为该构造函数new出来的。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" target="_blank" rel="noopener">in关键字</a> —— 判断某个值是否在数组或对象中。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">Proxy对象</a> —— 创建某个对象，并定义一些行为给该对象。</li>
<li>字符串的 <code>charAt</code> 是获取第几个字符，而 <code>slice</code> 方法是截取某段字符。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" target="_blank" rel="noopener">delete关键字</a> —— 用于删除对象中的某个关键字。</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener">call()方法</a> —— 函数的调用，第一个参数为this，之后为函数定义参数。试验了下 <code>fun(a, b)</code> 和 <code>fun.call(this, a, b)</code> 两种写法效果一致。另外还可以看下 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="noopener">apply()方法</a></li>
</ul>
<p><strong>PS：</strong>都是从MDN中找到的资料，多查MDN让我受益良多。</p>
<h1 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h1><p>还在学习Vue源码中……看了很多文章、也看了一遍源码。内容太多，千头万绪，容我理清之后，用自己的文字把Vue的源码学习记录分享出来。一些值得记录下来的知识点和心得会继续在本文中更新。<br>最后，想学习Vue源码的同学可以去买<a href="https://item.jd.com/12028224.html?dist=jd" target="_blank" rel="noopener">《Vue.js权威指南》</a>这本书，虽然许多章节内容和<a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">官网</a>是重复的，不过源码解析部分值得一看。我也正配合着这本书和源码在学习Vue。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/Vue源码学习笔记/" data-id="cjdcg4q87000b1wbtbulcm46s" class="article-share-link" data-share="baidu" data-title="Vue源码学习笔记">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/Vue源码学习笔记/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-Weex控制Android返回键解决方案" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/Weex控制Android返回键解决方案/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/Weex控制Android返回键解决方案/">Weex控制Android返回键解决方案</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>正在深入倒腾weex，希望可以将weex用在项目中。这里找出了weex控制Android返回键的方法。</p>
</blockquote>
<h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>项目使用的是Vue+VueRouter的单页应用来写Weex的，现有以下需求。</p>
<ul>
<li>当页面不在首页上时，返回上一页面。 <code>this.$router.go(-1)</code></li>
<li>当页面在首页是，关闭当前Android应用</li>
</ul>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="Android和Weex的通信"><a href="#Android和Weex的通信" class="headerlink" title="Android和Weex的通信"></a>Android和Weex的通信</h2><h3 id="Android-to-Weex"><a href="#Android-to-Weex" class="headerlink" title="Android to Weex"></a>Android to Weex</h3><p>使用的是<a href="http://weex.apache.org/cn/references/modules/globalevent.html" target="_blank" rel="noopener">globalEvent</a>来实现的。我们在 Android 的返回按钮事件中触发 <code>globalEvent</code>，在 Weex 中监听该 <code>globalEvent</code>。</p>
<p><strong>Android</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public void onBackPressed()&#123;</span><br><span class="line">  Map&lt;String,Object&gt; params=new HashMap&lt;&gt;();</span><br><span class="line">  params.put(&quot;name&quot;,&quot;returnmsg&quot;);</span><br><span class="line">  mWXSDKInstance.fireGlobalEventCallback(&quot;androidback&quot;,params);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Weex</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">globalEvent.addEventListener(&apos;androidback&apos;, function (e) &#123;</span><br><span class="line">  // 这里就可以做返回事件操作了，如返回上一页或退出应用</span><br><span class="line">  // that.$router.go(-1)</span><br><span class="line">  // weex.requireModule(&apos;close&apos;).closeApp()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="Weex-to-Android"><a href="#Weex-to-Android" class="headerlink" title="Weex to Android"></a>Weex to Android</h3><p>而Weex对Android的通信使用<a href="http://weex.apache.org/cn/references/advanced/extend-to-android.html#Module-扩展" target="_blank" rel="noopener">Module扩展</a>来实现。通过在Android中创建WXModule并在Application中注册后，Weex调用该Module触发Android事件。下面我们来一步步实现。</p>
<p><strong>1. Android中创建CloseModule</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class CloseModule extends WXModule &#123;</span><br><span class="line"></span><br><span class="line">    @JSMethod(uiThread = false)</span><br><span class="line">    public void closeApp() &#123;</span><br><span class="line">        LogUtil.e(&quot;触发关闭效果&quot;);</span><br><span class="line">        CacheActivity.finishActivity();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>2. 在Application中注册Module</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class WXApplication extends Application &#123;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void onCreate() &#123;</span><br><span class="line">    super.onCreate();</span><br><span class="line">    InitConfig config = new InitConfig.Builder().setImgAdapter(new ImageAdapter()).build();</span><br><span class="line">    WXSDKEngine.initialize(this, config);</span><br><span class="line">    try &#123;</span><br><span class="line">      ...</span><br><span class="line">      WXSDKEngine.registerModule(&quot;close&quot;, CloseModule.class);</span><br><span class="line">      ...</span><br><span class="line">    &#125; catch (WXException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>3. 在Weex中使用</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weex.requireModule(&apos;close&apos;).closeApp()</span><br></pre></td></tr></table></figure></p>
<p>这样调用Module之后就可以对Android做许多事情了。</p>
<h2 id="退出Activity"><a href="#退出Activity" class="headerlink" title="退出Activity"></a>退出Activity</h2><p>这里我还遇到了一个问题，就是在Weex提供的WXModule中如何退出Activity，解决方案为<a href="http://www.cnblogs.com/jenson138/p/4516568.html" target="_blank" rel="noopener">android 关闭多个或指定activity</a>,这篇文章让我可以非常优雅的管理我的Activity。简单写下用法.<br><strong>1. 在每个Activity的onCreate方法中将Activity对象添加到List中</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">  ...</span><br><span class="line">  CacheActivity.addActivity(NetworkActivity.this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>2. 在Module中去关闭Activity</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CacheActivity.finishActivity();</span><br></pre></td></tr></table></figure></p>
<p><strong>3. 当然，别忘了把CacheActivity的代码贴到项目中去</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">package com.weex.sample.utlis;</span><br><span class="line"></span><br><span class="line">import android.app.Activity;</span><br><span class="line">import java.util.LinkedList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class CacheActivity &#123;</span><br><span class="line">    public static List&lt;Activity&gt; activityList = new LinkedList&lt;Activity&gt;();</span><br><span class="line"></span><br><span class="line">    public CacheActivity() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 添加到Activity容器中</span><br><span class="line">     */</span><br><span class="line">    public static void addActivity(Activity activity) &#123;</span><br><span class="line">        if (!activityList.contains(activity)) &#123;</span><br><span class="line">            activityList.add(activity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 便利所有Activigty并finish</span><br><span class="line">     */</span><br><span class="line">    public static void finishActivity() &#123;</span><br><span class="line">        for (Activity activity : activityList) &#123;</span><br><span class="line">            activity.finish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 结束指定的Activity</span><br><span class="line">     */</span><br><span class="line">    public static void finishSingleActivity(Activity activity) &#123;</span><br><span class="line">        if (activity != null) &#123;</span><br><span class="line">            if (activityList.contains(activity)) &#123;</span><br><span class="line">                activityList.remove(activity);</span><br><span class="line">            &#125;</span><br><span class="line">            activity.finish();</span><br><span class="line">            activity = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 结束指定类名的Activity 在遍历一个列表的时候不能执行删除操作，所有我们先记住要删除的对象，遍历之后才去删除。</span><br><span class="line">     */</span><br><span class="line">    public static void finishSingleActivityByClass(Class&lt;?&gt; cls) &#123;</span><br><span class="line">        Activity tempActivity = null;</span><br><span class="line">        for (Activity activity : activityList) &#123;</span><br><span class="line">            if (activity.getClass().equals(cls)) &#123;</span><br><span class="line">                tempActivity = activity;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        finishSingleActivity(tempActivity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Over！继续倒腾Weex中……遇到问题继续总结。欢迎留言交流~</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/Weex控制Android返回键解决方案/" data-id="cjdcg4q89000c1wbtixqp6nf7" class="article-share-link" data-share="baidu" data-title="Weex控制Android返回键解决方案">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/Weex控制Android返回键解决方案/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-将表单从jQuery转Vue框架实践总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/将表单从jQuery转Vue框架实践总结/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/将表单从jQuery转Vue框架实践总结/">将表单从jQuery转Vue框架实践总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>工作需要，将公司项目从jQuery转成Vue来写。这里分享下转变项目的过程并写了一个小demo，希望能对遇到同样问题的朋友一些帮助。<br>PS： 本人Android开发，兼职前端，前端知识浅薄，有什么不对的地方还请指出，大家共同进步。谢谢~<br>由于代码较多，我把源码放在了博客最后了。</p>
</blockquote>
<h1 id="jQuery和Vue的区别"><a href="#jQuery和Vue的区别" class="headerlink" title="jQuery和Vue的区别"></a>jQuery和Vue的区别</h1><p>jQuery是使用选择器（$）选取DOM对象，对其进行赋值、取值、事件绑定等操作，其实和原生的HTML的区别只在于可以更方便的选取和操作DOM对象，而数据和界面是在一起的。比如需要获取label标签的内容：<code>$(&quot;lable&quot;).val();</code>,它还是依赖DOM元素的值。<br>Vue则是通过Vue对象将数据和View完全分离开来了。对数据进行操作不再需要引用相应的DOM对象，可以说数据和View是分离的，他们通过Vue对象这个vm实现相互的绑定。这就是传说中的MVVM。</p>
<h1 id="jQuery-to-Vue"><a href="#jQuery-to-Vue" class="headerlink" title="jQuery to Vue"></a>jQuery to Vue</h1><h2 id="1-导入Vue-js，去除jQuery。"><a href="#1-导入Vue-js，去除jQuery。" class="headerlink" title="1. 导入Vue.js，去除jQuery。"></a>1. 导入Vue.js，去除jQuery。</h2><p>下载Vue.js，导入工程,我将其放在头文件中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;vue.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p><a href="http://cn.vuejs.org/guide/installation.html" target="_blank" rel="noopener">Vue.js下载地址</a></p>
<h2 id="2-根视图id绑定"><a href="#2-根视图id绑定" class="headerlink" title="2. 根视图id绑定"></a>2. 根视图id绑定</h2><p>为最外层的div标签定义id，然后使用Vue的el属性进行绑定<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h2&gt;学生信息登记&lt;/h2&gt;</span><br><span class="line">        ...</span><br><span class="line">        &lt;label&gt;&#123;&#123; result &#125;&#125;&lt;/label&gt;    </span><br><span class="line">&lt;/div&gt;</span><br><span class="line">...</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    new Vue(&#123;</span><br><span class="line">        el: &apos;#app&apos;,</span><br><span class="line">        ...</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h2 id="3-为input添加v-model"><a href="#3-为input添加v-model" class="headerlink" title="3. 为input添加v-model"></a>3. 为input添加v-model</h2><p>使用v-model属性将input标签的value值绑定到data的相应数据中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;label&gt;姓名：&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;label&gt;性别：&lt;/label&gt;</span><br><span class="line">    &lt;input id=&quot;sex01&quot; type=&quot;radio&quot; value=&quot;1&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;sex01&quot;&gt;男&lt;/label&gt;</span><br><span class="line">    &lt;input id=&quot;sex02&quot; type=&quot;radio&quot; value=&quot;2&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;sex02&quot;&gt;女&lt;/label&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;label&gt;年龄：&lt;/label&gt;</span><br><span class="line">    &lt;select v-model=&quot;age&quot;&gt;</span><br><span class="line">        &lt;option selected&gt;18&lt;/option&gt;</span><br><span class="line">        &lt;option&gt;19&lt;/option&gt;</span><br><span class="line">        &lt;option&gt;20&lt;/option&gt;</span><br><span class="line">        &lt;option&gt;21&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;&lt;/div&gt;&lt;div&gt;</span><br><span class="line">    &lt;label&gt;党员：&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; v-model=&quot;member&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>注意上方的v-model，我们在Vue对象的data属性中绑定数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    data: &#123;</span><br><span class="line">        name: &apos;&apos;,</span><br><span class="line">        sex: &apos;&apos;,</span><br><span class="line">        age: &apos;&apos;,</span><br><span class="line">        member: &apos;&apos;,</span><br><span class="line">        result: &apos;&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>到这里就实现了将表单input框和数据的绑定。更多Vue表单绑定可以查看<a href="http://cn.vuejs.org/guide/forms.html" target="_blank" rel="noopener">表单控件绑定</a></p>
<h2 id="4-删除id、name这些用于jQuery的属性"><a href="#4-删除id、name这些用于jQuery的属性" class="headerlink" title="4. 删除id、name这些用于jQuery的属性"></a>4. 删除id、name这些用于jQuery的属性</h2><p>在使用jQuery时，在HTML中需要定义大量的id、name之类的属性用于jQuery选择器获取元素。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; id=&quot;name&quot;&gt;</span><br><span class="line">...</span><br><span class="line">var name = $(&apos;#name&apos;).val();</span><br></pre></td></tr></table></figure></p>
<p>我们这里就不需要了。去除HTML中的这些属性。<br>（其实这里v-model和id的作用有些类似，都是一个桥梁作用。我在修改的时候偷懒直接将id改成v-model，后面的name不改~）</p>
<h2 id="5-将点击事件onclick改为v-on-click"><a href="#5-将点击事件onclick改为v-on-click" class="headerlink" title="5. 将点击事件onclick改为v-on:click"></a>5. 将点击事件onclick改为v-on:click</h2><p>Vue提供了v-on来监听DOM事件，如demo中的点击事件监听属性v-on:click。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id=&quot;btnCommit&quot; v-on:click=&quot;commit&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">&lt;button id=&quot;btnReset&quot; v-on:click=&quot;reset&quot;&gt;重置&lt;/button&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后在Vue对象的methods属性中创建这两个事件方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">new Vue (&#123;</span><br><span class="line">    ...</span><br><span class="line">    methods: &#123;</span><br><span class="line">        commit: function () &#123;...&#125;,</span><br><span class="line">        reset: function () &#123;...&#125;,</span><br><span class="line">    ...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>另外，Vue还提供了其他v-on:属性，如v-on:change、v-on:keyup等。具体请看：<a href="http://cn.vuejs.org/guide/events.html" target="_blank" rel="noopener">方法与事件处理</a></p>
<h2 id="6-引用数据"><a href="#6-引用数据" class="headerlink" title="6. 引用数据"></a>6. 引用数据</h2><p>作为MVVM，当然是双向绑定的。Vue用v-model属性使input可以修改数据内容，实现界面修改数据；使用双大括号来引用数据内容，实现数据修改界面。<br>具体写法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;label&gt;&#123;&#123; result &#125;&#125;&lt;/label&gt;</span><br><span class="line">...</span><br><span class="line">data: &#123;</span><br><span class="line">    result: &apos;hello world&apos;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如上引用后，数据<code>hello world</code>将会实时同步显示在labal标签上，每当result数据有所改变，label的内容立即会改变。</p>
<h2 id="7-替换ready方法"><a href="#7-替换ready方法" class="headerlink" title="7. 替换ready方法"></a>7. 替换ready方法</h2><p>jQuery中为我们提供了一个document的ready方法，Vue中有ready属性，它们的触发时间差不多，具体要参考各自的生命周期。<br><strong>jQuery写法：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(document).ready(function () &#123;</span><br><span class="line">    alert(&quot;加载完成&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>Vue写法：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">new Vue (&#123;</span><br><span class="line">    ...</span><br><span class="line">    ready: function () &#123;</span><br><span class="line">        alert(&quot;加载完成&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="8-修改获取和修改元素属性的方式"><a href="#8-修改获取和修改元素属性的方式" class="headerlink" title="8.修改获取和修改元素属性的方式"></a>8.修改获取和修改元素属性的方式</h2><p>这是jQuery和Vue的最大不同点了。先看代码:<br><strong>jQuery:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var name = $(&apos;#name&apos;).val();</span><br><span class="line">var sex = &apos;&apos;;</span><br><span class="line">if (getChackedValue(&apos;input[name=sex]&apos;) == 1)&#123;</span><br><span class="line">    sex = &apos;男&apos;</span><br><span class="line">&#125;else if (getChackedValue(&apos;input[name=sex]&apos;) == 2)&#123;</span><br><span class="line">    sex = &apos;女&apos;</span><br><span class="line">&#125;</span><br><span class="line">var age = $(&apos;#age&apos;).val();</span><br><span class="line">var member = &apos;&apos;;</span><br><span class="line">if($(&apos;#member&apos;).is(&apos;:checked&apos;)) &#123;</span><br><span class="line">    member = &apos;党员&apos;;</span><br><span class="line">&#125;else &#123;</span><br><span class="line">    member = &quot;非党员&quot;;</span><br><span class="line">&#125;</span><br><span class="line">var result = name + &apos; &apos; + sex + &apos; &apos; + age + &apos; &apos; + member;</span><br><span class="line">$(&apos;#result&apos;).text(result);</span><br></pre></td></tr></table></figure></p>
<p>这是显示表单结果的函数。jQuery是通过美元符号$来获取指定元素，然后通过val()、text()等方法获取指定元素的内容或者为指定元素赋值。<br><strong>Vue：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var name = this.name;</span><br><span class="line">var sex = &apos;&apos;;</span><br><span class="line">if (this.sex == 1)&#123;</span><br><span class="line">    sex = &apos;男&apos;;</span><br><span class="line">&#125;else if (this.sex == 2)&#123;</span><br><span class="line">    sex = &apos;女&apos;;</span><br><span class="line">&#125;</span><br><span class="line">var age = this.age;</span><br><span class="line">var member = &apos;&apos;;</span><br><span class="line">if (this.member)&#123;</span><br><span class="line">    member = &apos;党员&apos;;</span><br><span class="line">&#125;else &#123;</span><br><span class="line">    member = &apos;非党员&apos;</span><br><span class="line">&#125;</span><br><span class="line">var result = name + &apos; &apos; + sex + &apos; &apos; + age + &apos; &apos; + member;</span><br><span class="line">this.result = result;</span><br></pre></td></tr></table></figure></p>
<p>同样是显示表单结果的函数。Vue不需要获取DOM元素，只需要获得和修改data对象中的数据就可以了。<br>这里需要注意的是：要用jQuery获得或者修改一组radio很麻烦，需要操作checked属性；而Vue处理radio只需通过数据，数据内容就是radio的value值，修改value值radio就会自动选择目标项。checkbox也是如此，jQuery要使用checked，而Vue只需要知道checkbox绑定的data为true或者false就可以知道checkbox是否被选中。</p>
<h2 id="9-Vue使用watch方法测试"><a href="#9-Vue使用watch方法测试" class="headerlink" title="9. Vue使用watch方法测试"></a>9. Vue使用watch方法测试</h2><p>Vue的watch方法真的挺好用，当程序出现问题时可以将出问题的data使用watch打log，每当该数据发生变化时，watch方法都会被触发。很好用~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    &apos;sex&apos;: function (val, oldVal) &#123;</span><br><span class="line">        console.log(&apos;oldVal = &apos; + oldVal + &apos; val = &apos; + val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="总结心得"><a href="#总结心得" class="headerlink" title="总结心得"></a>总结心得</h1><p>jQuery完全是通过美元符号来对各种元素进行操作！根据HTML元素的id、name等属性来获取到元素并对其进行取值、赋值、修改属性能行为。<br>Vue的使用过程 是：先绘制HTML界面，然后在需要绑定数据的地方写下v-model、v-on等这些绑定属性和方法，在显示数据内容的地方使用双大括号显示内容。然后在Vue中，el属性绑定根视图的id，data属性定义并初始化v-model、双大括号用到的数据和一些其他数据。methods属性定义在v-on中用到的和一些其他方法。更新界面修改数据实现。而修改数据通过操作界面实现。<br>写完了这个demo后，感觉到Vue的确有它的魅力所在。它的MVVM让业务逻辑变得更加清晰和简单。</p>
<h1 id="所有代码"><a href="#所有代码" class="headerlink" title="所有代码"></a>所有代码</h1><h2 id="jQueryPage"><a href="#jQueryPage" class="headerlink" title="jQueryPage"></a>jQueryPage</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;index&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;jquery-2.2.3.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;学生信息登记&lt;/h2&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;姓名：&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; id=&quot;name&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;性别：&lt;/label&gt;</span><br><span class="line">            &lt;input id=&quot;sex01&quot; type=&quot;radio&quot; value=&quot;1&quot; name=&quot;sex&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;sex01&quot;&gt;男&lt;/label&gt;</span><br><span class="line">            &lt;input id=&quot;sex02&quot; type=&quot;radio&quot; value=&quot;2&quot; name=&quot;sex&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;sex02&quot;&gt;女&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;年龄：&lt;/label&gt;</span><br><span class="line">            &lt;select id=&quot;age&quot;&gt;</span><br><span class="line">                &lt;option selected&gt;18&lt;/option&gt;</span><br><span class="line">                &lt;option&gt;19&lt;/option&gt;</span><br><span class="line">                &lt;option&gt;20&lt;/option&gt;</span><br><span class="line">                &lt;option&gt;21&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;党员：&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; id=&quot;member&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;button id=&quot;btnCommit&quot; onclick=&quot;commit()&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">        &lt;button id=&quot;btnReset&quot; onclick=&quot;reset()&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;label id=&quot;result&quot;&gt;&lt;/label&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        $(document).ready(function () &#123;</span><br><span class="line">            alert(&quot;加载完成&quot;);</span><br><span class="line">        &#125;);</span><br><span class="line">        function commit() &#123;</span><br><span class="line">            var name = $(&apos;#name&apos;).val(); </span><br><span class="line">            var sex = &apos;&apos;;</span><br><span class="line">            if (getChackedValue(&apos;input[name=sex]&apos;) == 1)&#123;</span><br><span class="line">                sex = &apos;男&apos;</span><br><span class="line">            &#125;else if (getChackedValue(&apos;input[name=sex]&apos;) == 2)&#123;</span><br><span class="line">                sex = &apos;女&apos;</span><br><span class="line">            &#125;</span><br><span class="line">            var age = $(&apos;#age&apos;).val();</span><br><span class="line">            var member = &apos;&apos;;</span><br><span class="line">            if($(&apos;#member&apos;).is(&apos;:checked&apos;)) &#123;</span><br><span class="line">                member = &apos;党员&apos;;</span><br><span class="line">            &#125;else &#123;</span><br><span class="line">                member = &quot;非党员&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            var result = name + &apos; &apos; + sex + &apos; &apos; + age + &apos; &apos; + member;</span><br><span class="line">            $(&apos;#result&apos;).text(result);</span><br><span class="line">        &#125;</span><br><span class="line">        function reset() &#123;</span><br><span class="line">            $(&apos;#result&apos;).text(&apos;&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">        function getChackedValue (CheckboxId) &#123;</span><br><span class="line">            var value = 0;</span><br><span class="line">            var i = 0;</span><br><span class="line">            $(CheckboxId).each(function () &#123;</span><br><span class="line">                if($(CheckboxId).eq(i).is(&apos;:checked&apos;))                &#123;</span><br><span class="line">                    value = $(CheckboxId).eq(i).val(); </span><br><span class="line">                   return;</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;);</span><br><span class="line">            return value;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="VuePage"><a href="#VuePage" class="headerlink" title="VuePage"></a>VuePage</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; xmlns:v-on=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;index&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h2&gt;学生信息登记&lt;/h2&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;姓名：&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; placeholder=&quot;请输入姓名&quot; v-model=&quot;name&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;性别：&lt;/label&gt;</span><br><span class="line">            &lt;input id=&quot;sex01&quot; type=&quot;radio&quot; value=&quot;1&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;sex01&quot;&gt;男&lt;/label&gt;</span><br><span class="line">            &lt;input id=&quot;sex02&quot; type=&quot;radio&quot; value=&quot;2&quot; v-model=&quot;sex&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;sex02&quot;&gt;女&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;年龄：&lt;/label&gt;</span><br><span class="line">            &lt;select v-model=&quot;age&quot;&gt;</span><br><span class="line">                &lt;option selected&gt;18&lt;/option&gt;</span><br><span class="line">                &lt;option&gt;19&lt;/option&gt;</span><br><span class="line">                &lt;option&gt;20&lt;/option&gt;</span><br><span class="line">                &lt;option&gt;21&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;党员：&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; v-model=&quot;member&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;button id=&quot;btnCommit&quot; v-on:click=&quot;commit&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">        &lt;button id=&quot;btnReset&quot; v-on:click=&quot;reset&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;label&gt;&#123;&#123; result &#125;&#125;&lt;/label&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        new Vue(&#123;</span><br><span class="line">            el: &apos;#app&apos;,</span><br><span class="line">            data: &#123;</span><br><span class="line">                name: &apos;&apos;,</span><br><span class="line">                sex: &apos;&apos;,</span><br><span class="line">                age: &apos;&apos;,</span><br><span class="line">                member: &apos;&apos;,</span><br><span class="line">                result: &apos;&apos;</span><br><span class="line">            &#125;, </span><br><span class="line">            ready: function () &#123;</span><br><span class="line">                alert(&quot;加载完成&quot;);</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                commit: function () &#123;</span><br><span class="line">                    var name = this.name;</span><br><span class="line">                    var sex = &apos;&apos;;</span><br><span class="line">                    if (this.sex == 1)&#123;</span><br><span class="line">                        sex = &apos;男&apos;;</span><br><span class="line">                    &#125;else if (this.sex == 2)&#123;</span><br><span class="line">                        sex = &apos;女&apos;;</span><br><span class="line">                    &#125;</span><br><span class="line">                    var age = this.age;</span><br><span class="line">                    var member = &apos;&apos;;</span><br><span class="line">                    if (this.member)&#123;</span><br><span class="line">                        member = &apos;党员&apos;;</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        member = &apos;非党员&apos;;</span><br><span class="line">                    &#125;</span><br><span class="line">                    var result = name + &apos; &apos; + sex + &apos; &apos; + age + &apos; &apos; + member;</span><br><span class="line">                    this.result = result;</span><br><span class="line">                &#125;,</span><br><span class="line">                reset: function () &#123;</span><br><span class="line">                    this.result = &apos;&apos;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            watch: &#123;</span><br><span class="line">                &apos;sex&apos;: function (val, oldVal) &#123;</span><br><span class="line">                    console.log(&apos;oldVal = &apos; + oldVal + &apos; val = &apos; + val);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/将表单从jQuery转Vue框架实践总结/" data-id="cjdcg4q8e000g1wbt7sfgxkts" class="article-share-link" data-share="baidu" data-title="将表单从jQuery转Vue框架实践总结">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/将表单从jQuery转Vue框架实践总结/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-weex 踩坑记（持续更新中……）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/weex 踩坑记（持续更新中……）/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/weex 踩坑记（持续更新中……）/">weex 踩坑记（持续更新中……）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>消失了一个月，努力为新项目倒腾 weex 中，记录一下遇到的问题。之后还会持续更新~</p>
</blockquote>
<p>目前，我使用的 <code>weex</code> 都是在<a href="http://weex.apache.org/cn/guide/integrate-to-your-app.html" target="_blank" rel="noopener">集成Weex到Android</a>来做的，项目使用的是 <code>weex-toolkit</code> 生成的项目模板，代码发布使用webpack打包成js放到服务器上，Android端读取服务器上的js来实现weex项目的。</p>
<h1 id="杂七杂八的一些知识点"><a href="#杂七杂八的一些知识点" class="headerlink" title="杂七杂八的一些知识点"></a>杂七杂八的一些知识点</h1><ul>
<li><p>屏幕宽度为 750，高度一直没查到，我用的是1300，刚好显示下。长度单位要么不写，要么就是 px，效果都一样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  height: 1300;</span><br><span class="line">  width: 750px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>布局只支持 盒子模型、flex布局、relative定位，其他一些CSS不太支持。</p>
</li>
<li>CSS的 margin、padding、border 不支持缩写。像 <code>border:5px solid red;</code> 这样写是不行滴。</li>
<li>暂不支持像 <a href="http://mint-ui.github.io/#!/zh-cn" target="_blank" rel="noopener">mint-ui</a> 这类 Vue Web UI 组件库。</li>
<li>页面的跳转可以通过 <a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="noopener">vue-router</a> 或者 weex 的 <a href="http://weex.apache.org/cn/references/modules/navigator.html" target="_blank" rel="noopener">navigator</a> 组件来实现，可以参考我提问的<a href="https://segmentfault.com/q/1010000009999942" target="_blank" rel="noopener">Weex的页面跳转方案的选择</a>。</li>
<li>在 Android 中，<code>navigator</code> 的 <code>push</code> 方法跳转的 <code>Activity</code> 界面是需要处理的，需要创建一个带有特殊 <code>&lt;intent-filter&gt;</code> 标签的 Activity。假如手机中没有带有该 <code>&lt;intent-filter&gt;</code> 的 <code>Activity</code> 就不会发生跳转，报 <code>ActivityNotFoundException</code> 错误。而如果有多个带有该 <code>&lt;intent-filter&gt;</code> 的<code>Activity</code>，Android 系统会让我们去进行选择。注：这个带 <code>&lt;intent-filter&gt;</code> 的Activity 是跨 APP 的。可以参照<a href="http://blog.csdn.net/violetjack0808/article/details/74390249" target="_blank" rel="noopener">WEEX 使用navigator跳转Android系统出现ActivityNotFoundException报错</a></li>
<li><code>image</code> 必须设置宽高，否则不显示。也不能使用 <code>img</code> 来显示图片</li>
<li>Android 手机中显示图片需要在 <code>ImageAdapter</code> 中进行处理，官网只提供了处理的位置（有注释），但未对图片进行处理。我使用了 <a href="https://github.com/square/picasso" target="_blank" rel="noopener">picasso</a> 来对图片进行显示。</li>
<li>native 和 weex 的通信通过自定义module或者发送全局事件来完成。参考<a href="http://blog.csdn.net/violetjack0808/article/details/74002599" target="_blank" rel="noopener">Weex控制Android返回键解决方案</a>里面有 native 端和 weex 端交互的细节。</li>
<li>weex 在Android手机中的调试：<ul>
<li>在 weex 中使用 console.log 方法来打 log，打开Android Studio，在 logcat中可以过滤关键词 jslog 来获取log数据。</li>
<li>如果 weex 报错，可以在 logcat 中查找错误，一般错误都好几行，很好找。</li>
<li>建议使用ESLint先过滤一些简单的语法错误，减少手机端的调试成本。</li>
</ul>
</li>
<li>weex 其他调试方式<ul>
<li>手机安装 <a href="http://weex.apache.org/cn/playground.html" target="_blank" rel="noopener">Playground</a>，运行 weex 项目，网页打开 <code>http://localhost:8080/</code> 扫描二维码进行调试。</li>
<li>可以在<a href="http://dotwe.org/vue/025db54e37123ab5336a4b848397660f" target="_blank" rel="noopener">Playground网页端</a>进行代码调试，但感觉遇到有组件的项目不太好调试。</li>
<li>在项目运行(<code>npm run serve</code>)后，直接打开 <code>http://localhost:8080/</code> 也能看到网页版本的项目，可以直接调试，不过一些设计Native端的组件用不了。</li>
</ul>
</li>
<li>weex中的标签只支持官方提供的<a href="http://weex.apache.org/cn/references/components/index.html" target="_blank" rel="noopener">内部组件</a>，因为那些是会被渲染成native界面的。</li>
<li><code>v-bind:class</code>只能使用数组语法</li>
<li><code>stream</code> 的 <code>url</code> 选项好像默认不支持中文，需要将中文转为 <code>UTF-8</code> 来传输。</li>
<li>weex 的 css 只支持 class 选择器，并且只支持单个类的选择器，如<code>.item .item-content {}</code>是错误的~</li>
<li>weex有点击特效的，参照<a href="http://weex.apache.org/cn/references/common-style.html#伪类-v0-9-5" target="_blank" rel="noopener">伪类</a>。</li>
<li>不支持 <code>display:none</code> 即不支持 <code>v-show</code>，需要使用 <code>v-if</code> 来实现显示和隐藏。</li>
<li>默认flex布局，要设置 <code>flex-direction</code>。我怀疑我的web端显示错误可能就是没有设置 <code>flex-direction</code>，移动端没有错误是因为默认 <code>flex-direction:column</code></li>
<li>存储、网络等很多都是异步的，需要注意顺序</li>
<li><code>storage</code> 只能存储字符串，取值后再转为json</li>
</ul>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>暂时整理这么多，之后还会有其他的东西我会持续更新的~<br>Android 端的 <a href="https://github.com/violetjack/WeexComponents" target="_blank" rel="noopener">demo</a> 我会放到我的 Github 上去，之后我会让我的 IOS 小伙伴给一版 IOS 版本的壳子，到时候直接写weex项目，Android端和IOS端只需要更改一下渲染的js文件路径就可以显示了。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a href="https://github.com/dreamochi/DayDayUp/issues/77" target="_blank" rel="noopener">weex填坑注意事项</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/weex 踩坑记（持续更新中……）/" data-id="cjdcg4q8c000e1wbtnq3nddd3" class="article-share-link" data-share="baidu" data-title="weex 踩坑记（持续更新中……）">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/weex 踩坑记（持续更新中……）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-weex项目弃坑小结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/weex项目弃坑小结/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/weex项目弃坑小结/">weex项目弃坑小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>由于<code>weex</code> 的不稳定性，所以中途放弃了 <code>weex</code> 方案。转而使用 Android原生开发。今天项目第一阶段开发结束，来总结一下 <code>weex</code> 的一些东西。</p>
</blockquote>
<p><code>weex</code> 相比于原生开发的好处</p>
<ul>
<li>界面搭建速度快，特别是重复性界面。</li>
<li>数据处理方便，尤其是json解析方面。</li>
</ul>
<p>坏处么</p>
<ul>
<li>用的人太少，所以网上资料也很少。</li>
<li>坑还是比较多的，要玩的溜要踩上不少坑。</li>
<li>还是需要一些原生开发的知识才能够玩的溜。</li>
</ul>
<p>说说我这个项目的一些东西吧~</p>
<h2 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h2><p>第一个困扰我的就是页面跳转，我去SF上提问了<a href="https://segmentfault.com/q/1010000009999942" target="_blank" rel="noopener">Weex的页面跳转方案的选择</a>这个问题。</p>
<ul>
<li><code>vue-router</code> 方案由于 <code>Vue</code>和 <code>weex</code> 的差异性，用法有所不同，好像需要使用注入 <code>minixs</code> 机制，挺麻烦的，所以放弃了……这个如果有需要我会再去研究一下的。</li>
<li>第二种方案就是每个页面都是单独的 <code>Activity</code>，各自嵌入一个 <code>weex</code> 页面。但是有个问题：<code>weex</code> 如何与当前 <code>Activity</code> 交互，比如我要从页面A跳转到页面B，我需要 <code>weex</code> 调用 <code>Activity</code> 的 <code>startActivity</code> 方法，这个交互方式我没有找到。不然倒是可以随心所欲的在原生开发和weex之间来回交互。暂时来说我只知道<a href="http://blog.csdn.net/violetjack0808/article/details/74002599" target="_blank" rel="noopener">通过globalEvent和Module扩展来实现两者的交互</a></li>
<li>最后，还是选择了官方推荐的 <code>Navigator</code> 来作为页面跳转的方式。这种方式能够很快速的实现页面跳转。不用瞎折腾~</li>
</ul>
<p>选定方案之后，就要解决几个问题了。多页面打包和跳转所需的 <code>Activity</code> 。</p>
<h3 id="多页面打包"><a href="#多页面打包" class="headerlink" title="多页面打包"></a>多页面打包</h3><p><code>navigator</code> 的跳转方式，需要获取打包好的 <code>weex</code> 的文件路径来进行页面跳转和显示，所以我们就需要多页 <code>weex</code> 文件代表每一个页面。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">navigator.push(&#123;</span><br><span class="line">  url: &apos;http://dotwe.org/raw/dist/519962541fcf6acd911986357ad9c2ed.js&apos;,</span><br><span class="line">  animated: &quot;true&quot;</span><br><span class="line">&#125;, event =&gt; &#123;</span><br><span class="line">  modal.toast(&#123; message: &apos;callback: &apos; + event &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>需要配置 <code>Webpack</code> 来实现这一目的。我将每个页面的入口文件都放在 <code>./src/entrys</code>文件夹下，通过 <code>node</code> 的 <code>fs文件模块</code> 读取里面的入口文件，并将他们传给 <code>entry</code> 入口对象。最后将入口对象配置到 <code>webpack</code> 打包配置中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">var path = require(&apos;path&apos;)</span><br><span class="line">var webpack = require(&apos;webpack&apos;)</span><br><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">var files = fs.readdirSync(&apos;./src/entrys&apos;)</span><br><span class="line">var entry = &#123;&#125;</span><br><span class="line">files.forEach(function (file) &#123;</span><br><span class="line">  var item = file.replace(&apos;.js&apos;, &apos;&apos;)</span><br><span class="line">  entry[item] = path.resolve(&apos;./src/entrys/&apos; + file)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">var bannerPlugin = new webpack.BannerPlugin(</span><br><span class="line">  &apos;// &#123; &quot;framework&quot;: &quot;Vue&quot; &#125;\n&apos;, &#123; raw: true &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">function getBaseConfig() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    entry: entry,</span><br><span class="line">    output: &#123;</span><br><span class="line">      path: &apos;dist&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123;</span><br><span class="line">        &apos;@&apos;: path.resolve(&apos;./src&apos;),</span><br><span class="line">        &apos;views&apos;: path.resolve(&apos;./src/views&apos;),</span><br><span class="line">        &apos;utils&apos;: path.resolve(&apos;./src/utils&apos;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">      // ESLint配置</span><br><span class="line">      preLoaders: [&#123;</span><br><span class="line">        test: /\.vue$/,</span><br><span class="line">        loader: &apos;eslint&apos;,</span><br><span class="line">        exclude: /node_modules/</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        loader: &apos;eslint&apos;,</span><br><span class="line">        exclude: /node_modules/</span><br><span class="line">      &#125;</span><br><span class="line">      ],</span><br><span class="line">      // 如果注释掉以上这段将不产生ESLint检查</span><br><span class="line">      loaders: [&#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        loader: &apos;babel&apos;,</span><br><span class="line">        exclude: /node_modules/</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        test: /\.vue(\?[^?]+)?$/,</span><br><span class="line">        loaders: []</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">    vue: &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [bannerPlugin]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var webConfig = getBaseConfig()</span><br><span class="line">webConfig.output.filename = &apos;[name].web.js&apos;</span><br><span class="line">webConfig.module.loaders[1].loaders.push(&apos;vue&apos;)</span><br><span class="line"></span><br><span class="line">var weexConfig = getBaseConfig()</span><br><span class="line">weexConfig.output.filename = &apos;[name].weex.js&apos;</span><br><span class="line">weexConfig.module.loaders[1].loaders.push(&apos;weex&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = [webConfig, weexConfig]</span><br></pre></td></tr></table></figure></p>
<p>每一个入口文件都会产生两个相应名称的文件，如 <code>sign.js</code> 的入口文件就会生成 <code>sign.weex.js</code> 和 <code>sign.web.js</code> 文件，这里我们只关注 <code>weex</code> 后缀的文件，这就是我们跳转页面所需的文件。具体项目结构请看<a href="https://github.com/violetjack/MobileNurseWeex" target="_blank" rel="noopener">源代码</a><br>更多对于 <code>webpack</code> 的了解可以看<a href="http://blog.csdn.net/violetjack0808/article/details/54915825" target="_blank" rel="noopener">Vue.js学习系列四——Webpack学习实践</a></p>
<h3 id="navigator跳转的Activity哪里来的？"><a href="#navigator跳转的Activity哪里来的？" class="headerlink" title="navigator跳转的Activity哪里来的？"></a>navigator跳转的Activity哪里来的？</h3><p>在使用了 <code>navigator</code> 后一开始发现并没有页面跳转效果，而是报 <code>ActivityNotFoundException</code> 的错误。后来装了 <code>weex</code> 的 playground 之后发现可以跳转了，但是跳转过去的 <code>Activity</code> 有个 ActionBar 和一个性能调试的悬浮窗，是 playground 里面扫二维码显示的结果的那个 <code>Activity</code>。几经查阅后发现原来跳转的 <code>Activity</code> 是一个有着特殊 <code>intent-filter</code> 的 <code>Activity</code> 。<br>关于这个问题我写过一篇文章：<a href="http://blog.csdn.net/violetjack0808/article/details/74390249" target="_blank" rel="noopener">WEEX 使用navigator跳转Android系统出现ActivityNotFoundException报错</a><br>解决方案是我把 Playground 里面的那个 <code>Activity</code> 移到了我的项目中来，并且去除了 <code>ActionBar</code> 和调试工具。然后卸载掉 <code>weex</code>  的 Playground，这样就能愉快的显示 <code>navigator</code> 跳转的 <code>Activity</code> 了。代码请看<a href="https://github.com/violetjack/MobileNurseWeex/blob/master/android/app/src/main/java/com/weex/sample/activity/WXPageActivity.java" target="_blank" rel="noopener">WXPageActivity</a>。</p>
<h2 id="网络通信"><a href="#网络通信" class="headerlink" title="网络通信"></a>网络通信</h2><p>网络通信上我用的是stream，这个很简单。说下两点：<br>第一，stream所用的url需要是UTF-8格式的，如果URL中有中文需要转一下，URL可以参照utf8这个文件。<br>第二，提交数据的时候需要添加头文件。我的项目中是这样~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">stream.fetch(&#123;</span><br><span class="line">  method: StreamType,</span><br><span class="line">  type: &apos;json&apos;,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    &apos;Content-Type&apos;: &apos;application/json&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  url: url,</span><br><span class="line">  body: JSON.stringify(this.DataObj)</span><br><span class="line">&#125;, res =&gt; &#123;</span><br><span class="line">  console.log(res)</span><br><span class="line">  let json = eval(&apos;(&apos; + res.data + &apos;)&apos;)</span><br><span class="line">  modal.alert(&#123;</span><br><span class="line">    message: json.Message</span><br><span class="line">  &#125;, event =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="图片加载"><a href="#图片加载" class="headerlink" title="图片加载"></a>图片加载</h2><p>图片加载需要在<a href="https://github.com/violetjack/MobileNurseWeex/blob/master/android/app/src/main/java/com/weex/sample/ImageAdapter.java" target="_blank" rel="noopener">ImageAdapter</a>中稍作处理，我这里用的是 <code>Picasso</code> 来显示图片的~<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class ImageAdapter implements IWXImgLoaderAdapter &#123;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void setImage(final String url, final ImageView view, WXImageQuality quality, WXImageStrategy strategy) &#123;</span><br><span class="line">        WXSDKManager.getInstance().postOnUiThread(new Runnable() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                if (view == null || view.getLayoutParams() == null) &#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                if (TextUtils.isEmpty(url)) &#123;</span><br><span class="line">                    view.setImageBitmap(null);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                String temp = url;</span><br><span class="line">                if (url.startsWith(&quot;//&quot;)) &#123;</span><br><span class="line">                    temp = &quot;http:&quot; + url;</span><br><span class="line">                &#125;</span><br><span class="line">                if (view.getLayoutParams().width &lt;= 0 || view.getLayoutParams().height &lt;= 0) &#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                Picasso.with(WXEnvironment.getApplication())</span><br><span class="line">                        .load(temp)</span><br><span class="line">                        .into(view);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="页面跳转的数据传输"><a href="#页面跳转的数据传输" class="headerlink" title="页面跳转的数据传输"></a>页面跳转的数据传输</h3><p>这一点上，我只想到了不太优雅的方式——使用 <code>storage</code> 来保存和读取。比如我需要将表单ID传递到下一个页面我是这么做的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">toDetail(AssessID) &#123;</span><br><span class="line">  storage.setItem(&apos;AssessID&apos;, AssessID)</span><br><span class="line">  navigator.push(&#123;</span><br><span class="line">    url: ViewServer + &apos;GAD.weex.js&apos;,</span><br><span class="line">    animated: &apos;true&apos;</span><br><span class="line">  &#125;, event =&gt; &#123;</span><br><span class="line">    console.log(&apos;successful entry&apos;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>到第二个页面去获取数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getData() &#123;</span><br><span class="line">  let that = this</span><br><span class="line">  storage.getItem(&apos;AssessID&apos;, event =&gt; &#123;</span><br><span class="line">    let AssessID = event.data</span><br><span class="line">    console.log(&apos;AssessID = &apos; + AssessID)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>如果是比较多的数据，我会将数据以 <code>json</code> 字符串的形式保存，在需要的时候获取字符串并解析为 <code>json</code> 对象。</p>
<h3 id="如何在返回上一页面时做一些操作？"><a href="#如何在返回上一页面时做一些操作？" class="headerlink" title="如何在返回上一页面时做一些操作？"></a>如何在返回上一页面时做一些操作？</h3><p>我的解决方法是在Activity的onResume方法中发送一个消息，然后在weex端添加监听事件。<br><strong>Android端</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void onResume() &#123;</span><br><span class="line">    super.onResume();</span><br><span class="line">    if (mInstance != null) &#123;</span><br><span class="line">        mInstance.onActivityResume();</span><br><span class="line"></span><br><span class="line">        new Handler().postDelayed(new Runnable() &#123;</span><br><span class="line">            public void run() &#123;</span><br><span class="line">                Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();</span><br><span class="line">                mInstance.fireGlobalEventCallback(&quot;onResume&quot;, params);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, 500);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>weex端</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">addListener() &#123;</span><br><span class="line">     globalEvent.addEventListener(&apos;onResume&apos;, e =&gt; &#123;</span><br><span class="line">       storage.getItem(&apos;PopCallback&apos;, event =&gt; &#123;</span><br><span class="line">         if (event.data === &apos;update level list&apos;) &#123;</span><br><span class="line">           this.loadData()</span><br><span class="line">           storage.setItem(&apos;PopCallback&apos;, &apos;&apos;)</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>由于加载 <code>weex</code> 有一些延时，<code>onResume</code> 往往会比 <code>weex</code> 加载快，所以我在 <code>onResume</code> 中添加了0.5秒延时。之后在 <code>weex</code> 中添加监听器监听 <code>onResume</code> 的生命周期，并监听返回的数据。</p>
<h3 id="如何控制weex的Slider显示第几页"><a href="#如何控制weex的Slider显示第几页" class="headerlink" title="如何控制weex的Slider显示第几页"></a>如何控制weex的Slider显示第几页</h3><p>想实现Android的ViewPager效果，使用了weex提供的slider组件，具体坚决方案看<a href="https://segmentfault.com/q/1010000010728251" target="_blank" rel="noopener">如何控制weex的Slider显示第几页。</a></p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li>图片的存放好像只能是网络图片的URL，所以我将所有图片都放到服务器上让weex去访问。</li>
<li>CSS使用flex布局来做，官网上有例子。也可参照<a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="noopener">Flex 布局教程：语法篇</a>。</li>
</ul>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>啰嗦一大堆，希望某些东西能够对他人有所帮助吧~<br>项目地址<a href="https://github.com/violetjack/MobileNurseWeex" target="_blank" rel="noopener">在此</a>，由于是公司项目，所以把服务器地址去掉了，后端数据获取不了。不过代码都是在的，可以进行参考。希望能对大家有所帮助~<br>最终不用weex的原因么，因为这玩意看似简单，但是想实现点复杂的、和原生交互的功能都得折腾好一会儿。关键还是资料太少，不靠谱，万一哪个地方报个奇怪的错误找不出问题、查不到资料、看不懂源码，那不就挂了嘛~所以，爱折腾玩玩可以，放项目中还是有待考虑。毕竟还是要求稳~</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/weex项目弃坑小结/" data-id="cjdcg4q8d000f1wbts6einayt" class="article-share-link" data-share="baidu" data-title="weex项目弃坑小结">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/weex项目弃坑小结/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-巧用jQuery选择器写表单办法总结（提高效率）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/巧用jQuery选择器写表单办法总结（提高效率）/" class="article-date">
  <time datetime="2018-02-06T08:20:52.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/巧用jQuery选择器写表单办法总结（提高效率）/">巧用jQuery选择器写表单办法总结（提高效率）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>相信很多小伙伴都会遇到需要做表单的需求，就像我现在做的医院项目，茫茫多的表单无穷无尽。一开始做表单使用最笨的方法：一个个span去定义ID，每个数据都用ajax获取后赋值显示，然后在表单提交前一个个用jQuery根据ID获取元素的value，组成一个model来提交给服务器。<br>后来发现使用jQuery可以大大简化这个过程。于是我修改了工作方法，总结了我的一些提高写表单效率的方法。</p>
</blockquote>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>表单中存在最多的无非就是文本、文本框、单选框、多选框。而一些表单中会有几十个甚至几百个选项。我们的目标就是以最高的效率来完成这些表单的数据获取和数据提交。<br><strong>注意：如果元素ID和服务器上获取的json字段的名字是一样的，那么这篇文章或许能对你提高工作效率有所帮助。</strong></p>
<h2 id="文本和文本框"><a href="#文本和文本框" class="headerlink" title="文本和文本框"></a>文本和文本框</h2><p>对于文本和文本框，我们通常需要为元素添加ID来绑定和获取数据。</p>
<h3 id="将数据显示到界面中"><a href="#将数据显示到界面中" class="headerlink" title="将数据显示到界面中"></a>将数据显示到界面中</h3><ul>
<li>用for循环遍历解析成功的JSON数据</li>
<li>通过if判断过滤数据是span的还是input的。</li>
<li>将数据传给和数据名同名的ID元素。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for (var key in json) &#123;</span><br><span class="line">   //过滤type为text的文本框</span><br><span class="line">   if ($(&apos;#&apos; + key).attr(&apos;type&apos;) == &apos;text&apos;) &#123;</span><br><span class="line">       $(&apos;#&apos; + key).val(json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">   if($(&apos;#&apos; + key).prop(&apos;tagName&apos;) == &apos;SPAN&apos;)&#123;</span><br><span class="line">       $(&apos;#&apos; + key).text(json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="快速获取数据对象用于提交服务器"><a href="#快速获取数据对象用于提交服务器" class="headerlink" title="快速获取数据对象用于提交服务器"></a>快速获取数据对象用于提交服务器</h3><ul>
<li>定义空model对象。</li>
<li>通过jQuery选择器获取目标元素的value。</li>
<li>将数据传入model中，对象元素的字段就是HTML元素的ID。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var model = &#123;&#125;;</span><br><span class="line">$(&apos;input[type=&quot;text&quot;]&apos;).each(function () &#123;</span><br><span class="line">   model[$(this).attr(&apos;id&apos;)]=$(this).val();</span><br><span class="line">&#125;);</span><br><span class="line">$(&apos;span&apos;).each(function () &#123;</span><br><span class="line">   model[$(this).attr(&apos;id&apos;)]=$(this).text();</span><br><span class="line">&#125;);</span><br><span class="line">console.log(model);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>按照如下方法，我们只需要照着后端提供的数据字段给HTML定义id，而JS就不需要写太多代码就可以完成表单了。再也不怕表单字段太多了。</p>
<h3 id="全部代码"><a href="#全部代码" class="headerlink" title="全部代码"></a>全部代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;jquery-2.2.3.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;姓名：&lt;input type=&quot;text&quot; id=&quot;name&quot;&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;性别：&lt;input type=&quot;text&quot; id=&quot;sex&quot;&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;年龄：&lt;input type=&quot;text&quot; id=&quot;age&quot;&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;时间：&lt;input type=&quot;text&quot; id=&quot;time&quot;&gt;&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;a：&lt;span id=&quot;param01&quot;&gt;1&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;b：&lt;span id=&quot;param02&quot;&gt;2&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;c：&lt;span id=&quot;param03&quot;&gt;3&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;d：&lt;span id=&quot;param04&quot;&gt;4&lt;/span&gt;&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button onclick=&quot;showResult()&quot;&gt;显示结果&lt;/button&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //多条input或者span的快速赋值</span><br><span class="line">        //data是模拟服务器返回的JSON数据</span><br><span class="line">        var data = &apos;&#123;&quot;name&quot;:&quot;张三&quot;,&quot;sex&quot;:&quot;女&quot;,&quot;age&quot;:22,&quot;time&quot;:&quot;2016-5-10&quot;,&quot;param01&quot;:111,&quot;param02&quot;:222,&quot;param03&quot;:333,&quot;param04&quot;:444&#125;&apos;;</span><br><span class="line">        //将数据显示到页面中</span><br><span class="line">        var json = eval(&apos;(&apos; + data + &apos;)&apos;);</span><br><span class="line">        for (var key in json) &#123;</span><br><span class="line">            if ($(&apos;#&apos; + key).attr(&apos;type&apos;) == &apos;text&apos;) &#123;</span><br><span class="line">                $(&apos;#&apos; + key).val(json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">            if($(&apos;#&apos; + key).prop(&apos;tagName&apos;) == &apos;SPAN&apos;)&#123;</span><br><span class="line">                $(&apos;#&apos; + key).text(json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">		//获取文本和文本框的内容转为JSON对象</span><br><span class="line">        function showResult() &#123;</span><br><span class="line">            var model = &#123;&#125;;</span><br><span class="line">            $(&apos;input[type=&quot;text&quot;]&apos;).each(function () &#123;</span><br><span class="line">                model[$(this).attr(&apos;id&apos;)]=$(this).val();</span><br><span class="line">            &#125;);</span><br><span class="line">            $(&apos;span&apos;).each(function () &#123;</span><br><span class="line">                model[$(this).attr(&apos;id&apos;)]=$(this).text();</span><br><span class="line">            &#125;);</span><br><span class="line">            console.log(model);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Radio和Checkbox"><a href="#Radio和Checkbox" class="headerlink" title="Radio和Checkbox"></a>Radio和Checkbox</h2><p>另外一种经常出现于表单中的就是radio、checkbox这些单选多选的元素了。这些元素通常用name命名一组选项。下面我同样用jQuery简化数据的显示和提交。</p>
<h3 id="显示数据"><a href="#显示数据" class="headerlink" title="显示数据"></a>显示数据</h3><p>和之前的文本一样，用for循环遍历json数据，然后通过if过滤后显示到界面。不同之处是这边是通过name来显示和绑定数据的。<br><strong>注：对radio和checkbox处理的方法写在了后面，所以复制粘贴的同学们请注意别漏了~</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(var key in json)&#123;</span><br><span class="line">   if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;radio&apos;) &#123;</span><br><span class="line">      showRadioValue(key, json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">   if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;checkbox&apos;) &#123;</span><br><span class="line">     showCheckBoxValue(key, json[key]);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="获取数据model的方法"><a href="#获取数据model的方法" class="headerlink" title="获取数据model的方法"></a>获取数据model的方法</h3><ul>
<li>定义空model对象。</li>
<li>定义name避免重复添加。</li>
<li>遍历所有radio获取结果传给model</li>
<li>遍历所有checkbox获取结果传给model</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function showResult() &#123;</span><br><span class="line">    var model = &#123;&#125;;</span><br><span class="line">    var radioName = &apos;&apos;;</span><br><span class="line">    var checkboxName = &apos;&apos;;</span><br><span class="line">    $(&quot;input[type=&apos;radio&apos;]&quot;).each(function () &#123;</span><br><span class="line">        if($(this).attr(&apos;name&apos;) != radioName)&#123;</span><br><span class="line">            radioName = $(this).attr(&apos;name&apos;);</span><br><span class="line">            model[radioName] = getRadioValue(radioName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(&quot;input[type=&apos;checkbox&apos;]&quot;).each(function () &#123;</span><br><span class="line">        if($(this).attr(&apos;name&apos;) != checkboxName)&#123;</span><br><span class="line">            checkboxName = $(this).attr(&apos;name&apos;);</span><br><span class="line">            model[checkboxName] = getCheckboxValue(checkboxName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    console.log(model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="处理radio和checkbox的一些方法"><a href="#处理radio和checkbox的一些方法" class="headerlink" title="处理radio和checkbox的一些方法"></a>处理radio和checkbox的一些方法</h3><p>这里我对radio和checkbox的显示和获取结果写了几个方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">function showRadioValue(name, value) &#123;</span><br><span class="line">    $(&apos;input[name=&apos; + name +  &apos;]&apos;).each(function () &#123;</span><br><span class="line">        if(value == $(this).val())&#123;</span><br><span class="line">            $(this).attr(&apos;checked&apos;, &apos;true&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getRadioValue(name) &#123;</span><br><span class="line">    var value = 0;</span><br><span class="line">    var i = 0;</span><br><span class="line">    $(&apos;input[name=&apos; + name + &apos;]&apos; ).each(function () &#123;</span><br><span class="line">        if ($(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).is( &apos;:checked&apos;)) &#123;</span><br><span class="line">            value = $(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).val();</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;);</span><br><span class="line">    return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function showCheckBoxValue (name, value) &#123;</span><br><span class="line">    var values = value.split(&apos;,&apos; );</span><br><span class="line">    var row = 1;</span><br><span class="line">    $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">        if (values[row] == 1) &#123;</span><br><span class="line">            $(this).attr(&quot;checked&quot; , &apos;true&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">        row++;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getCheckboxValue (name) &#123;</span><br><span class="line">    var text = &quot;&quot; ;</span><br><span class="line">    $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">        var t = &apos;&apos; ;</span><br><span class="line">        if ($(this ).is(&apos;:checked&apos;)) &#123;</span><br><span class="line">            t = &quot;1&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            t = &quot;0&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        text += &quot;,&quot; + t;</span><br><span class="line">    &#125;);</span><br><span class="line">    return text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;jquery-2.2.3.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param01&quot; value=&quot;1&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param01&quot; value=&quot;2&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param01&quot; value=&quot;3&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param02&quot; value=&quot;1&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param02&quot; value=&quot;2&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param02&quot; value=&quot;3&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param03&quot; value=&quot;1&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param03&quot; value=&quot;2&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;param03&quot; value=&quot;3&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;3&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param04&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;1&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;2&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;3&lt;/label&gt;</span><br><span class="line">            &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;param05&quot;&gt;3&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;button onclick=&quot;showResult()&quot;&gt;显示结果&lt;/button&gt;</span><br><span class="line">        &lt;label id=&quot;result&quot;&gt;result&lt;/label&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        //多条radio或者checkbox的快速赋值</span><br><span class="line">        var data = &apos;&#123;&quot;param01&quot;:&quot;1&quot;,&quot;param02&quot;:&quot;3&quot;,&quot;param03&quot;:&quot;2&quot;,&quot;param04&quot;:&quot;,1,0,0,0&quot;,&quot;param05&quot;:&quot;,0,0,1,1&quot;&#125;&apos;;</span><br><span class="line">        var json =eval( &apos;(&apos; + data + &apos;)&apos;);</span><br><span class="line">        for(var key in json)&#123;</span><br><span class="line">            if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;radio&apos;) &#123;</span><br><span class="line">                showRadioValue(key, json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">            if ($(&apos;input[name=&apos; + key +  &apos;]&apos;).attr(&apos;type&apos;) == &apos;checkbox&apos;) &#123;</span><br><span class="line">                showCheckBoxValue(key, json[key]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function showRadioValue(name, value) &#123;</span><br><span class="line">            $(&apos;input[name=&apos; + name +  &apos;]&apos;).each(function () &#123;</span><br><span class="line">                if(value == $(this).val())&#123;</span><br><span class="line">                    $(this).attr(&apos;checked&apos;, &apos;true&apos;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function getRadioValue(name) &#123;</span><br><span class="line">            var value = 0;</span><br><span class="line">            var i = 0;</span><br><span class="line">            $(&apos;input[name=&apos; + name + &apos;]&apos; ).each(function () &#123;</span><br><span class="line">                if ($(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).is( &apos;:checked&apos;)) &#123;</span><br><span class="line">                    value = $(&apos;input[name=&apos; + name + &apos;]&apos;).eq(i).val();</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;);</span><br><span class="line">            return value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function showCheckBoxValue (name, value) &#123;</span><br><span class="line">            var values = value.split(&apos;,&apos; );</span><br><span class="line">            var row = 1;</span><br><span class="line">            $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">                if (values[row] == 1) &#123;</span><br><span class="line">                    $(this).attr(&quot;checked&quot; , &apos;true&apos;);</span><br><span class="line">                &#125;</span><br><span class="line">                row++;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function getCheckboxValue (name) &#123;</span><br><span class="line">            var text = &quot;&quot; ;</span><br><span class="line">            $(&apos;input[name=&quot;&apos; + name + &apos;&quot;]&apos;).each( function () &#123;</span><br><span class="line">                var t = &apos;&apos; ;</span><br><span class="line">                if ($(this ).is(&apos;:checked&apos;)) &#123;</span><br><span class="line">                    t = &quot;1&quot;;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    t = &quot;0&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">                text += &quot;,&quot; + t;</span><br><span class="line">            &#125;);</span><br><span class="line">            return text;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function showResult() &#123;</span><br><span class="line">            var model = &#123;&#125;;</span><br><span class="line">            var radioName = &apos;&apos;;</span><br><span class="line">            var checkboxName = &apos;&apos;;</span><br><span class="line">            $(&quot;input[type=&apos;radio&apos;]&quot;).each(function () &#123;</span><br><span class="line">                if($(this).attr(&apos;name&apos;) != radioName)&#123;</span><br><span class="line">                    radioName = $(this).attr(&apos;name&apos;);</span><br><span class="line">                    model[radioName] = getRadioValue(radioName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            $(&quot;input[type=&apos;checkbox&apos;]&quot;).each(function () &#123;</span><br><span class="line">                if($(this).attr(&apos;name&apos;) != checkboxName)&#123;</span><br><span class="line">                    checkboxName = $(this).attr(&apos;name&apos;);</span><br><span class="line">                    model[checkboxName] = getCheckboxValue(checkboxName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            console.log(model);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>如果有一些特殊处理的内容（如时间格式文本），可以先遍历后在遍历之后单独进行赋值。</li>
<li>以上方法可以用于所有以ID定义的用于显示和获取数据的HTML元素。</li>
<li>用好jQuery的选择器可以获取到任何所需的元素、元素集合。</li>
<li>在each()方法中<code>$(this)</code>表示当前元素。</li>
<li>获取所选ID的元素标签：<code>$(&#39;#&#39; + key).prop(&#39;tagName&#39;) == &#39;SPAN&#39;</code>，注意：标签结果<code>&#39;SPAN&#39;</code>都是大写的,可以打log验证。</li>
<li>不断找规律、总结提炼，找出最好的偷懒方法，尽量避免体力劳动。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/巧用jQuery选择器写表单办法总结（提高效率）/" data-id="cjdcg4q8f000h1wbtll8aofqo" class="article-share-link" data-share="baidu" data-title="巧用jQuery选择器写表单办法总结（提高效率）">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/巧用jQuery选择器写表单办法总结（提高效率）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/hello-world/" class="article-date">
  <time datetime="2018-02-06T05:45:39.152Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/06/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://violetjack.github.io/2018/02/06/hello-world/" data-id="cjdcg4q8b000d1wbt1u26cu7p" class="article-share-link" data-share="baidu" data-title="Hello World">分享到</a>
      

      
        <a href="https://violetjack.github.io/2018/02/06/hello-world/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>
</section>
      
      <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">18</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/02/06/Vue.js学习系列四 —— Webpack学习实践/">Vue.js学习系列四 —— Webpack学习实践</a>
          </li>
        
          <li>
            <a href="/2018/02/06/ES6 学习笔记（上）/">ES6 学习笔记（上）</a>
          </li>
        
          <li>
            <a href="/2018/02/06/ES6 学习笔记（下）/">ES6 学习笔记（下）</a>
          </li>
        
          <li>
            <a href="/2018/02/06/Vue.js学习系列七 —— Vue服务器渲染Nuxt学习/">Vue.js学习系列七 —— Vue服务器渲染Nuxt学习</a>
          </li>
        
          <li>
            <a href="/2018/02/06/Vue.js学习系列三 —— axios和网络传输相关知识的学习实践/">Vue.js学习系列三 —— axios和网络传输相关知识的学习实践</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">个人网站</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/violetjack" target="_blank">Github</a>
          </li>
        
          <li>
            <a href="https://segmentfault.com/u/violetjack" target="_blank">SegmentFault</a>
          </li>
        
          <li>
            <a href="http://blog.csdn.net/violetjack0808" target="_blank">CSDN</a>
          </li>
        
          <li>
            <a href="https://www.jianshu.com/u/54ae4af3a98d" target="_blank">简书</a>
          </li>
        
          <li>
            <a href="https://juejin.im/user/571d953d39b0570068145cd1" target="_blank">掘金</a>
          </li>
        
          <li>
            <a href="https://www.zhihu.com/people/violetjack" target="_blank">知乎</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 VioletJack<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
